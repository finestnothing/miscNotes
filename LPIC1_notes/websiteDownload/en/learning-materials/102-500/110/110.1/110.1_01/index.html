

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>110.1 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="en"
      selected>English</option>
  
    <option value="pt"
      >PortuguÃªs</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">110.1 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 105: Shells and Shell Scripting
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../105/105.1/index.html" class="hierarchy__link">105.1 Customize and use the shell environment</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_01/index.html" class="hierarchy__link">105.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_02/index.html" class="hierarchy__link">105.1 Lesson 2</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_03/index.html" class="hierarchy__link">105.1 Lesson 3</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../105/105.2/index.html" class="hierarchy__link">105.2 Customize or write simple scripts</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_01/index.html" class="hierarchy__link">105.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_02/index.html" class="hierarchy__link">105.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 106: User Interfaces and Desktops
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../106/106.1/index.html" class="hierarchy__link">106.1 Install and configure X11</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.1/106.1_01/index.html" class="hierarchy__link">106.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.2/index.html" class="hierarchy__link">106.2 Graphical Desktops</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.2/106.2_01/index.html" class="hierarchy__link">106.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.3/index.html" class="hierarchy__link">106.3 Accessibility</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.3/106.3_01/index.html" class="hierarchy__link">106.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 107: Administrative Tasks
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../107/107.1/index.html" class="hierarchy__link">107.1 Manage user and group accounts and related system files</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_01/index.html" class="hierarchy__link">107.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_02/index.html" class="hierarchy__link">107.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.2/index.html" class="hierarchy__link">107.2 Automate system administration tasks by scheduling jobs</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_01/index.html" class="hierarchy__link">107.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_02/index.html" class="hierarchy__link">107.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.3/index.html" class="hierarchy__link">107.3 Localisation and internationalisation</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.3/107.3_01/index.html" class="hierarchy__link">107.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 108: Essential System Services
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../108/108.1/index.html" class="hierarchy__link">108.1 Maintain system time</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.1/108.1_01/index.html" class="hierarchy__link">108.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../108/108.1/108.1_02/index.html" class="hierarchy__link">108.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.2/index.html" class="hierarchy__link">108.2 System logging</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.2/108.2_01/index.html" class="hierarchy__link">108.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../108/108.2/108.2_02/index.html" class="hierarchy__link">108.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.3/index.html" class="hierarchy__link">108.3 Mail Transfer Agent (MTA) basics</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.3/108.3_01/index.html" class="hierarchy__link">108.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.4/index.html" class="hierarchy__link">108.4 Manage printers and printing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.4/108.4_01/index.html" class="hierarchy__link">108.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 109: Networking Fundamentals
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../109/109.1/index.html" class="hierarchy__link">109.1 Fundamentals of internet protocols</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_01/index.html" class="hierarchy__link">109.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_02/index.html" class="hierarchy__link">109.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.2/index.html" class="hierarchy__link">109.2 Persistent network configuration</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_01/index.html" class="hierarchy__link">109.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_02/index.html" class="hierarchy__link">109.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.3/index.html" class="hierarchy__link">109.3 Basic network troubleshooting</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_01/index.html" class="hierarchy__link">109.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_02/index.html" class="hierarchy__link">109.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.4/index.html" class="hierarchy__link">109.4 Configure client side DNS</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.4/109.4_01/index.html" class="hierarchy__link">109.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 110: Security
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">110.1 Perform security administration tasks</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">110.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../110.2/index.html" class="hierarchy__link">110.2 Setup host security</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../110.2/110.2_01/index.html" class="hierarchy__link">110.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../110.3/index.html" class="hierarchy__link">110.3 Securing data with encryption</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../110.3/110.3_01/index.html" class="hierarchy__link">110.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../110.3/110.3_02/index.html" class="hierarchy__link">110.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 110: Security</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">110.1 Perform security administration tasks</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">110.1 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>110.1 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">110 Security</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">110.1 Perform security administration tasks</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Security is a must in system administration. As a good Linux sysadmin you have to keep an eye on a number of things such as special permissions on files, user password aging, open ports and sockets, limiting the use of system resources, dealing with logged-in users, and privilege escalation through <code>su</code> and <code>sudo</code>. In this lesson we will be reviewing each one of these topics.</p>
</div>
<div class="sect2">
<h3 id="_checking_for_files_with_the_suid_and_sgid_set">Checking for Files with the SUID and SGID Set</h3>
<div class="paragraph">
<p>Aside from the traditional permission set of <em>read</em>, <em>write</em> and <em>execute</em>, files in a Linux system may also have some special permissions set such as the <em>SUID</em> or the <em>SGID</em> bits.</p>
</div>
<div class="paragraph">
<p>The SUID bit will allow the file to be executed with the privileges of the file&#8217;s owner. It is numerically represented by <code>4000</code> and symbolically represented by either <code>s</code> or <code>S</code> on the owner&#8217;s <em>execute</em> permission bit. A classic example of an executable file with the SUID permission set is <code>passwd</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>ls -l /usr/bin/passwd</strong>
-rwsr-xr-x 1 root root 63736 jul 27  2018 /usr/bin/passwd</pre>
</div>
</div>
<div class="paragraph">
<p>The lowercase <code>s</code> in <code>rws</code> indicates the presence of the SUID on the file&#8201;&#8212;&#8201;together with the <em>execute</em> permission. An uppercase <code>S</code> instead (<code>rwS</code>) would mean the underlying <em>execute</em> permission is not set.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You will learn about <code>passwd</code> in the next section. The utility is mostly used by <code>root</code> to set/change users' passwords (e.g.: <code>passwd carol</code>). However, regular users can use it to change their own passwords, too. Therefore it comes with the SUID set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On the other hand, the SGID bit can be set both on files and directories. With files, its behaviour is equivalent to that of SUID but the privileges are those of the group owner. When set on a directory, however, it will allow all files created therein to inherit the ownership of the directory&#8217;s group. Like SUID, SGID is symbollically represented by either <code>s</code> or <code>S</code> on the group&#8217;s <em>execute</em> permission bit. Numerically, it is represented by <code>2000</code>. You can set the SGID on a directory by using <code>chmod</code>. You have to add <code>2</code> (SGID) to the traditional permissions (<code>755</code> in our case):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>ls -ld shared_directory</strong>
drwxr-xr-x 2 carol carol 4096 may 30 23:55 shared_directory
carol@debian:~$ <strong>sudo chmod 2755 shared_directory/</strong>
carol@debian:~$ <strong>ls -ld shared_directory</strong>
drwxr-sr-x 2 carol carol 4096 may 30 23:55 shared_directory</pre>
</div>
</div>
<div class="paragraph">
<p>To find files with either or both the SUID and SGID set you can use the <code>find</code> command and make use of the <code>-perm</code> option. You can use both numeric and symbolic values. The values&#8201;&#8212;&#8201;in turn&#8201;&#8212;&#8201;can be passed on their own or preceded by a dash (<code>-</code>) or a forward slash (<code>/</code>). The meaning is as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-perm <em>numeric-value</em></code>  or <code>-perm <em>symbolic-value</em></code></dt>
<dd>
<p>find files having the special permission <em>exclusively</em></p>
</dd>
<dt class="hdlist1"><code>-perm <em>-numeric-value</em></code> or <code>-perm <em>-symbolic-value</em></code></dt>
<dd>
<p>find files having the special permission and other permissions</p>
</dd>
<dt class="hdlist1"><code>-perm /<em>numeric-value</em></code> or <code>-perm /<em>symbolic-value</em></code></dt>
<dd>
<p>find files having either of the special permission (and other permissions)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For example, to find files with <em>only</em> SUID set in the present working directory, you will use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>find . -perm 4000</strong>
carol@debian:~$ <strong>touch file</strong>
carol@debian:~$ <strong>chmod 4000 file</strong>
carol@debian:~$ <strong>find . -perm 4000</strong>
./file</pre>
</div>
</div>
<div class="paragraph">
<p>Note how&#8201;&#8212;&#8201;as there were not any files having exclusively the SUID&#8201;&#8212;&#8201;we created one to show some output. You can run the same command in symbolic notation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>find . -perm u+s</strong>
./file</pre>
</div>
</div>
<div class="paragraph">
<p>To find files matching SUID (irrespective of any other permssions) in the <code>/usr/bin/</code> directory, you can use either of the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>sudo find /usr/bin -perm -4000</strong>
/usr/bin/umount
/usr/bin/newgrp
/usr/bin/gpasswd
/usr/bin/chfn
/usr/bin/mount
/usr/bin/passwd
/usr/bin/chsh
/usr/bin/sudo
/usr/bin/su
carol@debian:~$ <strong>sudo find /usr/bin -perm -u+s</strong>
/usr/bin/umount
/usr/bin/newgrp
/usr/bin/gpasswd
/usr/bin/chfn
/usr/bin/mount
/usr/bin/passwd
/usr/bin/chsh
/usr/bin/sudo
/usr/bin/su</pre>
</div>
</div>
<div class="paragraph">
<p>If you are looking for files in the same directory with the SGID bit set, you can execute <code>find /usr/bin/ -perm -2000</code> or <code>find /usr/bin/ -perm -g+s</code>.</p>
</div>
<div class="paragraph">
<p>Finally, to find files with either of the two special permissions set, add <code>4</code> and <code>2</code> and use <code>/</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>sudo find /usr/bin -perm /6000</strong>
/usr/bin/dotlock.mailutils
/usr/bin/umount
/usr/bin/newgrp
/usr/bin/wall
/usr/bin/ssh-agent
/usr/bin/chage
/usr/bin/dotlockfile
/usr/bin/gpasswd
/usr/bin/chfn
/usr/bin/mount
/usr/bin/passwd
/usr/bin/chsh
/usr/bin/expiry
/usr/bin/sudo
/usr/bin/bsd-write
/usr/bin/crontab
/usr/bin/su</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_password_management_and_aging">Password Management and Aging</h3>
<div class="paragraph">
<p>As noted above you can use the <code>passwd</code> utility to change your own password as a regular user. Additionally, you can pass the <code>-S</code> or <code>--status</code> switch to get status information about your account:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>passwd -S</strong>
carol P 12/07/2019 0 99999 7 -1</pre>
</div>
</div>
<div class="paragraph">
<p>Here is a breakdown of the seven fields you get in the output:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>carol</code></dt>
<dd>
<p>User&#8217;s login name.</p>
</dd>
<dt class="hdlist1"><code>P</code></dt>
<dd>
<p>It indicates that the user has a valid password (<code>P</code>); other possible values are <code>L</code> for a locked password and <code>NP</code> for no password.</p>
</dd>
<dt class="hdlist1"><code>12/07/2019</code></dt>
<dd>
<p>Date of the last password change.</p>
</dd>
<dt class="hdlist1"><code>0</code></dt>
<dd>
<p>Minimum age in days (the minimum number of days between password changes). A value of <code>0</code> means the password may be changed at any time.</p>
</dd>
<dt class="hdlist1"><code>99999</code></dt>
<dd>
<p>Maximum age in days (the maximum number of days the password is valid for). A value of <code>99999</code> will disable password expiration.</p>
</dd>
<dt class="hdlist1"><code>7</code></dt>
<dd>
<p>Warning period in days (the number of days prior to password expiration that a user will be warned).</p>
</dd>
<dt class="hdlist1"><code>-1</code></dt>
<dd>
<p>Password inactivity period in days (the number of inactive days after password expiration before the account is locked). A value of <code>-1</code> will remove an account&#8217;s inactivity.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Apart from reporting on account status, you will use the <code>passwd</code> command as root to carry out some basic account maintenance. You can lock and unlock accounts, force a user to change their password on the next login and delete a user&#8217;s password with the <code>-l</code>, <code>-u</code>, <code>-e</code> and <code>-d</code> options, respectively.</p>
</div>
<div class="paragraph">
<p>To test these options it is convenient to introduce the <code>su</code> command at this point. Through <code>su</code> you can change users during a login session. So, for example, let us use <code>passwd</code> as root to lock <code>carol</code>'s password. Then we will switch to <code>carol</code> and check our account status to verify that the password has&#8201;&#8212;&#8201;in fact&#8201;&#8212;&#8201;been locked (<code>L</code>) and cannot be changed. Finally, going back to the root user, we will unlock <code>carol</code>'s password:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>passwd -l carol</strong>
passwd: password expiry information changed.
root@debian:~# <strong>su - carol</strong>
carol@debian:~$ <strong>passwd -S</strong>
carol L 05/31/2020 0 99999 7 -1
carol@debian:~$ <strong>passwd</strong>
Changing password for carol.
Current password:
passwd: Authentication token manipulation error
passwd: password unchanged
carol@debian:~$ <strong>exit</strong>
logout
root@debian:~# <strong>passwd -u carol</strong>
passwd: password expiry information changed.</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can also lock and unlock a user&#8217;s password with the <code>usermod</code> command:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Lock user <code>carol</code>'s password</dt>
<dd>
<p><code>usermod -L carol</code> or <code>usermod --lock carol</code>.</p>
</dd>
<dt class="hdlist1">Unlock user <code>carol</code>'s password</dt>
<dd>
<p><code>usermod -U carol</code> or <code>usermod --unlock carol</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>With the <code>-f</code> or <code>--inactive</code> switches, <code>usermod</code> can also be used to set the number of days before an account with an expired password is disabled (e.g.: <code>usermod -f 3 carol</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Aside from <code>passwd</code> and <code>usermod</code>, the most direct command to deal with password and account aging is <code>chage</code> (&#8220;change age&#8221;). As root, you can pass <code>chage</code> the <code>-l</code> (or <code>--list</code>) switch followed by a username to have that user&#8217;s current password and account expiry information printed on the screen; as a regular user, you can view your own information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>chage -l carol</strong>
Last password change					: Aug 06, 2019
Password expires					: never
Password inactive					: never
Account expires						: never
Minimum number of days between password change		: 0
Maximum number of days between password change		: 99999
Number of days of warning before password expires	: 7</pre>
</div>
</div>
<div class="paragraph">
<p>Run without options and only followed by a username, <code>chage</code> will behave interactively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>chage carol</strong>
Changing the aging information for carol
Enter the new value, or press ENTER for the default

	Minimum Password Age [0]:
	Maximum Password Age [99999]:
	Last Password Change (YYYY-MM-DD) [2020-06-01]:
	Password Expiration Warning [7]:
	Password Inactive [-1]:
	Account Expiration Date (YYYY-MM-DD) [-1]:</pre>
</div>
</div>
<div class="paragraph">
<p>The options to modify the different <code>chage</code> settings are as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-m <em>days</em> <em>username</em></code> or <code>--mindays <em>days</em> <em>username</em></code></dt>
<dd>
<p>Specify minimum number of days between password changes (e.g.: <code>chage -m 5 carol</code>). A value of <code>0</code> will enable the user to change his/her password at any time.</p>
</dd>
<dt class="hdlist1"><code>-M <em>days</em> <em>username</em></code> or <code>--maxdays <em>days</em> <em>username</em></code></dt>
<dd>
<p>Specify maximum number of days the password will be valid for (e.g.: <code>chage -M 30 carol</code>). To disable password expiration, it is customary to give this option a value of <code>99999</code>.</p>
</dd>
<dt class="hdlist1"><code>-d <em>days</em> <em>username</em></code> or <code>--lastday <em>days</em> <em>username</em></code></dt>
<dd>
<p>Specify number of days since the password was last changed (e.g.: <code>chage -d 10 carol</code>). A value of <code>0</code> will force the user to change their password on the next login.</p>
</dd>
<dt class="hdlist1"><code>-W <em>days</em> <em>username</em></code> or <code>--warndays <em>days</em> <em>username</em></code></dt>
<dd>
<p>Specify number of days the user will be reminded of their password being expired.</p>
</dd>
<dt class="hdlist1"><code>-I <em>days</em> <em>username</em></code> or <code>--inactive <em>days</em> <em>username</em></code></dt>
<dd>
<p>Specify number of inactive days after password expiration (e.g.: <code>chage -I 10 carol</code>)&#8201;&#8212;&#8201;the same as <code>usermod -f</code> or <code>usermod --inactive</code>. Once that number of days has gone by, the account will be locked. With a value of <code>0</code>, the account will not be locked, though.</p>
</dd>
<dt class="hdlist1"><code>-E <em>date</em> <em>username</em></code> or <code>--expiredate <em>date</em> <em>username</em></code></dt>
<dd>
<p>Specify date (or number of days since <em>the epoch</em>&#8201;&#8212;&#8201;January, 1st 1970) on which the account will be locked. It is normally expressed in the format <code>YYYY-MM-DD</code>(e.g.: <code>chage -E 2050-12-13 carol</code>).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can learn more about <code>passwd</code>, <code>usermod</code> and <code>chage</code>&#8201;&#8212;&#8201;and their options&#8201;&#8212;&#8201;by consulting their respective manual pages.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_discovering_open_ports">Discovering Open Ports</h3>
<div class="paragraph">
<p>When it comes to keeping an eye on open ports, four powerful utilities are present on most Linux systems: <code>lsof</code>, <code>fuser</code>, <code>netstat</code> and <code>nmap</code>. We will cover them in this section.</p>
</div>
<div class="paragraph">
<p><code>lsof</code> stands for &#8220;list open files&#8221;, which is no small thing considering that&#8201;&#8212;&#8201;for Linux&#8201;&#8212;&#8201;everything is a file. In fact, if you type <code>lsof</code> into the terminal, you will get a large listing of regular files, device files, sockets, etc. However, for the sake of this lesson, we will mainly focus on ports. To print the listing of all &#8220;Internet&#8221; network files, run <code>lsof</code> with the <code>-i</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>lsof -i</strong>
COMMAND  PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
dhclient 357     root    7u  IPv4  13493      0t0  UDP *:bootpc
sshd     389     root    3u  IPv4  13689      0t0  TCP *:ssh (LISTEN)
sshd     389     root    4u  IPv6  13700      0t0  TCP *:ssh (LISTEN)
apache2  399     root    3u  IPv6  13826      0t0  TCP *:http (LISTEN)
apache2  401 www-data    3u  IPv6  13826      0t0  TCP *:http (LISTEN)
apache2  402 www-data    3u  IPv6  13826      0t0  TCP *:http (LISTEN)
sshd     557     root    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)
sshd     569    carol    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)</pre>
</div>
</div>
<div class="paragraph">
<p>Apart from the <code>bootpc</code> service&#8201;&#8212;&#8201;which is used by DHCP&#8201;&#8212;&#8201;the ouput shows two services listening for connections&#8201;&#8212;&#8201;<code>ssh</code> and the Apache web server (<code>http</code>)&#8201;&#8212;&#8201; as well as two established SSH connections. You can specify a particular host with the <code>@<em>ip-address</em></code> notation to check for its connections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>lsof -i@192.168.1.7</strong>
COMMAND PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    557  root    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)
sshd    569 carol    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>To print only IPv4 and IPv6 network files, use the <code>-i4</code> and <code>-i6</code> options respectively.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Likewise, you can filter by port by passing the <code>-i</code> (or <code>-i@<em>ip-address</em></code>) option the <code><em>:port</em></code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>lsof -i :22</strong>
COMMAND PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    389  root    3u  IPv4  13689      0t0  TCP *:ssh (LISTEN)
sshd    389  root    4u  IPv6  13700      0t0  TCP *:ssh (LISTEN)
sshd    557  root    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)
sshd    569 carol    3u  IPv4  14701      0t0  TCP 192.168.1.7:ssh->192.168.1.4:60510 (ESTABLISHED)</pre>
</div>
</div>
<div class="paragraph">
<p>Multiple ports are separated by commas (and ranges are specified using a dash):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>lsof -i@192.168.1.7:22,80</strong>
COMMAND PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    705  root    3u  IPv4  13960      0t0  TCP 192.168.1.7:ssh->192.168.1.4:44766 (ESTABLISHED)
sshd    718 carol    3u  IPv4  13960      0t0  TCP 192.168.1.7:ssh->192.168.1.4:44766 (ESTABLISHED)</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The amount of options available to <code>lsof</code> is quite impressive. To find out more, consult its manual page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next on the list of network commands is <code>fuser</code>. Its main purpose is to find a &#8220;file&#8217;s user&#8221;&#8201;&#8212;&#8201;which involves knowing what processes are accessing what files; it also gives you some other information such as the type of access. For example, to check on the current working directory, it is sufficient to run <code>fuser .</code> However, to get a little more information, it is convenient to use the verbose (<code>-v</code> or <code>--verbose</code>) option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>fuser .</strong>
/root:                 580c
root@debian:~# <strong>fuser -v .</strong>
                     USER        PID ACCESS COMMAND
/root:               root        580 ..c.. bash</pre>
</div>
</div>
<div class="paragraph">
<p>Let us break down the output:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">File</dt>
<dd>
<p>The file we are getting information about (<code>/root</code>).</p>
</dd>
<dt class="hdlist1"><code>USER</code> Column</dt>
<dd>
<p>The owner of the file (<code>root</code>).</p>
</dd>
<dt class="hdlist1"><code>PID</code> Column</dt>
<dd>
<p>The process identifier (<code>580</code>).</p>
</dd>
<dt class="hdlist1"><code>ACCESS</code> Column</dt>
<dd>
<p>Type of access (<code>..c..</code>). One of:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>c</code></dt>
<dd>
<p>Current directory.</p>
</dd>
<dt class="hdlist1"><code>e</code></dt>
<dd>
<p>Executable being run.</p>
</dd>
<dt class="hdlist1"><code>f</code></dt>
<dd>
<p>Open file (omitted in default display mode).</p>
</dd>
<dt class="hdlist1"><code>F</code></dt>
<dd>
<p>Open file for writing (omitted in default display mode).</p>
</dd>
<dt class="hdlist1"><code>r</code></dt>
<dd>
<p>root directory.</p>
</dd>
<dt class="hdlist1"><code>m</code></dt>
<dd>
<p>mmap&#8217;ed file or shared library.</p>
</dd>
<dt class="hdlist1"><code>.</code></dt>
<dd>
<p>Placeholder (omitted in default display mode).</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>COMMAND</code> Column</dt>
<dd>
<p>The command affiliated with the file (<code>bash</code>).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>With the <code>-n</code> (or <code>--namespace</code>) option, you can find information about network ports/sockets. You must also supply the network protocol and port number. Thus, to get information about the Apache web server you will run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>fuser -vn tcp 80</strong>
                     USER        PID ACCESS COMMAND
80/tcp:              root        402 F.... apache2
                     www-data    404 F.... apache2
                     www-data    405 F.... apache2</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>fuser</code> can be also be used to kill the processes accessing the file with the <code>-k</code> or <code>--kill</code> switches (e.g.: <code>fuser -k 80/tcp</code>). Refer to the manual page for more detailed information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let us turn to <code>netstat</code> now. <code>netstat</code> is a very versatile network tool that is mostly used to print &#8220;network statistics&#8221;.</p>
</div>
<div class="paragraph">
<p>Run without options, <code>netstat</code> will display both active Internet connections and Unix sockets. Because of the size of the listing, you may want to pipe its output through <code>less</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>netstat |less</strong>
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 192.168.1.7:ssh         192.168.1.4:55444       ESTABLISHED
Active UNIX domain sockets (w/o servers)
Proto RefCnt Flags       Type       State         I-Node   Path
unix  2      [ ]         DGRAM                    10509    /run/systemd/journal/syslog
unix  3      [ ]         DGRAM                    10123    /run/systemd/notify
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>To list only &#8220;listening&#8221; ports and sockets, you will use the <code>-l</code> or <code>--listening</code> options. The <code>-t</code>/<code>--tcp</code> and <code>-u</code>/<code>--udp</code> options can be added to filter by TCP and UDP protocol, respectively (they can also be combined in the same command). Likewise, <code>-e</code>/<code>--extend</code> will display additional information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>netstat -lu</strong>
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
udp        0      0 0.0.0.0:bootpc          0.0.0.0:*
carol@debian:~$ <strong>netstat -lt</strong>
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN
tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN
tcp6       0      0 [::]:http               [::]:*                  LISTEN
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN
tcp6       0      0 localhost:smtp          [::]:*                  LISTEN
carol@debian:~$ <strong>netstat -lute</strong>
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode
tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN      root       13729
tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN      root       14372
tcp6       0      0 [::]:http               [::]:*                  LISTEN      root       14159
tcp6       0      0 [::]:ssh                [::]:*                  LISTEN      root       13740
tcp6       0      0 localhost:smtp          [::]:*                  LISTEN      root       14374
udp        0      0 0.0.0.0:bootpc          0.0.0.0:*                           root       13604</pre>
</div>
</div>
<div class="paragraph">
<p>If you omit <code>-l</code> option, <em>only</em> established connections will be shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>netstat -ute</strong>
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode
tcp        0      0 192.168.1.7:ssh         192.168.1.4:39144       ESTABLISHED root       15103</pre>
</div>
</div>
<div class="paragraph">
<p>If you are only interested in numerical information concerning ports and hosts, you can use the <code>-n</code> or <code>--numeric</code> option to print only port numbers and IP addresses. Note how <code>ssh</code> turns into to <code>22</code> when adding <code>-n</code> to the command above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>netstat -uten</strong>
Active Internet connections (w/o servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode
tcp        0      0 192.168.1.7:22          192.168.1.4:39144       ESTABLISHED 0          15103</pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, you can make very useful and productive <code>netstat</code> commands by combining some of its options. Browse through the man pages to learn more and find the combinations that best suit your needs.</p>
</div>
<div class="paragraph">
<p>Finally, we will introduce <code>nmap</code>&#8201;&#8212;&#8201;or the &#8220;network mapper&#8221;. Another very powerful utility, this port scanner is executed by specifying an IP address or hostname:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>nmap localhost</strong>
Starting Nmap 7.70 ( https://nmap.org ) at 2020-06-04 19:29 CEST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.0000040s latency).
Other addresses for localhost (not scanned): ::1
Not shown: 998 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap done: 1 IP address (1 host up) scanned in 1.58 seconds</pre>
</div>
</div>
<div class="paragraph">
<p>Aside from a single host, <code>nmap</code> allows you to scan:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">multiple hosts</dt>
<dd>
<p>by separating them by spaces (e.g.: <code>nmap localhost 192.168.1.7</code>).</p>
</dd>
<dt class="hdlist1">host ranges</dt>
<dd>
<p>by using a dash (e.g.: <code>nmap 192.168.1.3-20</code>).</p>
</dd>
<dt class="hdlist1">subnets</dt>
<dd>
<p>by using a wildcard or CIDR notation (e.g.: <code>nmap 192.168.1.*</code> or <code>nmap 192.168.1.0/24</code>). You can exclude particular hosts (e.g.: <code>nmap 192.168.1.0/24 --exclude 192.168.1.7</code>).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To scan a particular port, use the <code>-p</code> switch followed by the port number or service name (<code>nmap -p 22</code> and <code>nmap -p ssh</code> will give you the same output):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>nmap -p 22 localhost</strong>
Starting Nmap 7.70 ( https://nmap.org ) at 2020-06-04 19:54 CEST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000024s latency).
Other addresses for localhost (not scanned): ::1

PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 1 IP address (1 host up) scanned in 0.22 seconds</pre>
</div>
</div>
<div class="paragraph">
<p>You can also scan multiple ports or port ranges by using commas and dashes, respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>nmap -p ssh,80 localhost</strong>
Starting Nmap 7.70 ( https://nmap.org ) at 2020-06-04 19:58 CEST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000051s latency).
Other addresses for localhost (not scanned): ::1

PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap done: 1 IP address (1 host up) scanned in 0.22 seconds</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>nmap -p 22-80 localhost</strong>
Starting Nmap 7.70 ( https://nmap.org ) at 2020-06-04 19:58 CEST
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000011s latency).
Other addresses for localhost (not scanned): ::1
Not shown: 57 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
80/tcp open  http

Nmap done: 1 IP address (1 host up) scanned in 1.47 seconds</pre>
</div>
</div>
<div class="paragraph">
<p>Two other important and handy <code>nmap</code> options are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-F</code></dt>
<dd>
<p>Run a fast scan on the 100 most common ports.</p>
</dd>
<dt class="hdlist1"><code>-v</code></dt>
<dd>
<p>Get verbose output (<code>-vv</code> will print even more verbose output).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>nmap</code> can run quite complex commands by making use of scan types. However, that topic is outside of the scope of this lesson.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_limits_on_users_logins_processes_and_memory_usage">Limits on Users Logins, Processes and Memory Usage</h3>
<div class="paragraph">
<p>Resources on a Linux system are not unlimited so&#8201;&#8212;&#8201;as a sysadmin&#8201;&#8212;&#8201;you should ensure a good balance between <em>user limits</em> on resources and the proper functioning of the operating system. <code>ulimit</code> can help you out in that regard.</p>
</div>
<div class="paragraph">
<p><code>ulimit</code> deals with <em>soft</em> and <em>hard</em> limits&#8201;&#8212;&#8201;specified by the <code>-S</code> and <code>-H</code> options, respectively. Run without options or arguments, <code>ulimit</code> will display the soft file blocks of the current user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>ulimit</strong>
unlimited</pre>
</div>
</div>
<div class="paragraph">
<p>With the <code>-a</code> option, <code>ulimit</code> will show all current soft limits (the same as <code>-Sa</code>); to display all current hard limits, use <code>-Ha</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>ulimit -a</strong>
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
(...)
carol@debian:~$ <strong>ulimit -Ha</strong>
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>The available shell resources are specified by options such as:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-b</code></dt>
<dd>
<p>maximum socket buffer size</p>
</dd>
<dt class="hdlist1"><code>-f</code></dt>
<dd>
<p>maximum size of files written by the shell and its children</p>
</dd>
<dt class="hdlist1"><code>-l</code></dt>
<dd>
<p>maximum size that may be locked into memory</p>
</dd>
<dt class="hdlist1"><code>-m</code></dt>
<dd>
<p>maximum resident set size (RSS)&#8201;&#8212;&#8201;the current portion of memory held by a process in main memory (RAM)</p>
</dd>
<dt class="hdlist1"><code>-v</code></dt>
<dd>
<p>maximum amout of virtual memory</p>
</dd>
<dt class="hdlist1"><code>-u</code></dt>
<dd>
<p>maximum number of processes available to a single user</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Thus, to display limits you will use <code>ulimit</code> followed by either <code>-S</code> (soft) or <code>-H</code>(hard) and the resource option; if neither <code>-S</code> or <code>-H</code> is supplied, soft limits will be shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>ulimit -u</strong>
10000
carol@debian:~$ <strong>ulimit -Su</strong>
10000
carol@debian:~$ <strong>ulimit -Hu</strong>
15672</pre>
</div>
</div>
<div class="paragraph">
<p>Likewise, to set new limits on a particular resource you will specify either <code>-S</code> or <code>-H</code>, followed by the corresponding resource option and the new value. This value can be a number or the special words <code>soft</code> (current soft limit), <code>hard</code> (current hard limit) or <code>unlimited</code> (no limit). If neither <code>-S</code> or <code>-H</code> is specified, both limits will be set. For example, let us first read the current maximum size value for files written by the shell and its children:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>ulimit -Sf</strong>
unlimited
root@debian:~# <strong>ulimit -Hf</strong>
unlimited</pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us change the value from <code>unlimited</code> to <code>500</code> blocks without specifying either <code>-S</code> or <code>-H</code>. Note how both the soft and hard limits are changed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>ulimit -f 500</strong>
root@debian:~# <strong>ulimit -Sf</strong>
500
root@debian:~# <strong>ulimit -Hf</strong>
500</pre>
</div>
</div>
<div class="paragraph">
<p>Finally, we will decrease only the soft limit to <code>200</code> blocks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>ulimit -Sf 200</strong>
root@debian:~# <strong>ulimit -Sf</strong>
200
root@debian:~# <strong>ulimit -Hf</strong>
500</pre>
</div>
</div>
<div class="paragraph">
<p>Hard limits can only be increased by the root user. On the other hand, regular users can decrease hard limits and increase soft limits up to the value of hard limits. To make new limit values persistent across reboots, you must write them to the <code>/etc/security/limits.conf</code> file. This is also the file used by the administrator to apply restrictions on particular users.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Be warned that there is no <code>ulimit</code> man page as such. It is a bash builtin so you have to refer to bash man page to learn about it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dealing_with_logged_in_users">Dealing with Logged in Users</h3>
<div class="paragraph">
<p>Another of your jobs as a sysadmin entails keeping track of logged-in users. There are three utilities that can help you out with those tasks: <code>last</code>, <code>who</code> and <code>w</code>.</p>
</div>
<div class="paragraph">
<p><code>last</code> prints a listing of the last logged in users with the most recent information on top:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>last</strong>
carol    pts/0        192.168.1.4      Sat Jun  6 14:25   still logged in
reboot   system boot  4.19.0-9-amd64   Sat Jun  6 14:24   still running
mimi     pts/0        192.168.1.4      Sat Jun  6 12:07 - 14:24  (02:16)
reboot   system boot  4.19.0-9-amd64   Sat Jun  6 12:07 - 14:24  (02:17)
(...)
wtmp begins Sun May 31 14:14:58 2020</pre>
</div>
</div>
<div class="paragraph">
<p>Considering the truncated listing, we get information about the last two users on the system. The first two lines tell us about user <code>carol</code>; the next two lines, about user <code>mimi</code>. The information is as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User <code>carol</code> at terminal <code>pts/0</code> from host <code>192.168.1.4</code> started her session on <code>Sat Jun 6</code> at <code>14:25</code> and is still <code>logged in</code>. The system&#8201;&#8212;&#8201;using kernel <code>4.19.0-9-amd64</code>&#8201;&#8212;&#8201;was started (<code>reboot   system boot</code>) on <code>Sat Jun  6</code> at <code>14:24</code> and is <code>still running</code>.</p>
</li>
<li>
<p>User <code>mimi</code> at terminal <code>pts/0</code> from host <code>192.168.1.4</code> started her session on <code>Sat Jun 6</code> at <code>12:07</code> and logged out at <code>14:24</code> (the session lasted a total of <code>(02:16)</code> hours). The system&#8201;&#8212;&#8201;using kernel <code>4.19.0-9-amd64</code>&#8201;&#8212;&#8201;was started (<code>reboot   system boot</code>) on <code>Sat Jun  6</code> at <code>12:07</code> and was powered off at <code>14:24</code> (it was up and running for <code>(02:17)</code> hours).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The line <code>wtmp begins Sun May 31 14:14:58 2020</code> refers to <code>/var/log/wtmp</code>, which is the special log file from which <code>last</code> gets the information.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can pass <code>last</code> a username to have only entries for that user displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>last carol</strong>
carol    pts/0        192.168.1.4      Sat Jun  6 14:25   still logged in
carol    pts/0        192.168.1.4      Sat Jun  6 12:07 - 14:24  (02:16)
carol    pts/0        192.168.1.4      Fri Jun  5 00:48 - 01:28  (00:39)
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>Regarding the second column (terminal), <code>pts</code> stands for <em>Pseudo Terminal Slave</em>&#8201;&#8212;&#8201;as opposed to a proper <em>TeleTYpewriter</em> or <code>tty</code> terminal; <code>0</code> refers to the first one (the count starts at zero).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>To check for bad login attempts, run <code>lastb</code> instead of <code>last</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>who</code> and <code>w</code> utilities focus on currently logged in users and are quite similar. The former displays who is logged on, while the latter also shows information on what they are doing.</p>
</div>
<div class="paragraph">
<p>When executed with no options, <code>who</code> will display four columns corresponding to logged-in user, terminal, date and time, and hostname:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>who</strong>
carol    pts/0        2020-06-06 17:16 (192.168.1.4)
mimi     pts/1        2020-06-06 17:28 (192.168.1.4)</pre>
</div>
</div>
<div class="paragraph">
<p><code>who</code> accepts a series of options, among which we can highlight the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-b</code>,<code>--boot</code></dt>
<dd>
<p>Display time of last system boot.</p>
</dd>
<dt class="hdlist1"><code>-r</code>,<code>--runlevel</code></dt>
<dd>
<p>Display current runlevel.</p>
</dd>
<dt class="hdlist1"><code>-H</code>,<code>--heading</code></dt>
<dd>
<p>Print column headings.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Compared to <code>who</code>, <code>w</code> gives a little more verbose output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>w</strong>
 17:56:12 up 40 min,  2 users,  load average: 0.04, 0.12, 0.09
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
carol    pts/0    192.168.1.4    17:16    1.00s  0.15s  0.05s sshd: carol [priv]
mimi     pts/1    192.168.1.4    17:28   15:08   0.05s  0.05s -bash</pre>
</div>
</div>
<div class="paragraph">
<p>The top line gives you information about the current time (<code>17:56:12</code>), how long the system has been up and running (<code>up 40 min</code>), the number of currently logged in users (<code>2 users</code>) and the load average numbers (<code>load average: 0.04, 0.12, 0.09</code>). These values refer to the number of jobs in the run queue averaged over the last 1, 5 and 15 minutes, respectively.</p>
</div>
<div class="paragraph">
<p>Then you find eight columns; let us break them down:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>USER</code></dt>
<dd>
<p>Login name of user.</p>
</dd>
<dt class="hdlist1"><code>TTY</code></dt>
<dd>
<p>Name of terminal the user is on.</p>
</dd>
<dt class="hdlist1"><code>FROM</code></dt>
<dd>
<p>Remote host from which the user has logged on.</p>
</dd>
<dt class="hdlist1"><code>LOGIN@</code></dt>
<dd>
<p>Login time.</p>
</dd>
<dt class="hdlist1"><code>IDLE</code></dt>
<dd>
<p>Idle time.</p>
</dd>
<dt class="hdlist1"><code>JCPU</code></dt>
<dd>
<p>Time used by all processes attached to the tty (including currently running background jobs).</p>
</dd>
<dt class="hdlist1"><code>PCPU</code></dt>
<dd>
<p>Time used by current process (the one showing under <code>WHAT</code>).</p>
</dd>
<dt class="hdlist1"><code>WHAT</code></dt>
<dd>
<p>Command line of current process.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Just like with <code>who</code>, you can pass <code>w</code> usernames:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>w mimi</strong>
 18:23:15 up  1:07,  2 users,  load average: 0.00, 0.02, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
mimi     pts/1    192.168.1.4      17:28    9:23   0.06s  0.06s -bash</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_sudo_configuration_and_usage">Basic <code>sudo</code> Configuration and Usage</h3>
<div class="paragraph">
<p>As already noted in this lesson, <code>su</code> lets you switch to any other user in the system as long as you provide the target user&#8217;s password. In the case of the root user, having its password distributed or known to (many) users puts the system at risk and is a very bad security practice. The basic usage of <code>su</code> is <code>su - <em>target-username</em></code>. When changing to root&#8201;&#8212;&#8201;though&#8201;&#8212;&#8201;the target username is optional:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>su - root</strong>
Password:
root@debian:~# exit
logout
carol@debian:~$ <strong>su -</strong>
Password:
root@debian:~#</pre>
</div>
</div>
<div class="paragraph">
<p>The use of the dash (<code>-</code>) ensures that the target user&#8217;s environment is loaded. Without it, the old user&#8217;s environment will be kept:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>su</strong>
Password:
root@debian:/home/carol#</pre>
</div>
</div>
<div class="paragraph">
<p>On the other hand, there is the <code>sudo</code> command. With it you can execute a command as the root user&#8201;&#8212;&#8201;or any other user for that matter. From a security perspective, <code>sudo</code> is a far better option than <code>su</code> as it presents two main advantages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>to run a command as root, you do not need the root user&#8217;s password, but only that of the invoking user in compliance with a security policy. The default security policy is <code>sudoers</code> as specified in <code>/etc/sudoers</code> and <code>/etc/sudoers.d/*</code>.</p>
</li>
<li>
<p><code>sudo</code> lets you run single commands with elevated privileges instead of launching a whole new subshell for root as <code>su</code> does.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The basic usage of <code>sudo</code> is <code>sudo -u <em>target-username</em> <em>command</em></code>. However, to run a command as user root, the <code>-u <em>target-username</em></code> option is not necessary:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>sudo -u mimi whoami</strong>
mimi
carol@debian:~$ <strong>sudo whoami</strong>
root</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>sudoers</code> will use a per-user (and per-terminal) timestamp for credential caching, so that you can use <code>sudo</code> without a password for a default period of fifteen minutes. This default value can be modified by adding the <code>timestamp_timeout</code> option as a <code>Defaults</code> setting in <code>/etc/sudoers</code> (e.g.: <code>Defaults timestamp_timeout=1</code> will set credential caching timeout to one minute).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_the_etcsudoers_file">The <code>/etc/sudoers</code> File</h4>
<div class="paragraph">
<p><code>sudo</code>'s main configuration file is <code>/etc/sudoers</code>(there is also the <code>/etc/sudoers.d</code> directory). That is the place where users' <code>sudo</code> privileges are determined. In other words, here you will specify who can run what commands as what users on what machines&#8201;&#8212;&#8201;as well as other settings. The syntax used is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>sudo less /etc/sudoers</strong>
(...)
# User privilege specification
root    ALL=(ALL:ALL) ALL

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>The privilege specification for the root user is <code>ALL=(ALL:ALL) ALL</code>. This translates as: user root (<code>root</code>) can log in from all hosts (<code>ALL</code>), as all users and all groups (<code>(ALL:ALL)</code>), and run all commands (<code>ALL</code>). The same is true for members of the <code>sudo</code> group&#8201;&#8212;&#8201;note how group names are identified by a preceding percent sign (<code>%</code>).</p>
</div>
<div class="paragraph">
<p>Thus, to have user <code>carol</code> be able to check <code>apache2</code> status from any host as any user or group, you will add the following line in the <code>sudoers</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol   ALL=(ALL:ALL) /usr/bin/systemctl status apache2</pre>
</div>
</div>
<div class="paragraph">
<p>You may want to save <code>carol</code> the inconvenience of having to provide her password to run the <code>systemctl status apache2</code> command. For that, you will modify the line to look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol   ALL=(ALL:ALL) NOPASSWD: /usr/bin/systemctl status apache2</pre>
</div>
</div>
<div class="paragraph">
<p>Say that now you want to restrict your hosts to 192.168.1.7 and enable <code>carol</code> to run <code>systemctl status apache2</code> as user <code>mimi</code>. You would modify the line as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol   192.168.1.7=(mimi) /usr/bin/systemctl status apache2</pre>
</div>
</div>
<div class="paragraph">
<p>Now you can check the status of the Apache web server as user <code>mimi</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol@debian:~$ <strong>sudo -u mimi systemctl status apache2</strong>
â apache2.service - The Apache HTTP Server
   Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)
   Active: active (running) since Tue 2020-06-09 13:12:19 CEST; 29min ago
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>If <code>carol</code> was to be promoted to sysadmin and you wanted to give her all privileges, the easiest approach would be that of including her in the special <code>sudo</code> group with <code>usermod</code> and the <code>-G</code> option (you may also want to use the <code>-a</code> option, which ensures that the user is not removed from any other groups they might belong to):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>sudo useradd -aG sudo carol</strong></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the Red Hat family of distributions the <code>wheel</code> group is the counterpart to the special administrative <code>sudo</code> group of Debian systems.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Instead of editing <code>/etc/sudoers</code> directly, you should simply use the <code>visudo</code> command as root (e.g.: <code>visudo</code>), which will open <code>/etc/sudoers</code> using your predefined text editor. To change the default text editor, you can add the <code>editor</code> option as a <code>Defaults</code> setting in <code>/etc/sudoers</code>. For instance, to change the editor to <code>nano</code>, you will add the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Defaults	editor=/usr/bin/nano</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Alternatively, you can specify a text editor via the <code>EDITOR</code> environment variable when using <code>visudo</code> (e.g.: <code>EDITOR=/usr/bin/nano visudo</code>)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Aside from users and groups, you can also make use of aliases in <code>/etc/sudoers</code>. There are three main categories of aliases that you can define: <em>host aliases</em> (<code>Host_Alias</code>), <em>user aliases</em> (<code>User_Alias</code>) and <em>command aliases</em> (<code>Cmnd_Alias</code>). Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Host alias specification

Host_Alias SERVERS = 192.168.1.7, server1, server2

# User alias specification

User_Alias REGULAR_USERS = john, mary, alex

User_Alias PRIVILEGED_USERS = mimi, alex

User_Alias ADMINS = carol, %sudo, PRIVILEGED_USERS, !REGULAR_USERS

# Cmnd alias specification

Cmnd_Alias SERVICES = /usr/bin/systemctl *

# User privilege specification
root    ALL=(ALL:ALL) ALL
ADMINS  SERVERS=SERVICES

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL</pre>
</div>
</div>
<div class="paragraph">
<p>Considering this sample <code>sudoers</code> file, let us explain the three types of aliases in a bit more detail:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Host aliases</dt>
<dd>
<p>They include a comma-separated list of hostnames, IP addresses, as well as networks and netgroups (preceded by <code>+</code>). Netmasks can be also specified. The <code>SERVERS</code> host alias includes an IP address and two hostnames:</p>
<div class="listingblock">
<div class="content">
<pre>Host_Alias SERVERS = 192.168.1.7, server1, server2</pre>
</div>
</div>
</dd>
<dt class="hdlist1">User aliases</dt>
<dd>
<p>They include a comma-separated list of users specified as usernames, groups (preceded by <code>%</code>) and netgroups (preceded by <code>+</code>). You can exclude particular users with <code>!</code>. The <code>ADMINS</code> user alias&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;includes user <code>carol</code>, the members of the <code>sudo</code> group and those members of the <code>PRIVILEGE_USERS</code> user alias that do not belong in the <code>REGULAR_USERS</code> user alias:</p>
<div class="listingblock">
<div class="content">
<pre>User_Alias ADMINS = carol, %sudo, PRIVILEGED_USERS, !REGULAR_USERS</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Command aliases</dt>
<dd>
<p>They include a comma-separated list of commands and directories. If a directory is specified, any file in that directory will be included&#8201;&#8212;&#8201;subdirectories will be ignored, though. The <code>SERVICES</code> command alias includes a single command with all its subcommands&#8201;&#8212;&#8201;as specified by the asterisk (<code>*</code>):</p>
<div class="listingblock">
<div class="content">
<pre>Cmnd_Alias SERVICES = /usr/bin/systemctl *</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>As a result of the alias specifications, the line <code>ADMINS  SERVERS=SERVICES</code> under the <code>User privilege specification</code> section translates as: all users belonging in <code>ADMINS</code> can use <code>sudo</code> to run any command in <code>SERVICES</code> on any server in <code>SERVERS</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>There is a fourth type of alias that you can include in <code>/etc/sudoers</code>: <em>runas aliases</em> (<code>Runas_Alias</code>). They are very similar to user aliases, but allow you to specify users by their <em>user ID</em> (UID). This feature might be convenient in some scenarios.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Complete the following table regarding special permissions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Special Permission</th>
<th class="tableblock halign-left valign-top">Numeric Representation</th>
<th class="tableblock halign-left valign-top">Symbolic Representation</th>
<th class="tableblock halign-left valign-top">Find files with <em>only</em> that Permission set</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUID</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SGID</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Displaying files with <em>only</em> the <code>SUID</code> or <code>SGID</code> bit set is normally not very practical. Perform the following tasks to prove that your searches can be more productive:</p>
<div class="ulist">
<ul>
<li>
<p>Find all files with the <code>SUID</code> (and other permissions) set in <code>/usr/bin</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Find all files with the <code>SGID</code> (and other permissions) set in <code>/usr/bin</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Find all files with either the <code>SUID</code> or the <code>SGID</code> set in <code>/usr/bin</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p><code>chage</code> lets you change a user&#8217;s password expiry information. As root, complete the following table by providing the correct commands on user <code>mary</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top"><code>chage</code> Commands</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make password will be valid for 365 days.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make user change password on next login.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set minimum number of days between password changes to 1.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable password expiration.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable user to change her password at any time.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set warning period to 7 days and account expiration date to August, 20th 2050.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print user&#8217;s current password expiry information.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Complete the following table with the appropriate network utility:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Command(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show network files for host <code>192.168.1.55</code> on port <code>22</code> using <code>lsof</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show processes accessing the default port of the Apache web server on your machine with <code>fuser</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List all listening <em>udp</em> sockets on your machine using <code>netstat</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scan ports <code>80</code> through <code>443</code> on host <code>192.168.1.55</code> using <code>nmap</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Perform the following tasks concerning <em>resident set size</em> (<em>RSS</em>) and <code>ulimit</code> as a regular user:</p>
<div class="ulist">
<ul>
<li>
<p>Display <em>soft</em> limits on the <em>maximum RSS</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Display <em>hard</em> limits on the <em>maximum RSS</em>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Set the <em>soft</em> limits on the <em>maximum RSS</em> to 5,000 kilobytes:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Set the <em>hard</em> limits on the <em>maximum RSS</em> to 10,000 kilobytes:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Finally, try to increase the <em>hard</em> limit on the <em>maximum RSS</em> up to 15,000 kilobytes. Can you do it? Why?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Consider the following <code>last</code> command output line and answer the questions:</p>
<div class="listingblock">
<div class="content">
<pre>carol    pts/0        192.168.1.4      Sun May 31 14:16 - 14:22  (00:06)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Was <code>carol</code> connected from a remote host? Why?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How long did <code>carol</code>'s session last?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Was <code>carol</code> connected through a true classic text-based terminal? Why?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Consider the following excerpt from <code>/etc/sudoers</code> and answer the question below.</p>
<div class="listingblock">
<div class="content">
<pre># Host alias specification

Host_Alias SERVERS = 192.168.1.7, server1, server2

# User alias specification

User_Alias REGULAR_USERS = john, mary, alex

User_Alias PRIVILEGED_USERS = mimi, alex

User_Alias ADMINS = carol, %sudo, PRIVILEGED_USERS, !REGULAR_USERS

# Cmnd alias specification

Cmnd_Alias WEB_SERVER_STATUS = /usr/bin/systemctl status apache2

# User privilege specification
root    ALL=(ALL:ALL) ALL
ADMINS  SERVERS=WEB_SERVER_STATUS

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL</pre>
</div>
</div>
<div class="paragraph">
<p>Can <code>alex</code> check the status of the Apache Web Server on any host? Why?</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apart from the <code>SUID</code> and <code>SGID</code>, there is a third special permission: the <em>sticky bit</em>. At present it is mostly used on directories such as <code>/tmp</code> to prevent regular users from deleting or moving files other than their own. Do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Set the <em>sticky bit</em> on <code>~/temporal</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Find directories with the <em>sticky bit</em> (and any other permissions) set on your home directory:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Unset the <em>sticky bit</em> on <code>~/temporal</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>When a user&#8217;s password is locked via <code>passwd -l <em>username</em></code> or <code>usermod -L <em>username</em></code>, how can you tell by looking into <code>/etc/shadow</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What is the <code>usermod</code> command counterpart to <code>chage -E <em>date</em> <em>username</em></code> or <code>chage --expiredate <em>date</em> <em>username</em></code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Provide two different <code>nmap</code> commands to scan all 65535 ports on localhost:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson you have learned how to perform a number of security administration tasks. The following topics have been covered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Finding files with the special <code>SUID</code> and <code>SGID</code> permissions set.</p>
</li>
<li>
<p>Setting and changing users' passwords and dealing with password aging information.</p>
</li>
<li>
<p>Using a number of network utilities to discover open ports on hosts/networks.</p>
</li>
<li>
<p>Setting up limits on system resources.</p>
</li>
<li>
<p>Checking on users that have logged in to the system or who are currently logged in.</p>
</li>
<li>
<p>Basic <code>sudo</code> usage and configuration (through the <code>/etc/sudoers</code> file).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Commands and files discussed in this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>find</code></dt>
<dd>
<p>Search for files in a directory hierarchy.</p>
</dd>
<dt class="hdlist1"><code>passwd</code></dt>
<dd>
<p>Change user password.</p>
</dd>
<dt class="hdlist1"><code>chmod</code></dt>
<dd>
<p>Change file mode bits.</p>
</dd>
<dt class="hdlist1"><code>chage</code></dt>
<dd>
<p>Change user password expiry information.</p>
</dd>
<dt class="hdlist1"><code>lsof</code></dt>
<dd>
<p>List open files.</p>
</dd>
<dt class="hdlist1"><code>fuser</code></dt>
<dd>
<p>Identify processes using files or sockets.</p>
</dd>
<dt class="hdlist1"><code>netstat</code></dt>
<dd>
<p>Print network connections.</p>
</dd>
<dt class="hdlist1"><code>nmap</code></dt>
<dd>
<p>Network exploration tool and port scanner.</p>
</dd>
<dt class="hdlist1"><code>ulimit</code></dt>
<dd>
<p>Get and set user limits.</p>
</dd>
<dt class="hdlist1"><code>/etc/security/limits.conf</code></dt>
<dd>
<p>Configuration file to apply restrictions on users.</p>
</dd>
<dt class="hdlist1"><code>last</code></dt>
<dd>
<p>Print a listing of last logged in users.</p>
</dd>
<dt class="hdlist1"><code>lastb</code></dt>
<dd>
<p>Print a listing of bad login attempts.</p>
</dd>
<dt class="hdlist1"><code>/var/log/wtmp</code></dt>
<dd>
<p>Database of user logins.</p>
</dd>
<dt class="hdlist1"><code>who</code></dt>
<dd>
<p>Show who is logged on.</p>
</dd>
<dt class="hdlist1"><code>w</code></dt>
<dd>
<p>Show who is logged on and what they are doing.</p>
</dd>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p>Change user or become superuser.</p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p>Execute a command as another user (including the superuser).</p>
</dd>
<dt class="hdlist1"><code>/etc/sudoers</code></dt>
<dd>
<p>Default configuration file for <code>sudo</code> security policy.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Complete the following table regarding special permissions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Special Permission</th>
<th class="tableblock halign-left valign-top">Numeric Representation</th>
<th class="tableblock halign-left valign-top">Symbolic Representation</th>
<th class="tableblock halign-left valign-top">Find files with <em>only</em> that Permission set</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s</code>,<code>S</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>find -perm 4000</code>, <code>find -perm u+s</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SGID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s</code>,<code>S</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>find -perm 2000</code>, <code>find -perm g+s</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Displaying files with <em>only</em> the <code>SUID</code> or <code>SGID</code> bit set is normally not very practical. Perform the following tasks to prove that your searches can be more productive:</p>
<div class="ulist">
<ul>
<li>
<p>Find all files with the <code>SUID</code> (and other permissions) set in <code>/usr/bin</code>:</p>
<div class="paragraph">
<p><code>find /usr/bin -perm -4000</code> or <code>find /usr/bin -perm -u+s</code></p>
</div>
</li>
<li>
<p>Find all files with the <code>SGID</code> (and other permissions) set in <code>/usr/bin</code>:</p>
<div class="paragraph">
<p><code>find /usr/bin -perm -2000</code> or <code>find /usr/bin -perm -g+s</code></p>
</div>
</li>
<li>
<p>Find all files with either the <code>SUID</code> or the <code>SGID</code> set in <code>/usr/bin</code>:</p>
<div class="paragraph">
<p><code>find /usr/bin -perm /6000</code></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>chage</code> lets you change a user&#8217;s password expiry information. As root, complete the following table by providing the correct commands on user <code>mary</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top"><code>chage</code> Commands</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make password will be valid for 365 days.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -M 365 mary</code>, <code>chage --maxdays 365 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make user change password on next login.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -d 0 mary</code>, <code>chage --lastday 0 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set minimum number of days between password changes to 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -m 1 mary</code>, <code>chage --mindays 1 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable password expiration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -M 99999 mary</code>, <code>chage --maxdays 99999 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable user to change her password at any time.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -m 0 mary</code>, <code>chage --mindays 0 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set warning period to 7 days and account expiration date to August, 20th 2050.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -W 7 -E 2050-08-20 mary</code>, <code>chage --warndays 7 --expiredate 2050-08-20 mary</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Print user&#8217;s current password expiry information.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chage -l mary</code>, <code>chage --list mary</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Complete the following table with the appropriate network utility:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Command(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show network files for host <code>192.168.1.55</code> on port <code>22</code> using <code>lsof</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lsof -i@192.168.1.55:22</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show processes accessing the default port of the Apache web server on your machine with <code>fuser</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fuser -vn tcp 80</code>, <code>fuser --verbose --namespace tcp 80</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">List all listening <em>udp</em> sockets on your machine using <code>netstat</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>netstat -lu</code>,<code>netstat --listening --udp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scan ports <code>80</code> through <code>443</code> on host <code>192.168.1.55</code> using <code>nmap</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nmap -p 80-443 192.168.1.55</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Perform the following tasks concerning <em>resident set size</em> (<em>RSS</em>) and <code>ulimit</code> as a regular user:</p>
<div class="ulist">
<ul>
<li>
<p>Display <em>soft</em> limits on the <em>maximum RSS</em>:</p>
<div class="paragraph">
<p><code>ulimit -m</code>, <code>ulimit -Sm</code></p>
</div>
</li>
<li>
<p>Display <em>hard</em> limits on the <em>maximum RSS</em>:</p>
<div class="paragraph">
<p><code>ulimit -Hm</code></p>
</div>
</li>
<li>
<p>Set the <em>soft</em> limits on the <em>maximum RSS</em> to 5,000 kilobytes:</p>
<div class="paragraph">
<p><code>ulimit -Sm 5000</code></p>
</div>
</li>
<li>
<p>Set the <em>hard</em> limits on the <em>maximum RSS</em> to 10,000 kilobytes:</p>
<div class="paragraph">
<p><code>ulimit -Hm 10000</code></p>
</div>
</li>
<li>
<p>Finally, try to increase the <em>hard</em> limit on the <em>maximum RSS</em> up to 15,000 kilobytes. Can you do it? Why?</p>
<div class="paragraph">
<p>No. Once set, regular users cannot increase hard limits.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Consider the following <code>last</code> command output line and answer the questions:</p>
<div class="listingblock">
<div class="content">
<pre>carol    pts/0        192.168.1.4      Sun May 31 14:16 - 14:22  (00:06)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Was <code>carol</code> connected from a remote host? Why?</p>
<div class="paragraph">
<p>Yes, the IP address of the remote host is in the third column.</p>
</div>
</li>
<li>
<p>How long did <code>carol</code>'s session last?</p>
<div class="paragraph">
<p>Six minutes (as shown in the last column).</p>
</div>
</li>
<li>
<p>Was <code>carol</code> connected through a true classic text-based terminal? Why?</p>
<div class="paragraph">
<p>No, <code>pts/0</code> in the second column indicates the connection was made through a graphical terminal emulator (aka <em>Pseudo Terminal Slave</em>).</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Consider the following excerpt from <code>/etc/sudoers</code> and answer the question below.</p>
<div class="listingblock">
<div class="content">
<pre># Host alias specification

Host_Alias SERVERS = 192.168.1.7, server1, server2

# User alias specification

User_Alias REGULAR_USERS = john, mary, alex

User_Alias PRIVILEGED_USERS = mimi, alex

User_Alias ADMINS = carol, %sudo, PRIVILEGED_USERS, !REGULAR_USERS

# Cmnd alias specification

Cmnd_Alias WEB_SERVER_STATUS = /usr/bin/systemctl status apache2

# User privilege specification
root    ALL=(ALL:ALL) ALL
ADMINS  SERVERS=WEB_SERVER_STATUS

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL</pre>
</div>
</div>
<div class="paragraph">
<p>Can <code>alex</code> check the status of the Apache Web Server on any host? Why?</p>
</div>
<div class="paragraph">
<p>No, as he is a member of <code>REGULAR_USERS</code> and that group of users is excluded from <code>ADMINS</code>; the only users (apart from <code>carol</code>, members of the <code>sudo</code> group and <code>root</code>) that can run <code>systemctl status apache2</code> on the <code>SERVERS</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.110.1_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apart from the <code>SUID</code> and <code>SGID</code>, there is a third special permission: the <em>Sticky bit</em>. At present it is mostly used on directories such as <code>/tmp</code> to prevent regular users from deleting or moving files other than their own. Do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Set the <em>sticky bit</em> on <code>~/temporal</code>:</p>
<div class="paragraph">
<p><code>chmod +t temporal</code>, <code>chmod 1755 temporal</code></p>
</div>
</li>
<li>
<p>Find directories with the <em>sticky bit</em> (and any other permissions) set on your home directory:</p>
<div class="paragraph">
<p><code>find ~ -perm -1000</code>, <code>find ~ -perm /1000</code></p>
</div>
</li>
<li>
<p>Unset the <em>sticky bit</em> on <code>~/temporal</code>:</p>
<div class="paragraph">
<p><code>chmod -t temporal</code>, <code>chmod 0755 temporal</code></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>When a user&#8217;s password is locked via <code>passwd -l <em>username</em></code> or <code>usermod -L <em>username</em></code>, how can you tell by looking into <code>/etc/shadow</code>?</p>
<div class="paragraph">
<p>An exclamation mark will appear in the second field, right after the login name of the affected user (e.g.: <code>mary:!$6$gOg9xJgv&#8230;&#8203;</code>).</p>
</div>
</li>
<li>
<p>What is the <code>usermod</code> command counterpart to <code>chage -E <em>date</em> <em>username</em></code> or <code>chage --expiredate <em>date</em> <em>username</em></code>?</p>
<div class="paragraph">
<p><code>usermod -e <em>date</em> <em>username</em></code>, <code>usermod --expiredate <em>date</em> <em>username</em></code></p>
</div>
</li>
<li>
<p>Provide two different <code>nmap</code> commands to scan all 65535 ports on localhost:</p>
<div class="paragraph">
<p><code>nmap -p 1-65535 localhost</code> and <code>nmap -p- localhost</code></p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>Â© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">110.3 Securing data with encryption (110.3 Lesson 1)</p>

        <div class="button-group">
            <a href="../../110.3/110.3_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>Â© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the worldâs first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>Â© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
