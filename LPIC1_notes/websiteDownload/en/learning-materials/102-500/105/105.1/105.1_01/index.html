

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>105.1 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">105.1 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 105: Shells and Shell Scripting
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">105.1 Customize and use the shell environment</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">105.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../105.1_02/index.html" class="hierarchy__link">105.1 Lesson 2</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../105.1_03/index.html" class="hierarchy__link">105.1 Lesson 3</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../105.2/index.html" class="hierarchy__link">105.2 Customize or write simple scripts</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../105.2/105.2_01/index.html" class="hierarchy__link">105.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../105.2/105.2_02/index.html" class="hierarchy__link">105.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 106: User Interfaces and Desktops
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../106/106.1/index.html" class="hierarchy__link">106.1 Install and configure X11</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.1/106.1_01/index.html" class="hierarchy__link">106.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.2/index.html" class="hierarchy__link">106.2 Graphical Desktops</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.2/106.2_01/index.html" class="hierarchy__link">106.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.3/index.html" class="hierarchy__link">106.3 Accessibility</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.3/106.3_01/index.html" class="hierarchy__link">106.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 107: Administrative Tasks
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../107/107.1/index.html" class="hierarchy__link">107.1 Manage user and group accounts and related system files</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_01/index.html" class="hierarchy__link">107.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_02/index.html" class="hierarchy__link">107.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.2/index.html" class="hierarchy__link">107.2 Automate system administration tasks by scheduling jobs</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_01/index.html" class="hierarchy__link">107.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_02/index.html" class="hierarchy__link">107.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.3/index.html" class="hierarchy__link">107.3 Localisation and internationalisation</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.3/107.3_01/index.html" class="hierarchy__link">107.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 108: Essential System Services
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../108/108.1/index.html" class="hierarchy__link">108.1 Maintain system time</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.1/108.1_01/index.html" class="hierarchy__link">108.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../108/108.1/108.1_02/index.html" class="hierarchy__link">108.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.2/index.html" class="hierarchy__link">108.2 System logging</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.2/108.2_01/index.html" class="hierarchy__link">108.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../108/108.2/108.2_02/index.html" class="hierarchy__link">108.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.3/index.html" class="hierarchy__link">108.3 Mail Transfer Agent (MTA) basics</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.3/108.3_01/index.html" class="hierarchy__link">108.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../108/108.4/index.html" class="hierarchy__link">108.4 Manage printers and printing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../108/108.4/108.4_01/index.html" class="hierarchy__link">108.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 109: Networking Fundamentals
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../109/109.1/index.html" class="hierarchy__link">109.1 Fundamentals of internet protocols</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_01/index.html" class="hierarchy__link">109.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_02/index.html" class="hierarchy__link">109.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.2/index.html" class="hierarchy__link">109.2 Persistent network configuration</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_01/index.html" class="hierarchy__link">109.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_02/index.html" class="hierarchy__link">109.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.3/index.html" class="hierarchy__link">109.3 Basic network troubleshooting</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_01/index.html" class="hierarchy__link">109.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_02/index.html" class="hierarchy__link">109.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.4/index.html" class="hierarchy__link">109.4 Configure client side DNS</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.4/109.4_01/index.html" class="hierarchy__link">109.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 110: Security
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../110/110.1/index.html" class="hierarchy__link">110.1 Perform security administration tasks</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.1/110.1_01/index.html" class="hierarchy__link">110.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.2/index.html" class="hierarchy__link">110.2 Setup host security</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.2/110.2_01/index.html" class="hierarchy__link">110.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.3/index.html" class="hierarchy__link">110.3 Securing data with encryption</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_01/index.html" class="hierarchy__link">110.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_02/index.html" class="hierarchy__link">110.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 105: Shells and Shell Scripting</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">105.1 Customize and use the shell environment</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">105.1 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>105.1 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">105 Shells and Shell Scripting</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">105.1 Customize and use the shell environment</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 3</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shell is arguably the most powerful tool in a Linux system and can be defined as an interface between the user and the kernel of the operating system. It interprets commands entered by the user. Therefore, all system administrators must be skilled in using the shell. As we may certainly know by now, the Bourne Again Shell (<em>Bash</em>) is the <em>de facto</em> shell for the vast majority of Linux distributions.</p>
</div>
<div class="paragraph">
<p>Once started, the first thing Bash&#8201;&#8212;&#8201;or any other shell for that matter&#8201;&#8212;&#8201;does is executing a series of startup scripts. These scripts customize the session&#8217;s environment. There are both system wide and user specific scripts. We can put our personal preferences or settings that best fit our users' needs in these scripts in the form of variables, aliases and functions.</p>
</div>
<div class="paragraph">
<p>The exact series of startup files depends on a very important parameter: the type of shell. Let us have a look at the variety of shells that exist.</p>
</div>
<div class="sect2">
<h3 id="_shell_types_interactive_vs_non_interactive_and_login_vs_non_login">Shell Types: Interactive vs. Non-Interactive and Login vs. Non-Login</h3>
<div class="paragraph">
<p>To start with, let us clarify the concepts of <em>interactive</em> and <em>login</em> in the context of shells:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Interactive / Non-interactive Shells</dt>
<dd>
<p>This kind of shell refers to the interaction that takes place between the user and the shell: The user provides input by typing commands into the terminal using the keyboard; the shell provides output by printing messages on the screen.</p>
</dd>
<dt class="hdlist1">Login / Non-login Shells</dt>
<dd>
<p>This kind of shell refers to the event of a user accessing a computer system providing its credentials, such as username and password.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Both interactive and non-interactive shells can be either login or non-login and any possible combination of these types has its specific uses.</p>
</div>
<div class="paragraph">
<p><em>Interactive login shells</em> are executed when users log into the system and are used to customize users' configurations according to their needs. A good example of this type of shell would be that of a group of users belonging to the same department who need a particular variable set in their sessions.</p>
</div>
<div class="paragraph">
<p>By <em>interactive non-login shells</em> we refer to any other shells opened by the user after logging into the system. Users use these shells during sessions to carry out maintenance and administrative tasks such as setting variables, the time, copying files, writing scripts, etc.</p>
</div>
<div class="paragraph">
<p>On the other hand, <em>non-interactive shells</em> do not require any kind of human interaction. Thus, these shells do not ask the user for input and their output&#8201;&#8212;&#8201;if any&#8201;&#8212;&#8201;is in most cases written to a log.</p>
</div>
<div class="paragraph">
<p><em>Non-interactive login shells</em> are quite rare and impractical. Their uses are virtually non-existent and we will only comment on them for the sake of insight into shell behaviour. Some odd examples include forcing a script to be run from a login shell with <code>/bin/bash --login &lt;some_script&gt;</code> or piping the standard output (<em>stdout</em>) of a command into the standard input (<em>stdin</em>) of an ssh connection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;some_command&gt; | ssh &lt;some_user&gt;@&lt;some_server&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>As for <em>non-interactive non-login shell</em> there is neither interaction nor login on behalf of the user, so we are referring here to the use of automated scripts. These scripts are mostly used to carry out repetitive administrative and maintenance tasks such as those included in cronjobs. In such cases, <code>bash</code> does not read any startup files.</p>
</div>
<div class="sect3">
<h4 id="_opening_a_terminal">Opening a Terminal</h4>
<div class="paragraph">
<p>When we are in a desktop environment, we can either open a terminal application or switch to one of the system consoles. Therefore, a new shell is either a <code>pts</code> shell when opened from a terminal emulator in the GUI or a <code>tty</code> shell when run from a system console. In the first case we are not dealing with a terminal but with a terminal emulator. As part of graphical sessions, terminal emulators like <em>gnome-terminal</em> or <em>konsole</em> are very feature-rich and user-friendly as compared to text-based user interface terminals. Less feature-rich terminal emulators include&#8201;&#8212;&#8201;amongst others&#8201;&#8212;&#8201;<em>XTerm</em> and <em>sakura</em>.</p>
</div>
<div class="paragraph">
<p>Using the <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span>-<kbd>F6</kbd> combos we can go to the console logins which open an interactive text-based login shell. <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F7</kbd></span> will take the session back into the Desktop.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>tty</code> stands for teletypewritter; <code>pts</code> stands for pseudo terminal slave. For more information: <code>man tty</code> and <code>man pts</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_launching_shells_with_bash">Launching Shells with <code>bash</code></h4>
<div class="paragraph">
<p>After logging in, type <code>bash</code> into a terminal to open a new shell. Technically, this shell is a child process of the current shell.</p>
</div>
<div class="paragraph">
<p>While starting the <code>bash</code> child process, we can specify various switches to define which kind of shell we want to start. Here some important <code>bash</code> invocation options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>bash -l</code> or <code>bash --login</code></dt>
<dd>
<p>will invoke a login shell.</p>
</dd>
<dt class="hdlist1"><code>bash -i</code></dt>
<dd>
<p>will invoke an interactive shell.</p>
</dd>
<dt class="hdlist1"><code>bash --noprofile</code></dt>
<dd>
<p>with login shells will ignore both the system-wide startup file <code>/etc/profile</code> and the user-level startup files <code>~/.bash_profile</code>, <code>~/.bash_login</code> and <code>~/.profile</code>.</p>
</dd>
<dt class="hdlist1"><code>bash --norc</code></dt>
<dd>
<p>with interactive shells will ignore both the system-wide startup file <code>/etc/bash.bashrc</code> and the user-level startup file <code>~/.bashrc</code>.</p>
</dd>
<dt class="hdlist1"><code>bash --rcfile &lt;file&gt;</code></dt>
<dd>
<p>with interactive shells will take <code>&lt;file&gt;</code> as the startup file ignoring system wide <code>/etc/bash.bashrc</code> and user-level <code>~/.bashrc</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>We will discus the various startup files below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launching_shells_with_su_and_sudo">Launching Shells with <code>su</code> and <code>sudo</code></h4>
<div class="paragraph">
<p>Through the use of these two similar programs we can obtain specific types of shells:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p>Change user ID or become superuser (<code>root</code>). With this command we can invoke both login and non-login shells:</p>
<div class="ulist">
<ul>
<li>
<p><code>su - user2</code>, <code>su -l user2</code> or <code>su --login user2</code> will start an interactive login shell as <code>user2</code>.</p>
</li>
<li>
<p><code>su user2</code> will start an interactive non-login shell as <code>user2</code>.</p>
</li>
<li>
<p><code>su - root</code> or <code>su -</code> will start an interactive login shell as <code>root</code>.</p>
</li>
<li>
<p><code>su root</code> or <code>su</code> will start an interactive non-login shell as <code>root</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p>Execute commands as another user (including the supersuser). Because this command is mainly used to gain root privileges temporarily, the user using it must be in the <code>sudoers</code> file. To add users to <code>sudoers</code> we need to become <code>root</code> and then run:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>usermod -aG sudo user2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Just as <code>su</code>, <code>sudo</code> allows us to invoke both login and non-login shells:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sudo su - user2</code>, <code>sudo su -l user2</code> or <code>sudo su --login user2</code> will start an interactive login shell as <code>user2</code>.</p>
</li>
<li>
<p><code>sudo su user2</code> will start an interactive non-login shell as <code>user2</code>.</p>
</li>
<li>
<p><code>sudo -u user2 -s</code> will start an interactive non-login shell as <code>user2</code>.</p>
</li>
<li>
<p><code>sudo su - root</code> or <code>sudo su -</code> will start an interactive login shell as <code>root</code>.</p>
</li>
<li>
<p><code>sudo -i</code> will start an interactive login shell as <code>root</code>.</p>
</li>
<li>
<p><code>sudo -i &lt;some_command&gt;</code> will start an interactive login shell as <code>root</code>, run the command and return to the original user.</p>
</li>
<li>
<p><code>sudo su root</code> or <code>sudo su</code> will start an interactive non-login shell as <code>root</code>.</p>
</li>
<li>
<p><code>sudo -s</code> or <code>sudo -u root -s</code> will start a non-login shell as <code>root</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>When using either <code>su</code> or <code>sudo</code>, it is important to consider our particular case scenario for starting a new shell: Do we need the target user&#8217;s environment or not? If so, we would use the options which invoke login shells; if not, those which invoke non-login shells.</p>
</div>
</div>
<div class="sect3">
<h4 id="_what_shell_type_do_we_have">What Shell Type Do We Have?</h4>
<div class="paragraph">
<p>In order to find out what type of shell we are working at, we can type <code>echo $0</code> into the terminal and get the following output:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Interactive login</dt>
<dd>
<p><code>-bash</code> or <code>-su</code></p>
</dd>
<dt class="hdlist1">Interactive non-login</dt>
<dd>
<p><code>bash</code> or <code>/bin/bash</code></p>
</dd>
<dt class="hdlist1">Non-interactive non-login (scripts)</dt>
<dd>
<p><code>&lt;name_of_script&gt;</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_how_many_shells_do_we_have">How Many Shells Do We Have?</h4>
<div class="paragraph">
<p>To see how many <code>bash</code> shells we have up and running in the system, we can use the command <code>ps aux | grep bash</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>ps aux | grep bash</strong>
user2       5270  0.1  0.1  25532  5664 pts/0    Ss   23:03   0:00 bash
user2       5411  0.3  0.1  25608  5268 tty1     S+   23:03   0:00 -bash
user2       5452  0.0  0.0  16760   940 pts/0    S+   23:04   0:00 grep --color=auto bash</pre>
</div>
</div>
<div class="paragraph">
<p><code>user2</code> at <code>debian</code> has logged into a GUI (or X Window System) session and opened <em>gnome-terminal</em>, then she has pressed <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span> to go into a <code>tty</code> terminal session. Finally, she has gone back to the GUI session by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F7</kbd></span> and typed in the command <code>ps aux | grep bash</code>. Thus, the output shows an interactive non-login shell via the terminal emulator (<code>pts/0</code>) and an interactive login shell via the proper text-based terminal (<code>tty1</code>). Note also how the last field of each line (the command) is <code>bash</code> for the former and <code>-bash</code> for the latter.</p>
</div>
</div>
<div class="sect3">
<h4 id="sec.105.1.01-IN-StartUpFiles">Where Shells Get their Configuration From: Startup Files</h4>
<div class="paragraph">
<p>Well, now that we know the shell types that we can find in a Linux system, it is high time that we saw what startup files get executed by what shell. Note that system wide or global scripts are placed in the <code>/etc/</code> directory, whereas local or user-level ones are found in the user&#8217;s home (<code>~</code>). Also, when there is more than one file to be searched, once one is found and run the others are ignored. Explore and study these files yourself with your favorite text editor or by typing <code>less &lt;startup_file&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Startup files can be divided into Bash specific (those limited only to <code>bash</code> configurations and commands) and general ones (relating to most shells).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_interactive_login_shell">Interactive Login Shell</h5>
<div class="sect5">
<h6 id="_global_level">Global Level</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>/etc/profile</code></dt>
<dd>
<p>This is the system-wide <code>.profile</code> file for the Bourne shell and Bourne compatible shells (<code>bash</code> included). Through a series of <code>if</code> statements this file sets a number of variables such as <code>PATH</code> and <code>PS1</code> accordingly as well as sourcing&#8201;&#8212;&#8201;if they exist&#8201;&#8212;&#8201;both the file <code>/etc/bash.bashrc</code> and those in the directory <code>/etc/profile.d</code>.</p>
</dd>
<dt class="hdlist1"><code>/etc/profile.d/*</code></dt>
<dd>
<p>This directory may contain scripts that get executed by <code>/etc/profile</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_local_level">Local Level</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>~/.bash_profile</code></dt>
<dd>
<p>This Bash specific file is used for configuring the user environment. It can also be used to source both <code>~/.bash_login</code> and <code>~/.profile</code>.</p>
</dd>
<dt class="hdlist1"><code>~/.bash_login</code></dt>
<dd>
<p>Also Bash specific, this file will only be executed if there is no <code>~/.bash_profile</code> file. Its name suggests that it should be used to run commands needed on login.</p>
</dd>
<dt class="hdlist1"><code>~/.profile</code></dt>
<dd>
<p>This file is not Bash specific and gets sourced only if neither <code>~/.bash_profile</code> nor <code>~/.bash_login</code> exist&#8201;&#8212;&#8201;which is normally the case. Thus, the main purpose of <code>~/.profile</code> is that of checking if a Bash shell is being run and&#8201;&#8212;&#8201;if so&#8201;&#8212;&#8201;sourcing <code>~/.bashrc</code> if it exists. It usually sets the variable <code>PATH</code> so that it includes the user&#8217;s private <code>~/bin</code> directory if it exists.</p>
</dd>
<dt class="hdlist1"><code>~/.bash_logout</code></dt>
<dd>
<p>If it exists, this Bash specific file does some clean-up operations when exiting the shell. This can be convenient in such cases as those in remote sessions.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_exploring_interactive_login_shell_configuration_files">Exploring Interactive Login Shell Configuration Files</h6>
<div class="paragraph">
<p>Let us show some of these files in action by modifying <code>/etc/profile</code> and <code>/home/user2/.profile</code>. We will append to each a line reminding us the file being executed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>echo 'echo Hello from /etc/profile' >> /etc/profile</strong>
root@debian:~# <strong>echo 'echo Hello from ~/.profile' >> ~/.profile</strong></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Two redirection operators <code>&gt;&gt;</code> append the output of a command into an existing file&#8201;&#8212;&#8201;not overwriting it. If the file does not exist, though, it will be created.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Thus, through the output of their respective <code>echo</code> commands we will know when each of these files is read and executed. To prove it, let us see what happens when <code>user2</code> logs in via <code>ssh</code> from another machine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>ssh user2@192.168.1.6</strong>
user2@192.168.1.6's password:
Linux debian 4.9.0-8-amd64 #1 SMP Debian 4.9.130-2 (2018-10-27) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Tue Nov 27 19:57:19 2018 from 192.168.1.10
Hello from /etc/profile
Hello from /home/user2/.profile</pre>
</div>
</div>
<div class="paragraph">
<p>As the last two lines show, it worked. Also, note three things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The global file was run first.</p>
</li>
<li>
<p>There were no <code>.bash_profile</code> or <code>.bash_login</code> files in he home directory of <code>user2</code>.</p>
</li>
<li>
<p>The tilde (<code>~</code>) expanded to the absolute path of the file (<code>/home/user2/.profile</code>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_interactive_non_login_shell">Interactive Non-Login Shell</h5>
<div class="sect5">
<h6 id="_global_level_2">Global Level</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>/etc/bash.bashrc</code></dt>
<dd>
<p>This is the system-wide <code>.bashrc</code> file for interactive <code>bash</code> shells. Through its execution <code>bash</code> makes sure it is being run interactively, checks the window size after each command (updating the values of <code>LINES</code> and <code>COLUMNS</code> if necessary) and sets some variables.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_local_level_2">Local Level</h6>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>~/.bashrc</code></dt>
<dd>
<p>In addition to carrying out similar tasks to those described for <code>/etc/bash.bashrc</code> at a user level (such as checking the window size or if being run interactively), this Bash specific file usually sets some history variables and sources <code>~/.bash_aliases</code> if it exists. Apart from that, this file is normally used to store users' specific aliases and functions.</p>
<div class="paragraph">
<p>Likewise, it is also worthwhile noting that <code>~/.bashrc</code> is read if <code>bash</code> detects its <code>&lt;stdin&gt;</code> is a network connection (as it was the case with the <em>Secure Shell</em> (SSH) connection in the example above).</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_exploring_interactive_non_login_shell_configuration_files">Exploring Interactive Non-Login Shell Configuration Files</h6>
<div class="paragraph">
<p>Let us now modify <code>/etc/bash.bashrc</code> and <code>/home/user2/.bashrc</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>echo 'echo Hello from /etc/bash.bashrc' >> /etc/bash.bashrc</strong>
root@debian:~# <strong>echo 'echo Hello from ~/.bashrc' >> ~/.bashrc</strong></pre>
</div>
</div>
<div class="paragraph">
<p>And this is what happens when <code>user2</code> starts a new shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>bash</strong>
Hello from /etc/bash.bashrc
Hello from /home/user2/.bashrc</pre>
</div>
</div>
<div class="paragraph">
<p>Again, the two files were read and executed.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remember, because of the order in which files are run, local files take precedence over global ones.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_non_interactive_login_shell">Non-Interactive Login Shell</h5>
<div class="paragraph">
<p>A non-interactive shell with the <code>-l</code> or <code>--login</code> options is forced to behave like a login shell and so the startup files to be run will be the same as those for interactive login shells.</p>
</div>
<div class="paragraph">
<p>To prove it, let us write a simple script and make it executable. We will not include any <em>shebangs</em> because we will be invoking the <em>bash executable</em> (<code>/bin/bash</code> with the login option) from the command line.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We create the script <code>test.sh</code> containing the line <code>echo 'Hello from a script'</code> so that we can prove the script runs successfully:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>echo "echo 'Hello from a script'" > test.sh</strong></pre>
</div>
</div>
</li>
<li>
<p>We make our script executable:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>chmod +x ./test.sh</strong></pre>
</div>
</div>
</li>
<li>
<p>Finally, we invoke <code>bash</code> with the <code>-l</code> option to run the script:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>bash -l ./test.sh</strong>
Hello from /etc/profile
Hello from /home/user2/.profile
Hello from a script</pre>
</div>
</div>
<div class="paragraph">
<p>It works! Before running the script, the login took place and both <code>/etc/profile</code> and <code>~/.profile</code> were executed.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>We will learn about <em>shebangs</em> and all other aspects of shell scripting in future lessons.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let us now have the standard output (<em>stdout</em>) of the <code>echo</code> command into the standard input (<em>stdin</em>) of an <code>ssh</code> connection by means of a pipe (<code>|</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>echo "Hello-from-a-noninteractive-login-shell" | ssh user2@192.168.1.6</strong>
Pseudo-terminal will not be allocated because stdin is not a terminal.
user2@192.168.1.6's password:
Linux debian 4.9.0-8-amd64 #1 SMP Debian 4.9.130-2 (2018-10-27) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Hello from /etc/profile
Hello from /home/user2/.profile
-bash: line 1: Hello-from-a-noninteractive-login-shell: command not found</pre>
</div>
</div>
<div class="paragraph">
<p>Again, <code>/etc/profile</code> and <code>~/.profile</code> are executed. Other than that, the first and last lines of the output are quite telling as far as the behaviour of the shell is concerned.</p>
</div>
</div>
<div class="sect4">
<h5 id="_non_interactive_non_login_shell">Non-Interactive Non-Login Shell</h5>
<div class="paragraph">
<p>Scripts do not read any of the files listed above but look for the environment variable <code>BASH_ENV</code>, expand its value if needed and use it as the name of a startup file to read and execute commands. We will learn more about <em>environment variables</em> in the next lesson.</p>
</div>
<div class="paragraph">
<p>As mentioned above, typically <code>/etc/profile</code> and <code>~/.profile</code> make sure that both <code>/etc/bash.bashrc</code> and <code>~/.bashrc</code> get executed after a successful login. The output of the following command shows this phenomenon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>su - user2</strong>
Hello from /etc/bash.bashrc
Hello from /etc/profile
Hello from /home/user2/.bashrc
Hello from /home/user2/.profile</pre>
</div>
</div>
<div class="paragraph">
<p>Bearing in mind the lines we previously appended to the startup scripts&#8201;&#8212;&#8201;and invoking an interactive-login shell at user-level with <code>su - user2</code>&#8201;&#8212;&#8201;the four lines of output can be explained as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Hello from /etc/bash.bashrc</code> means <code>/etc/profile</code> has sourced <code>/etc/bash.bashrc</code>.</p>
</li>
<li>
<p><code>Hello from /etc/profile</code> means <code>/etc/profile</code> has been fully read and executed.</p>
</li>
<li>
<p><code>Hello from /home/user2/.bashrc</code> means <code>~/.profile</code> has sourced <code>~/.bashrc</code>.</p>
</li>
<li>
<p><code>Hello from /home/user2/.profile</code> means <code>~/.profile</code> has been fully read and executed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note how with <code>su - &lt;username&gt;</code> (also <code>su -l &lt;username&gt;</code> and <code>su --login &lt;username&gt;</code>) we guarantee the invocation of a login shell, whereas <code>su &lt;username&gt;</code> would have only invoked <code>/etc/bash.bashrc</code> and <code>~/.bashrc</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sourcing_files">Sourcing Files</h4>
<div class="paragraph">
<p>In the previous sections we have discussed that some startup scripts include or execute other scripts. This mechanism is called sourcing and is explained in this section.</p>
</div>
<div class="sect4">
<h5 id="_sourcing_files_with">Sourcing Files with <code>.</code></h5>
<div class="paragraph">
<p>The dot (<code>.</code>) is normally found in startup files.</p>
</div>
<div class="paragraph">
<p>In the <code>.profile</code> file of our Debian server we can find&#8201;&#8212;&#8201;for instance&#8201;&#8212;&#8201;the following block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    # include .bashrc if it exists
    if [ -f "$HOME/.bashrc" ]; then
	. "$HOME/.bashrc"
    fi</pre>
</div>
</div>
<div class="paragraph">
<p>We already saw how the execution of a script may lead to that of another. Thus, the <code>if</code> statement guarantees that the file <code>$HOME/.bashrc</code>&#8201;&#8212;&#8201;if it exists (<code>-f</code>)&#8201;&#8212;&#8201;will be sourced (i.e. read and executed) at login:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. "$HOME/.bashrc"</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>As we will learn in the next lesson, <code>$HOME</code> is an environment variable that expands to the absolute path of the user&#8217;s home directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Furthermore, we can use the <code>.</code> whenever we have modified a startup file and want to make the changes effective without a reboot. For example we can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add an alias to <code>~/.bashrc</code>:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>echo "alias hi='echo We salute you.'" >> ~/.bashrc</strong></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>When sending the output of one command into a file, remember not to mistake append (<code>&gt;&gt;</code>) with overwrite (<code>&gt;</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>output the last line of <code>~/.bashrc</code> to check everything went fine:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>tail -n 1 !$</strong>
tail -n 1 ~/.bashrc
alias hi='echo We salute you.'</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>!$</code> expands to the last argument from the previous command, in our case: <code>~/.bashrc</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>source the file by hand:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>. ~/.bashrc</strong></pre>
</div>
</div>
</li>
<li>
<p>and invoke the alias to prove it works:</p>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>hi</strong>
We salute you.</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Refer to the next lesson to learn about <em>aliases</em> and <em>variables</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_sourcing_files_with_source">Sourcing Files with <code>source</code></h5>
<div class="paragraph">
<p>The <code>source</code> command is a synonym for <code>.</code>. So to source <code>~/.bashrc</code> we can also do it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>source ~/.bashrc</strong></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_origin_of_shell_startup_files_skel">The Origin of Shell Startup Files: <code>SKEL</code></h4>
<div class="paragraph">
<p><code>SKEL</code> is a variable whose value is the absolute path to the <code>skel</code> directory. This directory serves as a template for the file system structure of users' home directories. It includes the files that will be inherited by any new user accounts created (including, of course, the configuration files for shells). <code>SKEL</code> and other related variables are stored in <code>/etc/adduser.conf</code>, which is the configuration file for <code>adduser</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>grep SKEL /etc/adduser.conf</strong>
# The SKEL variable specifies the directory containing "skeletal" user
SKEL=/etc/skel
# If SKEL_IGNORE_REGEX is set, adduser will ignore files matching this
SKEL_IGNORE_REGEX="dpkg-(old|new|dist|save)"</pre>
</div>
</div>
<div class="paragraph">
<p><code>SKEL</code> is set to <code>/etc/skel</code>; thus, the startup scripts that configure our shells lie therein:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user2@debian:~$ <strong>ls -a /etc/skel/</strong>
.  ..  .bash_logout  .bashrc  .profile</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remember, files starting with a <code>.</code> are hidden, so we must use <code>ls -a</code> to see them when listing directory contents.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let us now create a directory in <code>/etc/skel</code> for all new users to store their personal scripts in:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As <code>root</code> we move into <code>/etc/skel</code>:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>cd /etc/skel/</strong>
root@debian:/etc/skel#</pre>
</div>
</div>
</li>
<li>
<p>We list its contents:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:/etc/skel# <strong>ls -a</strong>
.  ..  .bash_logout  .bashrc  .profile</pre>
</div>
</div>
</li>
<li>
<p>We create our directory and check all went as expected:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:/etc/skel# <strong>mkdir my_personal_scripts</strong>
root@debian:/etc/skel# <strong>ls -a</strong>
.  ..  .bash_logout  .bashrc  my_personal_scripts  .profile</pre>
</div>
</div>
</li>
<li>
<p>Now we delete <code>user2</code> together with its <code>home</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>deluser --remove-home user2</strong>
Looking for files to backup/remove ...
Removing files ...
Removing user `user2' ...
Warning: group `user2' has no more members.
Done.</pre>
</div>
</div>
</li>
<li>
<p>We add <code>user2</code> again so that it gets a new home directory:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>adduser user2</strong>
Adding user `user2' ...
Adding new group `user2' (1001) ...
Adding new user `user2' (1001) with group `user2' ...
Creating home directory `/home/user2' ...
Copying files from `/etc/skel' ...
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
Changing the user information for user2
Enter the new value, or press ENTER for the default
	Full Name []:
	Room Number []:
	Work Phone []:
	Home Phone []:
	Other []:
Is the information correct? [Y/n] y</pre>
</div>
</div>
</li>
<li>
<p>Finallly, we login as <code>user2</code> and list all the files in <code>/home/user2</code> to see if everything went as expected:</p>
<div class="listingblock">
<div class="content">
<pre>root@debian:~# <strong>su - user2</strong>
user2@debian:~$ <strong>pwd</strong>
/home/user2
user2@debian:~$ <strong>ls -a</strong>
.  ..  .bash_history  .bash_logout  .bashrc  my_personal_scripts  .profile</pre>
</div>
</div>
<div class="paragraph">
<p>It did.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Study how the shells have been started under the column &#8220;Shell Started with&#8230;&#8203;&#8221; and complete with the required information:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shell Started with&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Interactive?</th>
<th class="tableblock halign-left valign-top">Login?</th>
<th class="tableblock halign-left valign-top">Result of <code>echo $0</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sudo ssh user2@machine2</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F2</kbd></span></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>su - user2</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>gnome-terminal</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regular user uses <em>konsole</em> to start an instance of <em>sakura</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A script named <code>test.sh</code> containing the command <code>echo $0</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Write the <code>su</code> and <code>sudo</code> commands to launch the specified shell:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Interactive-login shell as <code>user2</code></dt>
<dd>
<p><code>su</code>:</p>
<div class="paragraph">
<p><code>sudo</code>:</p>
</div>
</dd>
<dt class="hdlist1">Interactive login shell as <code>root</code></dt>
<dd>
<p><code>su</code>:</p>
<div class="paragraph">
<p><code>sudo</code>:</p>
</div>
</dd>
<dt class="hdlist1">Interactive non-login shell as <code>root</code></dt>
<dd>
<p><code>su</code>:</p>
<div class="paragraph">
<p><code>sudo</code>:</p>
</div>
</dd>
<dt class="hdlist1">Interactive non-login shell as <code>user2</code></dt>
<dd>
<p><code>su</code>:</p>
<div class="paragraph">
<p><code>sudo</code>:</p>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>What startup file gets read when the shell under &#8220;Shell Type&#8221; is started?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shell Type</th>
<th class="tableblock halign-left valign-top"><code>/etc/profile</code></th>
<th class="tableblock halign-left valign-top"><code>/etc/bash.bashrc</code></th>
<th class="tableblock halign-left valign-top"><code>~/.profile</code></th>
<th class="tableblock halign-left valign-top"><code>~/.bashrc</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive-login shell as <code>user2</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive login shell as <code>root</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive non-login shell as <code>root</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive non-login shell as <code>user2</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Bash we can write a simple <code>Hello world!</code> function by including the following code in an empty file:</p>
<div class="listingblock">
<div class="content">
<pre>function hello() {
	 echo "Hello world!"
}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What should we do next to make the function available to the shell?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Once it is available to the current shell, how would you invoke it?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>To automate things, in what file would you put the function and its invocation so that it gets executed when <code>user2</code> opens a terminal from an X Window session? What type of shell is it?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>In what file would you put the function and its invocation so that it is run when <code>root</code> launches a new interactive shell irrespective of whether it is login or not?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Have a look at the following basic, <code>Hello world!</code> <code>bash</code> script:</p>
<div class="listingblock">
<div class="content">
<pre>#!/bin/bash

#hello_world: a simple bash script to discuss interaction in scripts.

echo "Hello world!"</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Suppose we make the script executable and run it. Would that be an interactive script? Why?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What makes a script interactive?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Imagine you have changed the values of some variables in <code>~/.bashrc</code> and want those changes to take effect without a reboot. From your home directory, how could you achieve that in two different ways?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>John has just started an X Window session on a Linux server. He opens a terminal emulator to carry out some administrative tasks but, surprisingly, the session freezes and he needs to open a text shell.</p>
<div class="ulist">
<ul>
<li>
<p>How can he open that <code>tty</code> shell?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What startup files will get sourced?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Linda is a user of a Linux server. She kindly asks the administrator to have a <code>~/.bash_login</code> file so she can have the time and date printed on the screen when she logs in. Other users like the idea and follow suit. The administrator has a hard time creating the file for all other 5 users on the server so he decides to add a new policy and have <code>~/.bash_login</code> created for all potential new users. How can the administrator accomplish that task?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson we learned:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Shells set users' environment in a Linux system.</p>
</li>
<li>
<p><em>Bash</em> is the number one shell across GNU/Linux distributions.</p>
</li>
<li>
<p>The first job a shell carries out is that of reading and executing one or various startup files.</p>
</li>
<li>
<p>The concepts of <em>interaction</em> and <em>login</em> as related to shells.</p>
</li>
<li>
<p>How to launch different types of shells with <code>bash</code>, <code>su</code>, <code>sudo</code> and <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span>-<kbd>F6</kbd>.</p>
</li>
<li>
<p>How to check the type of shell with <code>echo $0</code>.</p>
</li>
<li>
<p>The local startup files <code>~/.bash_profile</code>, <code>~/.profile</code>, <code>~/.bash_login</code>, <code>~/.bash_logout</code> and <code>~/.bashrc</code>.</p>
</li>
<li>
<p>The global startup files <code>/etc/profile</code>, <code>/etc/profile.d/*</code>, <code>/etc/bash.bashrc</code>.</p>
</li>
<li>
<p>Local files take precedence over global ones.</p>
</li>
<li>
<p>How to redirect the output of a command with <code>&gt;</code> (overwrite) and <code>&gt;&gt;</code> (append).</p>
</li>
<li>
<p>The meaning of the <code>skel</code> directory.</p>
</li>
<li>
<p>How to source files.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Commands used in this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>bash</code></dt>
<dd>
<p>Create a new shell.</p>
</dd>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p>Create a new shell.</p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p>Create a new shell.</p>
</dd>
<dt class="hdlist1"><code>usermod</code></dt>
<dd>
<p>Modify a user account.</p>
</dd>
<dt class="hdlist1"><code>echo</code></dt>
<dd>
<p>Display a line of text.</p>
</dd>
<dt class="hdlist1"><code>ps</code></dt>
<dd>
<p>Report a snapshot of the current processes.</p>
</dd>
<dt class="hdlist1"><code>less</code></dt>
<dd>
<p>A pager for long files.</p>
</dd>
<dt class="hdlist1"><code>ssh</code></dt>
<dd>
<p>Start an Open SSH connection (remotely).</p>
</dd>
<dt class="hdlist1"><code>chmod</code></dt>
<dd>
<p>Change mode bits of a file, for example make it executable.</p>
</dd>
<dt class="hdlist1"><code>grep</code></dt>
<dd>
<p>Print lines matching a pattern.</p>
</dd>
<dt class="hdlist1"><code>ls</code></dt>
<dd>
<p>List directory contents.</p>
</dd>
<dt class="hdlist1"><code>cd</code></dt>
<dd>
<p>Change directory.</p>
</dd>
<dt class="hdlist1"><code>mkdir</code></dt>
<dd>
<p>Make directory.</p>
</dd>
<dt class="hdlist1"><code>deluser</code></dt>
<dd>
<p>Delete user.</p>
</dd>
<dt class="hdlist1"><code>adduser</code></dt>
<dd>
<p>Add a new user.</p>
</dd>
<dt class="hdlist1"><code>.</code></dt>
<dd>
<p>Source a file.</p>
</dd>
<dt class="hdlist1"><code>source</code></dt>
<dd>
<p>Source a file.</p>
</dd>
<dt class="hdlist1"><code>tail</code></dt>
<dd>
<p>Output the last part of files.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Study how the shells have been started under the column &#8220;Shell Started with&#8230;&#8203;&#8221; and complete with the required information:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shell Started with&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Interactive?</th>
<th class="tableblock halign-left valign-top">Login?</th>
<th class="tableblock halign-left valign-top">Result of <code>echo $0</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sudo ssh user2@machine2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-bash</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F2</kbd></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-bash</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>su - user2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-su</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>gnome-terminal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bash</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regular user uses <em>konsole</em> to start an instance of <em>sakura</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/bin/bash</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A script named <code>test.sh</code> containing the command <code>echo $0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./test.sh</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Write the <code>su</code> and <code>sudo</code> commands to launch the specified shell:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Interactive-login shell as <code>user2</code></dt>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p><code>su - user2</code>, <code>su -l user2</code> or <code>su --login user2</code></p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p><code>sudo su - user2</code>, <code>sudo su -l user2</code> or <code>sudo su --login user2</code></p>
</dd>
<dt class="hdlist1">Interactive login shell as <code>root</code></dt>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p><code>su - root</code> or <code>su -</code></p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p><code>sudo su - root</code>, <code>sudo su -</code> or <code>sudo -i</code></p>
</dd>
<dt class="hdlist1">Interactive non-login shell as <code>root</code></dt>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p><code>su root</code> or <code>su</code></p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p><code>sudo su root</code>, <code>sudo su</code>, <code>sudo -s</code> or <code>sudo -u root -s</code></p>
</dd>
<dt class="hdlist1">Interactive non-login shell as <code>user2</code></dt>
<dt class="hdlist1"><code>su</code></dt>
<dd>
<p><code>su user2</code></p>
</dd>
<dt class="hdlist1"><code>sudo</code></dt>
<dd>
<p><code>sudo su user2</code> or <code>sudo -u user2 -s</code></p>
</dd>
</dl>
</div>
</li>
<li>
<p>What startup file gets read when the shell under &#8220;Shell Type&#8221; is started?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shell Type</th>
<th class="tableblock halign-left valign-top"><code>/etc/profile</code></th>
<th class="tableblock halign-left valign-top"><code>/etc/bash.bashrc</code></th>
<th class="tableblock halign-left valign-top"><code>~/.profile</code></th>
<th class="tableblock halign-left valign-top"><code>~/.bashrc</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive-login shell as <code>user2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive login shell as <code>root</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive non-login shell as <code>root</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interactive non-login shell as <code>user2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.105.1_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Bash we can write a simple <code>Hello world!</code> function by including the following code in an empty file:</p>
<div class="listingblock">
<div class="content">
<pre>function hello() {
	 echo "Hello world!"
}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What should we do next to make the function available to the shell?</p>
<div class="paragraph">
<p>To make the function availabe to the current shell, we must source the file which includes it.</p>
</div>
</li>
<li>
<p>Once it is available to the current shell, how would you invoke it?</p>
<div class="paragraph">
<p>We will invoke it by typing its name into the terminal.</p>
</div>
</li>
<li>
<p>To automate things, in what file would you put the function and its invocation so that it gets executed when <code>user2</code> opens a terminal from an X Window session? What type of shell is it?</p>
<div class="paragraph">
<p>The best file to put it is <code>/home/user2/.bashrc</code>. The invoked shell would be an interactive non-login one.</p>
</div>
</li>
<li>
<p>In what file would you put the function and its invocation so that it is run when <code>root</code> launches a new interactive shell irrespective of whether it is login or not?</p>
<div class="paragraph">
<p>In <code>/etc/bash.bashrc</code> since this file gets executed for all interactive shells&#8201;&#8212;&#8201;whether login or not.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Have a look at the following basic, <code>Hello world!</code> <code>bash</code> script:</p>
<div class="listingblock">
<div class="content">
<pre>#!/bin/bash

#hello_world: a simple bash script to discuss interaction in scripts.

echo "Hello world!"</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Suppose we make the script executable and run it. Would that be an interactive script? Why?</p>
<div class="paragraph">
<p>No, as there is no human interaction and no commands being typed in by the user.</p>
</div>
</li>
<li>
<p>What makes a script interactive?</p>
<div class="paragraph">
<p>The fact that it requires user input.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Imagine you have changed the values of some variables in <code>~/.bashrc</code> and want those changes to take effect without a reboot. From your home directory, how could you achieve that in two different ways?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>source .bashrc</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>. .bashrc</strong></pre>
</div>
</div>
</li>
<li>
<p>John has just started an X Window session on a Linux server. He opens a terminal emulator to carry out some administrative tasks but, surprisingly, the session freezes and he needs to open a text shell.</p>
<div class="ulist">
<ul>
<li>
<p>How can he open that <code>tty</code> shell?</p>
<div class="paragraph">
<p>He could do that by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd></span>-<kbd>F6</kbd> to enter one of the six tty shells.</p>
</div>
</li>
<li>
<p>What startup files will get sourced?</p>
<div class="paragraph">
<p><code>/etc/profile</code><br>
<code>/home/john/.profile</code></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Linda is a user of a Linux server. She kindly asks the administrator to have a <code>~/.bash_login</code> file so she can have the time and date printed on the screen when she logs in. Other users like the idea and follow suit. The administrator has a hard time creating the file for all other 5 users on the server so he decides to add a new policy and have <code>~/.bash_login</code> created for all potential new users. How can the administrator accomplish that task?</p>
<div class="paragraph">
<p>He could achieve that by putting <code>.bash_login</code> into the <code>/etc/skel</code> directory.</p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">105.1 Customize and use the shell environment (105.1 Lesson 2)</p>

        <div class="button-group">
            <a href="../105.1_02/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
