

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>108.4 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">108.4 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 105: Shells and Shell Scripting
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../105/105.1/index.html" class="hierarchy__link">105.1 Customize and use the shell environment</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_01/index.html" class="hierarchy__link">105.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_02/index.html" class="hierarchy__link">105.1 Lesson 2</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_03/index.html" class="hierarchy__link">105.1 Lesson 3</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../105/105.2/index.html" class="hierarchy__link">105.2 Customize or write simple scripts</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_01/index.html" class="hierarchy__link">105.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_02/index.html" class="hierarchy__link">105.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 106: User Interfaces and Desktops
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../106/106.1/index.html" class="hierarchy__link">106.1 Install and configure X11</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.1/106.1_01/index.html" class="hierarchy__link">106.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.2/index.html" class="hierarchy__link">106.2 Graphical Desktops</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.2/106.2_01/index.html" class="hierarchy__link">106.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.3/index.html" class="hierarchy__link">106.3 Accessibility</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.3/106.3_01/index.html" class="hierarchy__link">106.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 107: Administrative Tasks
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../107/107.1/index.html" class="hierarchy__link">107.1 Manage user and group accounts and related system files</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_01/index.html" class="hierarchy__link">107.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_02/index.html" class="hierarchy__link">107.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.2/index.html" class="hierarchy__link">107.2 Automate system administration tasks by scheduling jobs</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_01/index.html" class="hierarchy__link">107.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_02/index.html" class="hierarchy__link">107.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.3/index.html" class="hierarchy__link">107.3 Localisation and internationalisation</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.3/107.3_01/index.html" class="hierarchy__link">107.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 108: Essential System Services
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../108.1/index.html" class="hierarchy__link">108.1 Maintain system time</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.1/108.1_01/index.html" class="hierarchy__link">108.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../108.1/108.1_02/index.html" class="hierarchy__link">108.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../108.2/index.html" class="hierarchy__link">108.2 System logging</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.2/108.2_01/index.html" class="hierarchy__link">108.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../108.2/108.2_02/index.html" class="hierarchy__link">108.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../108.3/index.html" class="hierarchy__link">108.3 Mail Transfer Agent (MTA) basics</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.3/108.3_01/index.html" class="hierarchy__link">108.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">108.4 Manage printers and printing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">108.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 109: Networking Fundamentals
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../109/109.1/index.html" class="hierarchy__link">109.1 Fundamentals of internet protocols</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_01/index.html" class="hierarchy__link">109.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_02/index.html" class="hierarchy__link">109.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.2/index.html" class="hierarchy__link">109.2 Persistent network configuration</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_01/index.html" class="hierarchy__link">109.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_02/index.html" class="hierarchy__link">109.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.3/index.html" class="hierarchy__link">109.3 Basic network troubleshooting</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_01/index.html" class="hierarchy__link">109.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_02/index.html" class="hierarchy__link">109.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.4/index.html" class="hierarchy__link">109.4 Configure client side DNS</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.4/109.4_01/index.html" class="hierarchy__link">109.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 110: Security
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../110/110.1/index.html" class="hierarchy__link">110.1 Perform security administration tasks</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.1/110.1_01/index.html" class="hierarchy__link">110.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.2/index.html" class="hierarchy__link">110.2 Setup host security</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.2/110.2_01/index.html" class="hierarchy__link">110.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.3/index.html" class="hierarchy__link">110.3 Securing data with encryption</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_01/index.html" class="hierarchy__link">110.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_02/index.html" class="hierarchy__link">110.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 108: Essential System Services</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">108.4 Manage printers and printing</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">108.4 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>108.4 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">108 Essential System Services</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">108.4 Manage printers and printing</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Declarations of a &#8220;paperless society&#8221; brought on by the advent of computers have, up to current times, proven to be false. Many organizations still rely on printed, or &#8220;hard copy&#8221;, pages of information.  With this in mind we can see how important it is for a computer user to know how to print from a system as well as an administrator needing to know how to maintain a computer&#8217;s ability to work with printers.</p>
</div>
<div class="paragraph">
<p>On Linux, as well as many other operating systems, the <em>Common Unix Printing System</em> (CUPS) software stack allows for printing and printer management from a computer. Here is a very simplified outline of how a file is printed in Linux using CUPS:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A user submits a file to be printed.</p>
</li>
<li>
<p>The CUPS daemon, <code>cupsd</code>, then <em>spools</em> the print job. This print job is given a job number by CUPS, along with information about which print queue holds the job as well as the name of the document to print.</p>
</li>
<li>
<p>CUPS utilizes <em>filters</em> that are installed on the system to generate a formatted file that the printer can use.</p>
</li>
<li>
<p>CUPS then sends the re-formatted file to the printer for printing.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We will look at these steps in more detail, as well as how to install and manage a printer in Linux.</p>
</div>
<div class="sect2">
<h3 id="_the_cups_service">The CUPS Service</h3>
<div class="paragraph">
<p>Most Linux desktop installations will have the CUPS packages already installed.  On minimal Linux installations the CUPS packages may not be installed, depending on the distribution.  A basic CUPS installation can be performed on a Debian system with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo apt install cups</strong></pre>
</div>
</div>
<div class="paragraph">
<p>On Fedora systems the installation process is just as easy.  You will need to start the CUPS service manually after installation on Fedora and other Red Hat-based distributions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo dnf install cups</strong>
...
$ <strong>sudo systemctl start cups.service</strong></pre>
</div>
</div>
<div class="paragraph">
<p>After the installation has completed, you can verify that the CUPS service is running with the use of the <code>systemctl</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>systemctl status cups.service</strong>
● cups.service - CUPS Scheduler
   Loaded: loaded (/lib/systemd/system/cups.service; enabled; vendor preset: enabled)
   Active: active (running) since Thu 2020-06-25 14:35:47 EDT; 41min ago
     Docs: man:cupsd(8)
 Main PID: 3136 (cupsd)
    Tasks: 2 (limit: 1119)
   Memory: 3.2M
   CGroup: /system.slice/cups.service
           ├─3136 /usr/sbin/cupsd -l
           └─3175 /usr/lib/cups/notifier/dbus dbus://</pre>
</div>
</div>
<div class="paragraph">
<p>As with many other Linux daemons, CUPS relies on a set of configuration files for its operations.  Listed below are the main ones that are of interest to the system administrator:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>/etc/cups/cupsd.conf</code></dt>
<dd>
<p>This file contains the configuration settings for the CUPS service itself.  If you are at all familiar with the Apache web server configuration file then the CUPS configuration file will look quite similar to you as it uses a very similar syntax.  The <code>cupsd.conf</code> file contains settings for things such as controlling access to the various print queues in use on the system, if whether or not the CUPS web interface is enabled, as well as the level of logging that the daemon will use.</p>
</dd>
<dt class="hdlist1"><code>/etc/printcap</code></dt>
<dd>
<p>This is the legacy file that was used by the LPD (<em>Line Printer Daemon</em>) protocol before the advent of CUPS.  CUPS will still create this file on systems for backwards compatibility and it is often-times a symbolic link to <code>/run/cups/printcap</code>.  Each line in this file contains a printer that the system has access to.</p>
</dd>
<dt class="hdlist1"><code>/etc/cups/printers.conf</code></dt>
<dd>
<p>This file contains each printer that is configured to be used by the CUPS system.  Each printer and its associated print queue in this file is enclosed within a <code>&lt;Printer&gt;&lt;/Printer&gt;</code> stanza.  This file provides the individual printer listings found within <code>/etc/printcap</code>.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>No modifications to the <code>/etc/cups/printers.conf</code> file should be made at the command line while the CUPS service is running.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>/etc/cups/ppd/</code></dt>
<dd>
<p>This is not a configuration file but a directory that holds the <em>PostScript Printer Description</em> (PPD) files for the printers that use them.  Each printer&#8217;s operating capabilities will be stored within a PPD file (ending in the <code>.ppd</code> extension).  These are plain-text files and follow a specific format.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The CUPS service also utilizes logging in much the same manner as the Apache 2 service.  The logs are stored within <code>/var/log/cups/</code> and contain an <code>access_log</code>, <code>page_log</code>, and an <code>error_log</code>.  The <code>access_log</code> keeps a record of access to the CUPS web interface as well as actions taken within it, such as printer management.  The <code>page_log</code> keeps track of print jobs that have been submitted to the print queues managed by the CUPS installation.  The <code>error_log</code> will contain messages about print jobs that have failed and other errors recorded by the web interface.</p>
</div>
<div class="paragraph">
<p>We will next look at the tools and utilities that are used to manage the CUPS service.</p>
</div>
<div class="sect3">
<h4 id="_using_the_web_interface">Using the Web Interface</h4>
<div class="paragraph">
<p>As stated earlier, the <code>/etc/cups/cupsd.conf</code> configuration file determines if the web interface for the CUPS system is enabled.  The configuration option looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Web interface setting...
WebInterface Yes</pre>
</div>
</div>
<div class="paragraph">
<p>If the web interface is enabled, then CUPS can be managed from a browser at the default URL of <code>http://localhost:631</code>.  By default a user on the system can view printers and print queues but any form of configuration modification requires a user with root access to authenticate with the web service.  The configuration stanza within the <code>/etc/cups/cupsd.conf</code> file for restricting access to administrative capabilities will resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># All administration operations require an administrator to authenticate...
&lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;
  AuthType Default
  Require user @SYSTEM
  Order deny,allow
&lt;/Limit&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Here is a breakdown of these options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AuthType Default</code></dt>
<dd>
<p>will use a basic authentication prompt when an action requires root access.</p>
</dd>
<dt class="hdlist1"><code>Require user @SYSTEM</code></dt>
<dd>
<p>indicates that a user with administrative privileges will be required for the operation.  This could be changed to <code>@groupname</code> where members of <code>groupname</code> can administer the CUPS service or individual users could be provided with a list as in <code>Require user carol, tim</code>.</p>
</dd>
<dt class="hdlist1"><code>Order deny,allow</code></dt>
<dd>
<p>works much like the Apache 2 configuration option where the action is denied by default unless a user (or member of a group) is authenticated.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The web interface for CUPS can be disabled by first stopping the CUPS service, changing the <code>WebInterface</code> option from <code>Yes</code> to <code>No</code>, then restarting the CUPS service.</p>
</div>
<div class="paragraph">
<p>The CUPS web interface is built like a basic web site with navigation tabs for various sections of CUPS system.  The tabs in the web interface include the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Home</dt>
<dd>
<p>The home page will list the current version of CUPS that is installed.  It also breaks down CUPS into sections such as:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">CUPS for Users</dt>
<dd>
<p>Provides a description of CUPS, command-line options for working with printers and print queues, and a link to the CUPS user forum.</p>
</dd>
<dt class="hdlist1">CUPS for Administrators</dt>
<dd>
<p>Provides links in the interface to install and manage printers and links to information about working with printers on a network.</p>
</dd>
<dt class="hdlist1">CUPS for Developers</dt>
<dd>
<p>Provides links to developing for CUPS itself as well as creating PPD files for printers.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Administration</dt>
<dd>
<p>The administration page is also broken down into sections:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Printers</dt>
<dd>
<p>Here an administrator can add new printers to the system, locate printers connected to the system and manage printers that are already installed.</p>
</dd>
<dt class="hdlist1">Classes</dt>
<dd>
<p>Classes are a mechanism where printers can be added to groups with specific policies.  For example, a class can contain a group of printers that belong to a specific floor of a building that only users within a particular department can print to.  Another class can have limitations on how many pages a user can print.  Classes are not created by default on a CUPS installation and have to be defined by an administrator.  This is the section in the CUPS web interface where new classes can be created and managed.</p>
</dd>
<dt class="hdlist1">Jobs</dt>
<dd>
<p>This is where an administrator can view all print jobs that are currently in queue for all printers that this CUPS installation manages.</p>
</dd>
<dt class="hdlist1">Server</dt>
<dd>
<p>This is where an administrator can make changes to the <code>/etc/cups/cupsd.conf</code> file.  Also, further configuration options are available via check boxes such as allowing printers connected to this CUPS installation to be shared on a network, advanced authentication, and allowing remote printer administration.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">Classes</dt>
<dd>
<p>If printer classes are configured on the system they will be listed on this page.  Each printer class will have options to manage all of the printers in the class at once, as well as view all jobs that are in queue for the printers in this class.</p>
</dd>
<dt class="hdlist1">Help</dt>
<dd>
<p>This tab provides links for all of the available documentation for CUPS that is installed on the system.</p>
</dd>
<dt class="hdlist1">Jobs</dt>
<dd>
<p>The Jobs tab allows for the searching of individual print jobs as well as listing out all of the current print jobs managed by the server.</p>
</dd>
<dt class="hdlist1">Printers</dt>
<dd>
<p>The Printers tab lists all of the printers currently managed by the system as well as a quick overview of each printer&#8217;s status.  Each printer listed can be clicked on and the administrator will be taken to the page where the individual printer can be further managed.  The information for the printers on this tab comes from the <code>/etc/cups/printers.conf</code> file.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_a_printer">Installing a Printer</h3>
<div class="paragraph">
<p>Adding a printer queue to the system is a simple process within the CUPS web interface:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the <strong>Administration</strong> tab then the <strong>Add Printer</strong> button.</p>
</li>
<li>
<p>The next page will provide various options depending on how your printer is connected to your system.  If it is a local printer select the most relevant option such as which port the printer is connected to or which third-party printer software may be installed.  CUPS will also try to detect printers that are connected to the network and display those here.  You can also choose a direct connection option to a network printer depending on which network printing protocols the printer supports.  Select your appropriate option and click on the <strong>Continue</strong> button.</p>
</li>
<li>
<p>The next page will allow you to provide a name, description, and location (such as &#8220;back office&#8221; or &#8220;front desk&#8221; etc.) for the printer.  If you wish to share this printer over the network you can select the check box for that option on this page as well.  Once your settings have been entered, click on the <strong>Continue</strong> button.</p>
</li>
<li>
<p>The next page is where the printer&#8217;s make and model can be selected.  This allows CUPS to search its locally installed database for the most suitable drivers and PPD files to use with the printer.  If you have a PPD file provided by the printer manufacturer, browse to its location and select it for use here.  Once this is done, click on the <strong>Add Printer</strong> button.</p>
</li>
<li>
<p>The final page is where you would set your default options such as the page size that the printer will use and the resolution of the characters printed to the page.  Click on the <strong>Set Default Options</strong> button and your printer is now installed on your system.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Many desktop installations of Linux will have different tools that can be used to install a printer.  The GNOME and KDE desktop environments have their own applications built-in that can be used to install and manage printers.  Also, some distributions provide separate printer management applications.  However when dealing with a server installation that many users will print to, the CUPS web interface may provide the best tools for the task.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A printer&#8217;s queue may also be installed using the legacy LPD/LPR commands.  Here is an example using the <code>lpadmin</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p ENVY-4510 -L "office" -v socket://192.168.150.25 -m everywhere</strong></pre>
</div>
</div>
<div class="paragraph">
<p>We will break down the command to illustrate the options used here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Since the addition of a printer to the system requires a user with administrative privileges, we prepend the <code>lpadmin</code> command with <code>sudo</code>.</p>
</li>
<li>
<p>The <code>-p</code> option is the destination for your print jobs.  It is essentially a friendly name for the user to know where the print jobs will land.  Typically you can provide the name of the printer.</p>
</li>
<li>
<p>The <code>-L</code> option is the location of the printer.  This is optional but helpful should you need to manage a number of printers in various locations.</p>
</li>
<li>
<p>The <code>-v</code> option is for the printer device&#8217;s URI.  The device URI is what the CUPS print queue needs in order to send rendered print jobs to a specific printer.  In our example, we are using a network location using the IP address provided.</p>
</li>
<li>
<p>The final option, <code>-m</code>, is set to &#8220;everywhere&#8221;. This sets the model of the printer for CUPS to determine which PPD file to use.  In modern versions of CUPS, it is best to use &#8220;everywhere&#8221; so that CUPS can check the device URI (set with the previous <code>-v</code> option) to automatically determine the correct PPD file to use for the printer.  In modern situations, CUPS will just use IPP as explained below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As stated previously, it is best to let CUPS automatically determine which PPD file to use for a particular print queue.  However, the legacy <code>lpinfo</code> command can be used to query the locally installed PPD files to see what are available.  Just provide the <code>--make-and-model</code> option for the printer you wish to install and the <code>-m</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpinfo --make-and-model "HP Envy 4510" -m</strong>
hplip:0/ppd/hplip/HP/hp-envy_4510_series-hpijs.ppd HP Envy 4510 Series hpijs, 3.17.10
hplip:1/ppd/hplip/HP/hp-envy_4510_series-hpijs.ppd HP Envy 4510 Series hpijs, 3.17.10
hplip:2/ppd/hplip/HP/hp-envy_4510_series-hpijs.ppd HP Envy 4510 Series hpijs, 3.17.10
drv:///hpcups.crv/hp-envy_4510_series.ppd HP Envy 4510 Series, hpcups 3.17.10
everywhere IPP Everywhere</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>lpinfo</code> command is deprecated.  It is shown here as an example of listing out what print driver files a printer could use.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Future versions of CUPS have deprecated drivers and will instead focus on using IPP (<em>Internet Printing Protocol</em>) and standard file formats. The output of the previous command illustrates this with the <code>everywhere IPP Everywhere</code> printing capability.  IPP can perform the same tasks that a print driver is used for.  IPP, just like the CUPS web interface, utilizes network port 631 with the TCP protocol.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A default printer can be set using the <code>lpoptions</code> command.  This way, should the majority (or all) print jobs be sent to a particular printer then the one specified with the <code>lpoptions</code> command will be the default.  Just specify the printer along with the <code>-d</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpoptions -d ENVY-4510</strong></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_printers">Managing Printers</h3>
<div class="paragraph">
<p>Once a printer has been installed an administrator could use the web interface to manage the options that are available to the printer.  A more direct approach to managing a printer is through the use of the <code>lpadmin</code> command.</p>
</div>
<div class="paragraph">
<p>One option is allowing the ability for a printer to be shared on the network.  This can be achieved with the <code>printer-is-shared</code> option, and by specifying the printer with the <code>-p</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p FRONT-DESK -o printer-is-shared=true</strong></pre>
</div>
</div>
<div class="paragraph">
<p>An administrator can also configure a print queue to only accept print jobs from specific users with each user separated by a comma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p FRONT-DESK -u allow:carol,frank,grace</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Inversely, only specific users could be denied access to a specific print queue:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p FRONT-DESK -u deny:dave</strong></pre>
</div>
</div>
<div class="paragraph">
<p>User groups could also be used to allow or deny access to a printer&#8217;s queue provided that the group&#8217;s name is preceded by an &#8220;at&#8221; (<code>@</code>) character:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p FRONT-DESK -u deny:@sales,@marketing</strong></pre>
</div>
</div>
<div class="paragraph">
<p>A print queue can also have an error policy should it encounter issues printing a job.  With the use of policies, a print job could be aborted (<code>abort-job</code>) or another attempt to print it could occur at a later time (<code>retry-job</code>).  Other policies include the ability to stop the printer immediately should an error occur (<code>stop-printer</code>) as well as the ability to retry the job immediately after a failure is detected (<code>retry-current-job</code>).  Here is an example where the printer policy is set to abort the print job should an error occur on the <code>FRONT-DESK</code> printer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -p FRONT-DESK -o printer-error-policy=abort-job</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure to review the manual pages for the <code>lpadmin</code> command located at <code>lpadmin(8)</code> for further details on the usage of this command.</p>
</div>
</div>
<div class="sect2">
<h3 id="_submitting_print_jobs">Submitting Print Jobs</h3>
<div class="paragraph">
<p>Many desktop applications will allow you to submit print jobs from a menu item or by using the <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>p</kbd></span> keyboard shortcut.  Should you find yourself on a Linux system that does not utilize a desktop environment, you can still send files to a printer by way of the legacy LPD/LPR commands.</p>
</div>
<div class="paragraph">
<p>The <code>lpr</code> (&#8220;line printer remote&#8221;) command is used to send a print job to a printer&#8217;s queue.  In the command&#8217;s most basic form, a file name along with the <code>lpr</code> command is all that is required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpr report.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will send the file <code>report.txt</code> to the default print queue for the system (as identified by the <code>/etc/cups/printers.conf</code> file).</p>
</div>
<div class="paragraph">
<p>If a CUPS installation has multiple printers installed then the <code>lpstat</code> command can be used to print out a list of available printers using the <code>-p</code> option and the <code>-d</code> option will indicate which is the default printer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpstat -p -d</strong>
printer FRONT-DESK is idle.  enabled since Mon 03 Aug 2020 10:33:07 AM EDT
printer PostScript_oc0303387803 disabled since Sat 07 Mar 2020 08:33:11 PM EST -
	reason unknown
printer ENVY-4510 is idle.  enabled since Fri 31 Jul 2020 10:08:31 AM EDT
system default destination: ENVY-4510</pre>
</div>
</div>
<div class="paragraph">
<p>So in our example here, the <code>report.txt</code> file will be sent to the <code>ENVY-4510</code> printer as it is set as the default.  Should the file need to be printed at a different printer, specify the printer along with the <code>-P</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpr -P FRONT-DESK report.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>When a print job is submitted to CUPS the daemon will figure out which backend is best suited to handle the task.  CUPS can make use of various printer drivers, filters, hardware port monitors and other software to properly render the document.  There will be times when a user printing a document will need to make modifications to <em>how</em> the document should be printed.  Many graphical applications make this task rather easy.  There are also command line options that can be utilized to change how a document should be printed.  When a print job is submitted via the command line, the <code>-o</code> switch (for &#8220;options&#8221;) can be used in conjunction with specific terms to adjust the document&#8217;s layout for printing.  Here is a short list of commonly used options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>landscape</code></dt>
<dd>
<p>The document is printed where the page is rotated 90 degrees clockwise.  The option <code>orientation-requested=4</code> will achieve the same result.</p>
</dd>
<dt class="hdlist1"><code>two-sided-long-edge</code></dt>
<dd>
<p>The printer will print the document in portrait mode on both sides of the paper, provided that the printer supports this capability.</p>
</dd>
<dt class="hdlist1"><code>two-sided-short-edge</code></dt>
<dd>
<p>The printer will print the document in landscape mode on both sides of the paper, provided that the printer supports this capability.</p>
</dd>
<dt class="hdlist1"><code>media</code></dt>
<dd>
<p>The printer will print the job to the specified media size.  The media sizes available for a print job to use depend on the printer, but here is a list of common sizes:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Size Option</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>A4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO A4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Letter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">US Letter</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Legal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">US Legal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO DL Envelope</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COM10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">US #10 Envelope</p></td>
</tr>
</tbody>
</table>
</dd>
<dt class="hdlist1"><code>collate</code></dt>
<dd>
<p>Collate the printed document.  This is helpful if you have a multi-page document that will be printed more than once as all of the pages for each document will then be printed in order.  Set this option to either <code>true</code> to enable it or <code>false</code> to disable it.</p>
</dd>
<dt class="hdlist1"><code>page-ranges</code></dt>
<dd>
<p>This option can be used to select a single page to print, or a specific set of pages to print from a document.  An example would look like:  <code>-o page-ranges=5-7,9,15</code>.  This would print pages 5, 6 and 7 then pages 9 and 15.</p>
</dd>
<dt class="hdlist1"><code>fit-to-page</code></dt>
<dd>
<p>Print the document so that the file is scaled to fit the paper.  If no information about the page size is provided by the file to be printed, it is possible that the printed job will be scaled incorrectly and portions of the document could be scaled off the page or the document could be scaled too small.</p>
</dd>
<dt class="hdlist1"><code>outputorder</code></dt>
<dd>
<p>Print the document in either <code>reverse</code> order or <code>normal</code> to start the printing on page one.  If a printer prints its pages face-down, the default is for the order to be <code>-o outputorder=normal</code> whereas printers that print with their pages facing up will print with <code>-o outputorder=reverse</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Taking a sampling of the options above, the following example command can be constructed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpr -P ACCOUNTING-LASERJET -o landscape -o media=A4 -o two-sided-short-edge finance-report.pdf</strong></pre>
</div>
</div>
<div class="paragraph">
<p>More than one copy of a document can be printed by using the number option in the following format: <code>-#N</code> where <code>N</code> is equal to the number of copies to print.  Here is an example with the collate option where seven copies of a report are to be printed on the default printer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpr -#7 -o collate=true status-report.pdf</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Aside from the <code>lpr</code> command, the <code>lp</code> command can also be used.  Many of the options that are used with the <code>lpr</code> command can also be used with the <code>lp</code> command, but there are some differences.  Be sure to consult the man page at <code>lp(1)</code> for reference.  Here is how we can run the previous example <code>lpr</code> command using the syntax of the <code>lp</code> command while also specifying the destination printer with the <code>-d</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lp -d ACCOUNTING-LASERJET -n 7 -o collate=true status-report.pdf</strong></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_print_jobs">Managing Print Jobs</h3>
<div class="paragraph">
<p>As stated earlier, each print job submitted to the print queue receives a job ID from CUPS.  A user can view the print jobs that they have submitted with the <code>lpq</code> command.  Passing in the <code>-a</code> option will show the queues of all printers that are managed by the CUPS installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpq -a</strong>
Rank        Owner         Job       File(s)                  Total Size
1st         carol         20        finance-report.pdf       5072 bytes</pre>
</div>
</div>
<div class="paragraph">
<p>The same <code>lpstat</code> command used previously also has an option to view printer queues.  The <code>-o</code> option by itself will show all print queues, or a print queue can be specified by name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lp -o</strong>
ACCOUNTING-LASERJET-4                   carol        19456   Wed 05 Aug 2020 04:29:44 PM EDT</pre>
</div>
</div>
<div class="paragraph">
<p>The print job ID will be prepended with the name of the queue where the job was sent, then the name of the user that submitted the job, the file&#8217;s size, and the time it was submitted.</p>
</div>
<div class="paragraph">
<p>Should a print job get stuck on a printer or a user wishes to cancel their print job, use the <code>lprm</code> command along with the job ID found from the <code>lpq</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lprm 20</strong></pre>
</div>
</div>
<div class="paragraph">
<p>All jobs in a print queue could be deleted at once by providing just a dash <code>-</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lprm -</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, the CUPS <code>cancel</code> command could also be used by a user to stop their current print job:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cancel</strong></pre>
</div>
</div>
<div class="paragraph">
<p>A specific print job can be cancelled by its job ID prepended by the printer name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cancel ACCOUNTING-LASERJET-20</strong></pre>
</div>
</div>
<div class="paragraph">
<p>A print job can also be moved from one print queue to another.  This is often helpful should a printer stop responding or the document to be printed requires features available on a different printer.  Take note that this procedure typically requires a user with elevated privileges.  Using the same print job from the previous example, we could move it to the queue of the <code>FRONT-DESK</code> printer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpmove ACCOUNTING-LASERJET-20 FRONT-DESK</strong></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_removing_printers">Removing Printers</h3>
<div class="paragraph">
<p>To remove a printer, it is often helpful to first list out all of the printers that are currently managed by the CUPS service.  This can be done with the <code>lpstat</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpstat -v</strong>
device for FRONT-DESK: socket://192.168.150.24
device for ENVY-4510: socket://192.168.150.25
device for PostScript_oc0303387803: ///dev/null</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-v</code> option not only lists out the printers but also where (and how) they are attached.  It is good practice to first reject any new jobs going to the printer and provide a reason as to why the printer will not be accepting new jobs.  This can be done with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo cupsreject -r "Printer to be removed" FRONT-DESK</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of <code>sudo</code> as this task requires a user with elevated privileges.</p>
</div>
<div class="paragraph">
<p>To remove a printer, we utilize the <code>lpadmin</code> command with the <code>-x</code> option to delete the printer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpadmin -x FRONT-DESK</strong></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A new printer was just installed on a local workstation named <code>office-mgr</code>.  What command could be used to set this printer as the default for this workstation?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Which command and option would be used to determine what printers are available for printing from a workstation?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using the <code>cancel</code> command, how would you remove a print job with ID 15 that is stuck in the queue for the printer named <code>office-mgr</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You have a print job destined for a printer that does not have enough paper to print the full file.  What command would you use to move the print job with ID 2 queued to print on the <code>FRONT-DESK</code> printer over to the print queue for the <code>ACCOUNTING-LASERJET</code> printer?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using your distribution&#8217;s package manager, install the <code>cups</code> and the <code>printer-driver-cups-pdf</code> packages.  Note that if you are using a Red Hat based distribution (such as Fedora) the CUPS PDF driver is called <code>cups-pdf</code>.  Also install the <code>cups-client</code> package to utilize the System V style printing commands  We will use these packages to practice managing a CUPS printer without physically installing a real printer.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that the CUPS daemon is running, then verify that the PDF printer is enabled and set to the default.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Run a command that will print the <code>/etc/services</code> file.  You should now have a directory named <code>PDF</code> within your home directory.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Use a command that will only disable the printer, then run a separate command that shows all status information to verify that the PDF printer is disabled.  Then try to print a copy of your <code>/etc/fstab</code> file.  What happens?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now try to print a copy of the <code>/etc/fstab</code> file to the PDF printer.  What happens?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Cancel the print job, then remove the PDF printer.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The CUPS daemon is a widely-used platform for printing to local and remote printers.  While it supersedes the legacy LPD protocol it still provides backwards compatibility for its tools.</p>
</div>
<div class="paragraph">
<p>The files and commands discussed in this lesson were:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>/etc/cups/cupsd.conf</code></dt>
<dd>
<p>The primary configuration file for the CUPS service itself.  This file also controls access to the web interface for CUPS.</p>
</dd>
<dt class="hdlist1"><code>/etc/printcap</code></dt>
<dd>
<p>A legacy file used by LPD that contains a line for each printer connected to the system.</p>
</dd>
<dt class="hdlist1"><code>/etc/cups/printers.conf</code></dt>
<dd>
<p>The configuration file used by CUPS for printer information.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The CUPS web interface, which on a default installation can be found at <code>http://localhost:631</code>.  Remember that the default network port for the web interface is 631/TCP.</p>
</div>
<div class="paragraph">
<p>The following legacy LPD/LPR commands were also discussed:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>lpadmin</code></dt>
<dd>
<p>Used to install and remove printers and printer classes.</p>
</dd>
<dt class="hdlist1"><code>lpoptions</code></dt>
<dd>
<p>Used to print out printer options and to modify a printer&#8217;s settings.</p>
</dd>
<dt class="hdlist1"><code>lpstat</code></dt>
<dd>
<p>Used to display status information of the printers connected to a CUPS installation.</p>
</dd>
<dt class="hdlist1"><code>lpr</code></dt>
<dd>
<p>Used to submit print jobs to a printer&#8217;s queue.</p>
</dd>
<dt class="hdlist1"><code>lp</code></dt>
<dd>
<p>Used to submit print jobs to a printer&#8217;s queue.</p>
</dd>
<dt class="hdlist1"><code>lpq</code></dt>
<dd>
<p>This command lists out the print jobs within the print queue.</p>
</dd>
<dt class="hdlist1"><code>lprm</code></dt>
<dd>
<p>Used to cancel print jobs by ID.  The ID for a job can be obtained with the output of the <code>lpq</code> command.</p>
</dd>
<dt class="hdlist1"><code>cancel</code></dt>
<dd>
<p>An alternative to the <code>lprm</code> command to cancel print jobs by their ID.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Be sure to review the following man pages for the various tools and utilities for cups:  <code>lpadmin(8)</code>, <code>lpoptions(1)</code>, <code>lpr(1)</code>, <code>lpq(1)</code>, <code>lprm(1)</code>, <code>cancel(1)</code>, <code>lpstat(1)</code>, <code>cupsenable(8)</code> and <code>cupsaccept(8)</code>.  Reviewing the online help documentation at <code>http://localhost:631/help</code> is also recommended.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A new printer was just installed on a local workstation named <code>office-mgr</code>.  What command could be used to set this printer as the default for this workstation?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpoptions -d office-mgr</strong></pre>
</div>
</div>
</li>
<li>
<p>Which command and option would be used to determine what printers are available for printing from a workstation?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpstat -p</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-p</code> option lists out all available printers and if they are enabled for printing.</p>
</div>
</li>
<li>
<p>Using the <code>cancel</code> command, how would you remove a print job with ID 15 that is stuck in the queue for the printer named <code>office-mgr</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cancel office-mgr-15</strong></pre>
</div>
</div>
</li>
<li>
<p>You have a print job destined for a printer that does not have enough paper to print the full file.  What command would you use to move the print job with ID 2 queued to print on the FRONT-DESK printer over to the print queue for the ACCOUNTING-LASERJET printer?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo lpmove FRONT-DESK-2 ACCOUNTING-LASERJET</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.4_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using your distribution&#8217;s package manager, install the <code>cups</code> and the <code>printer-driver-cups-pdf</code> packages.  Note that if you are using a Red Hat based distribution (such as Fedora) the CUPS PDF driver is called <code>cups-pdf</code>.  We will use these packages to practice managing a CUPS printer without physically installing a real printer.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that the CUPS daemon is running, then verify that the PDF printer is enabled and set to the default.</p>
<div class="paragraph">
<p>One method to check the availability and status of the PDF printer would be to run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lpstat -p -d</strong>

printer PDF is idle.  enabled since Thu 25 Jun 2020 02:36:07 PM EDTi

system default destination: PDF</pre>
</div>
</div>
</li>
<li>
<p>Run a command that will print the <code>/etc/services</code> file.  You should now have a directory named <code>PDF</code> within your home directory.</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>lp -d PDF /etc/services</strong></pre>
</div>
</div>
<div class="paragraph">
<p>would work.  You will now have a PDF version of this file within the PDF directory.</p>
</div>
</li>
<li>
<p>Use a command that will only disable the printer, then run a separate command that shows all status information to verify that the PDF printer is disabled.</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo cupsdisable PDF</strong></pre>
</div>
</div>
<div class="paragraph">
<p>will disable the printer.</p>
</div>
<div class="paragraph">
<p>Next run the <code>lpstat -t</code> command to get a full listing of the printer&#8217;s condition.  It should look similar to the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>scheduler is running</strong>

system default destination: PDFi

device for PDF: cups-pdf:/

PDF accepting requests since Wed 05 Aug 2020 04:19:15 PM EDTi

printer PDF disabled since Wed 05 Aug 2020 04:19:15 PM EDT -

Paused</pre>
</div>
</div>
</li>
<li>
<p>Now try to print a copy of the <code>/etc/fstab</code> file to the PDF printer.  What happens?</p>
<div class="paragraph">
<p>After attempting the command <code>lp -d PDF /etc/fstab</code> you should get output showing the job ID information.  However, if you check the PDF folder in your home directory, the new file is not there.  You can then check the print queue with the <code>lpstat -o</code> command, and you will find your job listed there.</p>
</div>
</li>
<li>
<p>Cancel the print job, then remove the PDF printer.</p>
<div class="paragraph">
<p>Using the output from the previous <code>lp</code> command, use the <code>cancel</code> command to delete the job.  For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cancel PDF-4</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Then run the <code>lpstat -o</code> command to verify that the job has been deleted.</p>
</div>
<div class="paragraph">
<p>Remove the PDF printer with the following:  <code>sudo lpadmin -x PDF</code>.  Then verify that the printer has been removed:  <code>lpstat -a</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">109.1 Fundamentals of internet protocols (109.1 Lesson 1)</p>

        <div class="button-group">
            <a href="../../../109/109.1/109.1_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
