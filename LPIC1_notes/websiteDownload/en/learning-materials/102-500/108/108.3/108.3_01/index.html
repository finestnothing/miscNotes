

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>108.3 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">108.3 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 105: Shells and Shell Scripting
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../105/105.1/index.html" class="hierarchy__link">105.1 Customize and use the shell environment</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_01/index.html" class="hierarchy__link">105.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_02/index.html" class="hierarchy__link">105.1 Lesson 2</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.1/105.1_03/index.html" class="hierarchy__link">105.1 Lesson 3</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../105/105.2/index.html" class="hierarchy__link">105.2 Customize or write simple scripts</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_01/index.html" class="hierarchy__link">105.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../105/105.2/105.2_02/index.html" class="hierarchy__link">105.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 106: User Interfaces and Desktops
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../106/106.1/index.html" class="hierarchy__link">106.1 Install and configure X11</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.1/106.1_01/index.html" class="hierarchy__link">106.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.2/index.html" class="hierarchy__link">106.2 Graphical Desktops</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.2/106.2_01/index.html" class="hierarchy__link">106.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../106/106.3/index.html" class="hierarchy__link">106.3 Accessibility</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../106/106.3/106.3_01/index.html" class="hierarchy__link">106.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 107: Administrative Tasks
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../107/107.1/index.html" class="hierarchy__link">107.1 Manage user and group accounts and related system files</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_01/index.html" class="hierarchy__link">107.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.1/107.1_02/index.html" class="hierarchy__link">107.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.2/index.html" class="hierarchy__link">107.2 Automate system administration tasks by scheduling jobs</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_01/index.html" class="hierarchy__link">107.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../107/107.2/107.2_02/index.html" class="hierarchy__link">107.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../107/107.3/index.html" class="hierarchy__link">107.3 Localisation and internationalisation</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../107/107.3/107.3_01/index.html" class="hierarchy__link">107.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 108: Essential System Services
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../108.1/index.html" class="hierarchy__link">108.1 Maintain system time</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.1/108.1_01/index.html" class="hierarchy__link">108.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../108.1/108.1_02/index.html" class="hierarchy__link">108.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../108.2/index.html" class="hierarchy__link">108.2 System logging</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.2/108.2_01/index.html" class="hierarchy__link">108.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../108.2/108.2_02/index.html" class="hierarchy__link">108.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">108.3 Mail Transfer Agent (MTA) basics</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">108.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../108.4/index.html" class="hierarchy__link">108.4 Manage printers and printing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../108.4/108.4_01/index.html" class="hierarchy__link">108.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 109: Networking Fundamentals
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../109/109.1/index.html" class="hierarchy__link">109.1 Fundamentals of internet protocols</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_01/index.html" class="hierarchy__link">109.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.1/109.1_02/index.html" class="hierarchy__link">109.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.2/index.html" class="hierarchy__link">109.2 Persistent network configuration</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_01/index.html" class="hierarchy__link">109.2 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.2/109.2_02/index.html" class="hierarchy__link">109.2 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.3/index.html" class="hierarchy__link">109.3 Basic network troubleshooting</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_01/index.html" class="hierarchy__link">109.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../109/109.3/109.3_02/index.html" class="hierarchy__link">109.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../109/109.4/index.html" class="hierarchy__link">109.4 Configure client side DNS</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../109/109.4/109.4_01/index.html" class="hierarchy__link">109.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 110: Security
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../110/110.1/index.html" class="hierarchy__link">110.1 Perform security administration tasks</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.1/110.1_01/index.html" class="hierarchy__link">110.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.2/index.html" class="hierarchy__link">110.2 Setup host security</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.2/110.2_01/index.html" class="hierarchy__link">110.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../110/110.3/index.html" class="hierarchy__link">110.3 Securing data with encryption</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_01/index.html" class="hierarchy__link">110.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../110/110.3/110.3_02/index.html" class="hierarchy__link">110.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 108: Essential System Services</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">108.3 Mail Transfer Agent (MTA) basics</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">108.3 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>108.3 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">108 Essential System Services</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">108.3 Mail Transfer Agent (MTA) basics</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Unix-like operating systems, such as Linux, every user has their own <em>inbox</em>: a special location on the filesystem that is inaccessible by other non-root users and stores the user&#8217;s personal email messages. New incoming messages are added to the user&#8217;s inbox by the <em>Mail Transfer Agent</em> (MTA). The MTA is a program running as a system service which collects messages sent by other local accounts as well as messages received from the network, sent from remote user accounts.</p>
</div>
<div class="paragraph">
<p>The same MTA is also responsible for sending messages to the network, if the destination address refers to a remote account. It does so by using a filesystem location as an email <em>outbox</em> for all system users: as soon as a user places a new message in the outbox, the MTA will identify the target network node from the domain name given by the destination email address&#8201;&#8212;&#8201;the portion after the <code>@</code> sign&#8201;&#8212;&#8201;and then it will try to transfer the message to the remote MTA using the <em>Simple Mail Transfer Protocol</em> (SMTP). SMTP was designed with unreliable networks in mind, so it will try to establish alternative delivery routes if the primary mail destination node is unreachable.</p>
</div>
<div class="sect2">
<h3 id="sec.108.3_01-LRA">Local and Remote MTA</h3>
<div class="paragraph">
<p>Traditional user accounts in network connected machines make up the simplest email exchange scenario, where every network node runs its own MTA daemon. No software other than the MTA is required to send and to receive email messages. In practice, however, it is more common to use a remote email account and not have an active local MTA service (i.e. instead using an email client application to access the remote account).</p>
</div>
<div class="paragraph">
<p>Unlike local accounts, a remote email account&#8201;&#8212;&#8201;also called <em>remote mailbox</em>&#8201;&#8212;&#8201;requires user authentication to grant access to the user&#8217;s mailbox and to the remote MTA (in this case, simply called the <em>SMTP server</em>). While the user interacting with a local inbox and MTA is already identified by the system, a remote system must verify the user&#8217;s identity before handling its messages through IMAP or POP3.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Nowadays the most common method to send and receive email is through a hosted account on a remote server, e.g. a company&#8217;s centralized email server hosting all employee accounts or a personal email service, such as Google&#8217;s <em>Gmail</em>. Instead of collecting locally-delivered messages, the email client application will connect to the remote mailbox and retrieve the messages from there. The POP3 and IMAP protocols are commonly used to retrieve the messages from the remote server, but other non-standard proprietary protocols may be used as well.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When an MTA daemon is running on the local system, local users can send an email to other local users or to users on a remote machine, provided their system also has an MTA service that is accepting network connections. TCP port 25 is the standard port for SMTP communication, but other ports may be used as well, depending on the authentication and/or encryption schema being used (if any).</p>
</div>
<div class="paragraph">
<p>Leaving aside topologies involving the access to remote mailboxes, an email exchange network between ordinary Linux user accounts can be implemented as long as all network nodes have an active MTA that is able to perform the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maintain the outbox queue of messages to be sent. For each queued message, the local MTA will assess the destination MTA from the recipient&#8217;s address.</p>
</li>
<li>
<p>Communicate with remote MTA daemons using SMTP. The local MTA should be able to use the Simple Mail Transfer Protocol (SMTP) over the TCP/IP stack to receive, send and redirect messages from/to other remote MTA daemons.</p>
</li>
<li>
<p>Maintain an individual inbox for every local account. The MTA will usually store the messages in the <em>mbox</em> format: a single text file containing all email messages in sequence.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Normally, email addresses specify a domain name as the location, e.g. <code>lpi.org</code> in <code>info@lpi.org</code>. When this is the case the sender&#8217;s MTA will query the DNS service for the corresponding MX record. The DNS MX record contains the IP address of the MTA handling the email for that domain. If the same domain has more than one MX record specified in the DNS, the MTA should try to contact them according to their priority values. If the recipient&#8217;s address does not specify a domain name or the domain does not have an MX record, then the part after the <code>@</code> symbol will be treated as the host of the destination MTA.</p>
</div>
<div class="paragraph">
<p>Security aspects must be considered if the MTA hosts will be visible to hosts on the Internet. For instance, it is possible for an unknown user to use the local MTA to impersonate another user and send potentially harmful emails. An MTA that blindly relays an email is known as an <em>open relay</em>, when it can be used as an intermediary to potentially disguise the true sender of the message. To prevent these misuses, the recommendation is to accept connections from authorized domains only and to implement a secure authentication schema.</p>
</div>
<div class="paragraph">
<p>In addition to that, there are many different MTA implementations for Linux, each one focusing on specific aspects like compatibility, performance, security, etc. Nevertheless, all MTAs will follow the same basic principles and provide similar features.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec.108.3_01-LMTA">Linux MTAs</h3>
<div class="paragraph">
<p>The traditional MTA available for Linux systems is <em>Sendmail</em>, a very flexible general purpose MTA used by many Unix-like operating systems. Some of the other common MTAs are <em>Postfix</em>, <em>qmail</em> and <em>Exim</em>. The main reason to choose an alternative MTA is to implement advanced features more easily, as configuring custom email servers in Sendmail can be a complicated task. Also, each distribution may have its preferred MTA, with predefined settings appropriate for most common setups. All MTAs intend to be drop-in Sendmail replacements, so all Sendmail-compatible applications should work regardless of what MTA is being used.</p>
</div>
<div class="paragraph">
<p>If the MTA is running but not accepting network connections, it will only be able to deliver email messages on the local machine. For the <code>sendmail</code> MTA, the <code>/etc/mail/sendmail.mc</code> file should be modified to accept non-local connections. To do so, the entry</p>
</div>
<div class="listingblock">
<div class="content">
<pre>DAEMON_OPTIONS(`Port=smtp,Addr=127.0.0.1, Name=MTA')dnl</pre>
</div>
</div>
<div class="paragraph">
<p>should be modified to the correct network address and the service should be restarted. Some Linux distributions, such as Debian, may offer configuration tools to help bring up the email server with a predefined set of commonly used features.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Due to security issues most Linux distributions do not install an MTA by default. To test the examples given in this lesson, make sure there&#8217;s a running MTA on every machine and that they are accepting connections on TCP port 25. For security purposes, these systems should not be exposed to incoming connections from the public internet during testing.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the MTA is running and accepting connections from the network, new email messages are passed to it with SMTP commands that are sent through a TCP connection. The command <code>nc</code>&#8201;&#8212;&#8201;a networking utility which reads and writes generic data across the network&#8201;&#8212;&#8201;can be used to send SMTP commands directly to the MTA. If the command <code>nc</code> is not available, it will be installed with the <em>ncat</em> or <em>nmap-ncat</em> package, depending on the package management system in use. Writing SMTP commands directly to the MTA will help you understand the protocol and other general email concepts better, but it can also help to diagnose problems in the mail delivery process.</p>
</div>
<div class="paragraph">
<p>If, for example, user <code>emma</code> at the <code>lab1.campus</code> host wants to send a message to user <code>dave</code> at the <code>lab2.campus</code> host, then she can use the <code>nc</code> command to directly connect to the <code>lab2.campus</code> MTA, assuming it is listening on the TCP port 25:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>nc lab2.campus 25</strong>
220 lab2.campus ESMTP Sendmail 8.15.2/8.15.2; Sat, 16 Nov 2019 00:16:07 GMT
<strong>HELO lab1.campus</strong>
250 lab2.campus Hello lab1.campus [10.0.3.134], pleased to meet you
<strong>MAIL FROM: emma@lab1.campus</strong>
250 2.1.0 emma@lab1.campus... Sender ok
<strong>RCPT TO: dave@lab2.campus</strong>
250 2.1.5 dave@lab2.campus... Recipient ok
<strong>DATA</strong>
354 Enter mail, end with "." on a line by itself
<strong>Subject: Recipient MTA Test</strong>

<strong>Hi Dave, this is a test for your MTA.</strong>
<strong>.</strong>
250 2.0.0 xAG0G7Y0000595 Message accepted for delivery
<strong>QUIT</strong>
221 2.0.0 lab2.campus closing connection</pre>
</div>
</div>
<div class="paragraph">
<p>Once the connection is established, the remote MTA identifies itself and then it&#8217;s ready to receive SMTP commands. The first SMTP command in the example, <code>HELO lab1.campus</code>, indicates <code>lab1.campus</code> as the exchange initiator. The next two commands, <code>MAIL FROM: emma@lab1.campus</code> and <code>RCPT TO: dave@lab2.campus</code>, indicate the sender and the recipient. The proper email message starts after the <code>DATA</code> command and ends with a period on a line by itself. To add a <code>subject</code> field to the email, it should be in the first line after the <code>DATA</code> command, as shown in the example. When the subject field is used, there must be an empty line separating it from the email content. The <code>QUIT</code> command finishes the connection with the MTA at the <code>lab2.campus</code> host.</p>
</div>
<div class="paragraph">
<p>On the <code>lab2.campus</code> host, user <code>dave</code> will receive a message similar to <code>You have new mail in /var/spool/mail/dave</code> as soon as he enters a shell session. This file will contain the raw email message sent by <code>emma</code> as well as the headers added by the MTA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /var/spool/mail/dave</strong>
From emma@lab1.campus  Sat Nov 16 00:19:13 2019
Return-Path: &lt;emma@lab1.campus&gt;
Received: from lab1.campus (lab1.campus [10.0.3.134])
	by lab2.campus (8.15.2/8.15.2) with SMTP id xAG0G7Y0000595
	for dave@lab2.campus; Sat, 16 Nov 2019 00:17:06 GMT
Date: Sat, 16 Nov 2019 00:16:07 GMT
From: emma@lab1.campus
Message-Id: &lt;201911160017.xAG0G7Y0000595@lab2.campus&gt;
Subject: Recipient MTA Test

Hi Dave, this is a test for your MTA.</pre>
</div>
</div>
<div class="paragraph">
<p>The header <code>Received:</code> shows that the message from <code>lab1.campus</code> was received directly by <code>lab2.campus</code>. By default, MTAs will only accept messages to local recipients. The following error will probably occur if user <code>emma</code> tries to send an email to user <code>henry</code> at the <code>lab3.campus</code> host, but using the <code>lab2.campus</code> MTA instead of the proper <code>lab3.campus</code> MTA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>nc lab2.campus 25</strong>
220 lab2.campus ESMTP Sendmail 8.15.2/8.15.2; Sat, 16 Nov 2019 00:31:44 GMT
<strong>HELO lab1.campus</strong>
250 lab2.campus Hello lab1.campus [10.0.3.134], pleased to meet you
<strong>MAIL FROM: emma@lab1.campus</strong>
250 2.1.0 emma@lab1.campus... Sender ok
<strong>RCPT TO: henry@lab3.campus</strong>
550 5.7.1 henry@lab3.campus... Relaying denied</pre>
</div>
</div>
<div class="paragraph">
<p>SMTP response numbers beginning with 5, such as the <code>Relaying denied</code> message, indicate an error. There are legitimate situations when relaying is desirable, like when the hosts sending and receiving emails are not connected all the time: an intermediate MTA can be configured to accept emails intended to other hosts, acting as a <em>relay</em> SMTP server that can forward messages between MTAs.</p>
</div>
<div class="paragraph">
<p>The ability to route email traffic through intermediate SMTP servers discourages the attempt to connect directly to the host indicated by the recipient&#8217;s email address, as shown in the previous examples. Moreover, email addresses often have a domain name as the location (after the <code>@</code>), so the actual name of the corresponding MTA host must be retrieved through DNS. Therefore, it is recommended to delegate the task of identifying the appropriate destination host to the local MTA or to the remote SMTP server, when remote mailboxes are used.</p>
</div>
<div class="paragraph">
<p>Sendmail provides <code>sendmail</code> command to perform many email-related operations, including assisting in composing new messages. It also requires the user to type the email headers by hand, but in a friendlier way than using SMTP commands directly. So a more adequate method for user <code>emma@lab1.campus</code> to send an email message to <code>dave@lab2.campus</code> would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sendmail dave@lab2.campus</strong>
<strong>From: emma@lab1.campus</strong>
<strong>To: dave@lab2.campus</strong>
<strong>Subject: Sender MTA Test</strong>

<strong>Hi Dave, this is a test for my MTA.</strong>
<strong>.</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Here again, the dot in a line by itself finishes the message. The message should be immediately sent to the recipient, unless the local MTA was unable to contact the remote MTA. The command <code>mailq</code>, if executed by root, will show all non-delivered messages. If, for example, the MTA at <code>lab2.campus</code> did not respond, then command <code>mailq</code> will list the undelivered message and the cause of the failure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>mailq</strong>
		/var/spool/mqueue (1 request)
-----Q-ID----- --Size-- -----Q-Time----- ------------Sender/Recipient-----------
xAIK3D9S000453       36 Mon Nov 18 20:03 &lt;emma@lab1.campus&gt;
                 (Deferred: Connection refused by lab2.campus.)
					 &lt;dave@lab2.campus&gt;
		Total requests: 1</pre>
</div>
</div>
<div class="paragraph">
<p>The default location for the outbox queue is <code>/var/spool/mqueue/</code>, but different MTAs may use different locations in the <code>/var/spool/</code> directory. Postfix, for instance, will create a directory tree under <code>/var/spool/postfix/</code> to manage the queue. The command <code>mailq</code> is equivalent to <code>sendmail -bp</code>, and they should be present regardless of the MTA installed in the system. To ensure backward compatibility, most MTAs provide these traditional mail administration commands.</p>
</div>
<div class="paragraph">
<p>If the primary email destination host&#8201;&#8212;&#8201;when it is provided from an MX DNS record for the domain&#8201;&#8212;&#8201;is unreachable, the MTA will try to contact the entries with lower priority (if there are any specified). If none of them are reachable, the message will stay in the local outbox queue to be sent later. If configured to do so, the MTA can periodically check the availability of the remote hosts and perform a new delivery attempt. If using a Sendmail-compatible MTA, a new attempt will immediately take place with the command <code>sendmail -q</code>.</p>
</div>
<div class="paragraph">
<p>Sendmail will store incoming messages in a file named after the corresponding inbox owner, for example <code>/var/spool/mail/dave</code>. Other MTAs, like Postfix, may store the incoming email messages in locations like <code>/var/mail/dave</code>, but the file content is the same. In the example, the command <code>sendmail</code> was used in the sender&#8217;s host to compose the message, so the raw message headers show that the email took extra steps before reaching the final destination:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /var/spool/mail/dave</strong>
From emma@lab1.campus  Mon Nov 18 20:07:39 2019
Return-Path: &lt;emma@lab1.campus&gt;
Received: from lab1.campus (lab1.campus [10.0.3.134])
	by lab2.campus (8.15.2/8.15.2) with ESMTPS id xAIK7clC000432
	(version=TLSv1.3 cipher=TLS_AES_256_GCM_SHA384 bits=256 verify=NOT)
	for &lt;dave@lab2.campus&gt;; Mon, 18 Nov 2019 20:07:38 GMT
Received: from lab1.campus (localhost [127.0.0.1])
	by lab1.campus (8.15.2/8.15.2) with ESMTPS id xAIK3D9S000453
	(version=TLSv1.3 cipher=TLS_AES_256_GCM_SHA384 bits=256 verify=NOT)
	for &lt;dave@lab2.campus&gt;; Mon, 18 Nov 2019 20:03:13 GMT
Received: (from emma@localhost)
	by lab1.campus (8.15.2/8.15.2/Submit) id xAIK0doL000449
	for dave@lab2.campus; Mon, 18 Nov 2019 20:00:39 GMT
Date: Mon, 18 Nov 2019 20:00:39 GMT
Message-Id: &lt;201911182000.xAIK0doL000449@lab1.campus&gt;
From: emma@lab1.campus
To: dave@lab2.campus
Subject: Sender MTA Test

Hi Dave, this is a test for my MTA.</pre>
</div>
</div>
<div class="paragraph">
<p>From bottom to top, the lines starting with <code>Received:</code> show the route taken by the message. The message was submitted by user <code>emma</code>  with the command <code>sendmail dave@lab2.campus</code> issued on <code>lab1.campus</code>, as stated by the first <code>Received:</code> header. Then, still on <code>lab1.campus</code>, the MTA uses ESMTPS&#8201;&#8212;&#8201;a superset of the SMTP, which adds encryption extensions&#8201;&#8212;&#8201;to send the message to the MTA at <code>lab2.campus</code>, as stated by the last (top) <code>Received:</code> header.</p>
</div>
<div class="paragraph">
<p>The MTA finishes its job after the message is saved in the user&#8217;s inbox. It is common to perform some kind of email filtering, such as spam blockers or the enforcement of user-defined filtering rules. These tasks are executed by third-party applications, working together with the MTA. The MTA could, for example, call the <em>SpamAssassin</em> utility to mark suspicious messages using its text analysis features.</p>
</div>
<div class="paragraph">
<p>Although possible, it is not convenient to read the mailbox file directly. It is recommended to use a email client program instead (e.g. Thunderbird, Evolution, or KMail), which will parse the file and appropriately manage the messages. Such programs also offer extra features, like shortcuts to common actions, inbox sub-directories, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec.108.3_01-MC">The <code>mail</code> Command and Mail User Agents (MUA)</h3>
<div class="paragraph">
<p>It is possible to write an email message directly in its raw format, but it is much more practical to use a client application&#8201;&#8212;&#8201;also known as an MUA (<em>Mail User Agent</em>)&#8201;&#8212;&#8201;to speed up the process and to avoid mistakes. The MUA takes care of the work under the hood, that is, the email client presents and organizes the received messages and handles the proper communication with the MTA after the user composes an email.</p>
</div>
<div class="paragraph">
<p>There are many distinct types of Mail User Agents. Desktop applications like <em>Mozilla Thunderbird</em> and Gnome&#8217;s <em>Evolution</em> support both local and remote email accounts. Even <em>Webmail</em> interfaces can be seen as a type of MUA, as they intermediate the interaction between the user and the underlying MTA. Email clients are not restricted to graphical interfaces though: console email clients are widely used to access mailboxes not integrated with a graphical interface and to automate email related tasks within shell scripts.</p>
</div>
<div class="paragraph">
<p>Originally, the Unix <code>mail</code> command was only intended to share messages between local system users (the first <code>mail</code> command dates back to the first Unix edition, released in 1971). When network email exchanges became more prominent, other programs were created to deal with the new delivery system and gradually replaced the old <code>mail</code> program.</p>
</div>
<div class="paragraph">
<p>Nowadays, the most commonly used <code>mail</code> command is provided by the <em>mailx</em> package, which is compatible with all modern email features. In most Linux distributions, the command <code>mail</code> is just a symbolic link to the <code>mailx</code> command. Other implementations, like the <em>GNU Mailutils</em> package, basically provide the same features as <code>mailx</code>. There are, however, slight differences between them, especially with respect to command-line options.</p>
</div>
<div class="paragraph">
<p>Regardless of their implementation, all modern variations of the <code>mail</code> command operate in two modes: <em>normal mode</em> and <em>send mode</em>. If an email address is provided as an argument to the command <code>mail</code>, it will enter the send mode, otherwise it will enter the normal (read) mode. In normal mode, the received messages are listed with a numerical index for each one, so the user can refer to them individually when typing commands in the interactive prompt. The command <code>print 1</code> can be used to display the contents of message number 1, for example. Interactive commands can be abbreviated, so commands like <code>print</code>, <code>delete</code> or <code>reply</code> can be replaced by <code>p</code>, <code>d</code> or <code>r</code>, respectively. The <code>mail</code> command will always consider the last received or the last viewed message when the message index number is omitted. The command <code>quit</code> or <code>q</code> will exit the program.</p>
</div>
<div class="paragraph">
<p>The <em>send mode</em> is especially useful for sending automated email messages. It can be used, for example, to send an email to the system administrator if a scheduled maintenance script fails to perform its task. In send mode, <code>mail</code> will use the contents from the <em>standard input</em> as the message body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>mail -s "Maintenance fail" henry@lab3.campus &lt;&lt;&lt;"The maintenance script failed at `date`"</strong></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the option <code>-s</code> was added to include a subject field to the message. The message body was provided by the <em>Hereline</em> redirection to the standard input, but the contents of a file or the output of a command could also be piped to the program&#8217;s <em>stdin</em>. If no content is provided by a redirection to the standard input, then the program will wait for the user to enter the message body. In this case, keystroke <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>D</kbd></span> will end the message. The <code>mail</code> command will immediately exit after the message is added to the outbox queue.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec.108.3_01-DC">Delivery Customization</h3>
<div class="paragraph">
<p>By default, the email accounts on a Linux system are associated with the standard system accounts. For example, If user Carol has the login name <code>carol</code> on the host <code>lab2.campus</code> then her email address will be <code>carol@lab2.campus</code>. This one-to-one association between system accounts and mailboxes can be extended by standard methods provided by most Linux distributions, in particular the email routing mechanism provided by the <code>/etc/aliases</code> file.</p>
</div>
<div class="paragraph">
<p>An email alias is a &#8220;virtual&#8221; email recipient whose receiving messages are redirected to existing local mailboxes or to other types of message storage or processing destinations. Aliases are useful, for example, to place messages sent to <code>postmaster@lab2.campus</code> in Carol&#8217;s mailbox, which is an ordinary local mailbox in the <code>lab2.campus</code> system. To do so, the line <code>postmaster: carol</code> should be added to the <code>/etc/aliases</code> file in <code>lab2.campus</code>. After modifying the <code>/etc/aliases</code> file, the command <code>newaliases</code> should be executed to update the MTA&#8217;s aliases database and make the changes effective. Commands <code>sendmail -bi</code> or <code>sendmail -I</code> can also be used to update the aliases database.</p>
</div>
<div class="paragraph">
<p>Aliases are defined one per line, in the format <code>&lt;alias&gt;: &lt;destination&gt;</code>. In addition to the ordinary local mailboxes, indicated by the corresponding username, other destination types are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A full path (starting with <code>/</code>) to a file. Messages sent to the corresponding alias will be appended to the file.</p>
</li>
<li>
<p>A command to process the message. The <code>&lt;destination&gt;</code> must start with a pipe character and, if the command contains special characters (like blank spaces), it must be enclosed in double quotes. For example, the alias <code>subscribe: |subscribe.sh</code> in <code>lab2.campus</code> will forward all messages sent to <code>subscribe@lab2.campus</code> to the standard input of the command <code>subscribe.sh</code>. If sendmail is running in <em>restricted shell mode</em>, the allowed commands&#8201;&#8212;&#8201;or the links to them&#8201;&#8212;&#8201;should be in <code>/etc/smrsh/</code>.</p>
</li>
<li>
<p>An include file. A single alias can have multiple destinations (separated by commas), so it may be more practical to keep them in an external file. The <code>:include:</code> keyword must indicate the file path, as in <code>:include:/var/local/destinations</code></p>
</li>
<li>
<p>An external address. Aliases can also forward messages to external email addresses.</p>
</li>
<li>
<p>Another alias.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An unprivileged local user can define aliases for their own email by editing the file <code>.forward</code> in their home directory. As the aliases can only affect their own mailbox, only the <code>&lt;destination&gt;</code> part is necessary. To forward all incoming emails to an external address, for example, user <code>dave</code> in <code>lab2.campus</code> could create the following <code>~/.forward</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat ~/.forward</strong>
emma@lab1.campus</pre>
</div>
</div>
<div class="paragraph">
<p>It will forward all email messages sent to <code>dave@lab2.campus</code> to <code>emma@lab1.campus</code>. As with the <code>/etc/aliases</code> file, other redirection rules can be added to <code>.forward</code>, one per line. Nevertheless, the <code>.forward</code> file must be writable by its owner only and it is not necessary to execute the <code>newaliases</code> command after modifying it. Files starting with a dot do not appear in regular file listings, which could make the user unaware of active aliases. Therefore, it is important to verify if the file exists when diagnosing email delivery issues.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Without further options or arguments, the command <code>mail henry@lab3.campus</code> enters the input mode so the user can type the message to <code>henry@lab3.campus</code>. After finishing the message, which keystroke will close the input mode and dispatch the email?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Which command can the root user execute to list the undelivered messages that originated on the local system?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How can an unprivileged user use the standard MTA method to automatically forward all of their incoming mail to the address <code>dave@lab2.campus</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <code>mail</code> command provided by <code>mailx</code>, what command will send a message to <code>emma@lab1.campus</code> with the file <code>logs.tar.gz</code> as an attachment and the output of the command <code>uname -a</code> as the email body?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>An email service administrator wants to monitor email transfers through the network, but they don&#8217;t want to clutter their mailbox with test messages. How could this administrator configure a system-wide email alias to redirect all email sent to the user <code>test</code> to the file <code>/dev/null</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What command, besides <code>newaliases</code>, could be used to update the aliases database after adding a new alias to <code>/etc/aliases</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lesson covered the role and usage of Mail Transfer Agents in Linux systems. The MTA provides a standard method for communication amongst user accounts and can be combined with other software to provide extra functionality. The lesson discussed the following topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Concepts about email-related technologies, mailboxes and protocols.</p>
</li>
<li>
<p>How Linux MTAs exchange messages over the network.</p>
</li>
<li>
<p>Console email clients and MUAs (Mail User Agents).</p>
</li>
<li>
<p>Local email aliasing and forwarding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The technologies, commands and procedures addressed were:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SMTP and related protocols.</p>
</li>
<li>
<p>MTAs available for Linux: Sendmail, Postfix, qmail, Exim.</p>
</li>
<li>
<p>MTA and MUA commands: <code>sendmail</code> and <code>mail</code>.</p>
</li>
<li>
<p>Administrative files and commands: <code>mailq</code>, <code>/etc/aliases</code>, <code>newaliases</code>, <code>~/.forward</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Without further options or arguments, the command <code>mail henry@lab3.campus</code> enters the input mode so the user can type the message to <code>henry@lab3.campus</code>. After finishing the message, which keystroke will close the input mode and dispatch the email?</p>
<div class="paragraph">
<p>Pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>D</kbd></span> will cause the program to close and dispatch the email.</p>
</div>
</li>
<li>
<p>Which command can the root user execute to list the undelivered messages that originated on the local system?</p>
<div class="paragraph">
<p>The command <code>mailq</code> or <code>sendmail -bp</code>.</p>
</div>
</li>
<li>
<p>How can an unprivileged user use the standard MTA method to automatically forward all of their incoming mail to the address <code>dave@lab2.campus</code>?</p>
<div class="paragraph">
<p>The user should add <code>dave@lab2.campus</code> to <code>~/.forward</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.108.3_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <code>mail</code> command provided by <code>mailx</code>, what command will send a message to <code>emma@lab1.campus</code> with the file <code>logs.tar.gz</code> as an attachment and the output of the command <code>uname -a</code> as the email body?</p>
<div class="paragraph">
<p><code>uname -a | mail -a logs.tar.gz emma@lab1.campus</code></p>
</div>
</li>
<li>
<p>An email service administrator wants to monitor email transfers through the network, but they don&#8217;t want to clutter their mailbox with test messages. How could this administrator configure a system-wide email alias to redirect all email sent to the user <code>test</code> to the file <code>/dev/null</code>?</p>
<div class="paragraph">
<p>The <code>test: /dev/null</code> line in <code>/etc/aliases</code> will redirect all messages sent to the local mailbox <code>test</code> to the file <code>/dev/null</code>.</p>
</div>
</li>
<li>
<p>What command, besides <code>newaliases</code>, could be used to update the aliases database after adding a new alias to <code>/etc/aliases</code>?</p>
<div class="paragraph">
<p>Command <code>sendmail -bi</code> or <code>sendmail -I</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">108.4 Manage printers and printing (108.4 Lesson 1)</p>

        <div class="button-group">
            <a href="../../108.4/108.4_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
