

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>102.2 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="fr"
      >Français</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">102.2 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../103/103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.2/index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.2/103.2_01/index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.4/index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.4/103.4_01/index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.4/103.4_02/index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.5/index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.5/103.5_01/index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.5/103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../104/104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.5/index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.5/104.5_01/index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 102: Linux Installation and Package Management</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">102.2 Install a boot manager</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">102.2 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>102.2 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">102 Linux Installation and Package Management</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">102.2 Install a boot manager</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a computer is powered on the first software to run is the boot loader. This is a piece of code whose sole purpose is to load an operating system kernel and hand over control to it. The kernel will load the necessary drivers, initialize the hardware and then load the rest of the operating system.</p>
</div>
<div class="paragraph">
<p>GRUB is the boot loader used on most Linux distributions. It can load the Linux kernel or other operating systems, such as Windows, and can handle multiple kernel images and parameters as separate menu entries. Kernel selection at boot is done via a keyboard-driven interface, and there is a command-line interface for editing boot options and parameters.</p>
</div>
<div class="paragraph">
<p>Most Linux distributions install and configure GRUB (actually, GRUB 2) automatically, so a regular user does not need to think about that. However, as a system administrator, it is vital to know how to control the boot process so you can recover the system from a boot failure after a failed kernel upgrade, for example.</p>
</div>
<div class="paragraph">
<p>In this lesson you will learn about how to install, configure and interact with GRUB.</p>
</div>
<div class="sect2">
<h3 id="_grub_legacy_vs_grub_2">GRUB Legacy vs. GRUB 2</h3>
<div class="paragraph">
<p>The original version of GRUB (<em>Grand Unified Bootloader</em>), now known as <em>GRUB Legacy</em> was developed in 1995 as part of the GNU Hurd project, and later was adopted as the default boot loader of many Linux distributions, replacing earlier alternatives such as LILO.</p>
</div>
<div class="paragraph">
<p>GRUB 2 is a complete rewrite of GRUB aiming to be cleaner, safer, more robust, and more powerful. Among the many advantages over GRUB Legacy are a much more flexible configuration file (with many more commands and conditional statements, similar to a scripting language), a more modular design and better localization/internationalization.</p>
</div>
<div class="paragraph">
<p>There is also support for themes and graphical boot menus with splash screens, the ability to boot LiveCD ISOs directly from the hard drive, better support for non-x86 architectures, universal support for UUIDs (making it easier to identify disks and partitions) and much more.</p>
</div>
<div class="paragraph">
<p>GRUB Legacy is no longer under active development (the last release was 0.97, in 2005), and today most major Linux distributions install GRUB 2 as the default boot loader. However, you may still find systems using GRUB Legacy, so it is important to know how to use it and where it is different from GRUB 2.</p>
</div>
</div>
<div class="sect2">
<h3 id="_where_is_the_bootloader">Where is the Bootloader?</h3>
<div class="paragraph">
<p>Historically, hard disks on IBM PC compatible systems were partitioned using the MBR partitioning scheme, created in 1982 for IBM PC-DOS (MS-DOS) 2.0.</p>
</div>
<div class="paragraph">
<p>In this scheme, the first 512-byte sector of the disk is called the <em>Master Boot Record</em> and contains a table describing the partitions on the disk (the partition table) and also bootstrap code, called a bootloader.</p>
</div>
<div class="paragraph">
<p>When the computer is turned on, this very minimal (due to size restrictions) bootloader code is loaded, executed and passes control to a secondary boot loader on disk, usually located in a 32 KB space between the MBR and the first partition, which in turn will load the operating system(s).</p>
</div>
<div class="paragraph">
<p>On an MBR-partitioned disk, the boot code for GRUB is installed to the MBR. This loads and passes control to a &#8220;core&#8221; image installed between the MBR and the first partition. From this point, GRUB is capable of loading the rest of the needed resources (menu definitions, configuration files and extra modules) from disk.</p>
</div>
<div class="paragraph">
<p>However, MBR has limitations on the number of partitions (originally a maximum of 4 primary partitions, later a maximum of 3 primary partitions with 1 extended partition subdivided into a
number of logical partitions) and maximum disk sizes of 2 TB. To overcome these limitations a new partitioning scheme called GPT (<em>GUID Partition Table</em>), part of the UEFI (<em>Unified Extensible Firmware Interface</em>) standard, was created.</p>
</div>
<div class="paragraph">
<p>GPT-partitioned disks can be used either with computers with the traditional PC BIOS or ones with UEFI firmware. On machines with a BIOS, the second part of GRUB is stored in a special BIOS boot partition.</p>
</div>
<div class="paragraph">
<p>On systems with UEFI firmware, GRUB is loaded by the firmware from the files <code>grubia32.efi</code> (for 32-Bit systems) or <code>grubx64.efi</code> (for 64-Bit systems) from a partition called the ESP (<em>EFI System Partition</em>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_boot_partition">The <code>/boot</code> Partition</h3>
<div class="paragraph">
<p>On Linux the files necessary for the boot process are usually stored on a boot partition, mounted under the root file system and colloquially referred to as <code>/boot</code>.</p>
</div>
<div class="paragraph">
<p>A boot partition is not needed on current systems, as boot loaders such as GRUB can usually mount the root file system and look for the needed files inside a <code>/boot</code> directory, but it is good practice as it separates the files needed for the boot process from the rest of the filesystem.</p>
</div>
<div class="paragraph">
<p>This partition is usually the first one on the disk. This is because the original IBM PC BIOS addressed disks using <em>Cylinders</em>, <em>Heads</em> and <em>Sectors</em> (CHS), with a maximum of 1024 cylinders, 256 heads and 63 sectors, resulting in a maximum disk size of 528 MB (504 MB under MS-DOS). This means that anything past this mark would not be accessible, unless a different disk addressing scheme (like LBA, <em>Logical Block Addressing</em>) was used.</p>
</div>
<div class="paragraph">
<p>So for maximum compatibility, the <code>/boot</code> partition is usually located at the start of the disk and ends before cylinder 1024 (528 MB), ensuring that the machine will always be able to load the kernel. The recommended size for this partition on a current machine is 300 MB.</p>
</div>
<div class="paragraph">
<p>Other reasons for a separate <code>/boot</code> partition are encryption and compression since some methods may not be supported by GRUB 2 yet, or if you need to have the system root partition (<code>/</code>) formatted using an unsupported file system.</p>
</div>
<div class="sect3">
<h4 id="_contents_of_the_boot_partition">Contents of the Boot Partition</h4>
<div class="paragraph">
<p>The contents of the <code>/boot</code> partition may vary with system architecture or the boot loader in use, but on a x86-based system you will usually find the files below. Most of these are named with a <code>-VERSION</code> suffix, where <code>-VERSION</code> is the version of the corresponding Linux kernel. So, for example, a configuration file for the Linux kernel version <code>4.15.0-65-generic</code> would be called <code>config-4.15.0-65-generic</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Config file</dt>
<dd>
<p>This file, usually called <code>config-VERSION</code> (see example above), stores configuration parameters for the Linux kernel. This file is generated automatically when a new kernel is compiled or installed and <em>should not be</em> directly modified by the user.</p>
</dd>
<dt class="hdlist1">System map</dt>
<dd>
<p>This file is a look-up table matching symbol names (like variables or functions) to their corresponding position in memory. This is useful when debugging a kind of system failure known as a <em>kernel panic</em>, as it allows the user to know which variable or function was being called when the failure occurred. Like the config file, the name is usually <code>System.map-VERSION</code> (e.g. <code>System.map-4.15.0-65-generic</code>).</p>
</dd>
<dt class="hdlist1">Linux kernel</dt>
<dd>
<p>This is the operating system kernel proper. The name is usually <code>vmlinux-VERSION</code> (e.g. <code>vmlinux-4.15.0-65-generic</code>). You may also find the name <code>vmlinuz</code> instead of <code>vmlinux</code>, the <code>z</code> at the end meaning that the file has been compressed.</p>
</dd>
<dt class="hdlist1">Initial RAM disk</dt>
<dd>
<p>This is usually called <code>initrd.img-VERSION</code> and contains a minimal root file system loaded into a RAM disk, containing utilities and kernel modules needed so the kernel can mount the real root filesystem.</p>
</dd>
<dt class="hdlist1">Boot loader related files</dt>
<dd>
<p>On systems with GRUB installed, these are usually located on <code>/boot/grub</code> and include the GRUB configuration file (<code>/boot/grub/grub.cfg</code> for GRUB 2 or <code>/boot/grub/menu.lst</code> in case of GRUB Legacy), modules (in <code>/boot/grub/i386-pc</code>), translation files (in <code>/boot/grub/locale</code>) and fonts (in <code>/boot/grub/fonts</code>).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grub_2">GRUB 2</h3>
<div class="sect3">
<h4 id="_installing_grub_2">Installing GRUB 2</h4>
<div class="paragraph">
<p>GRUB 2 can be installed using the <code>grub-install</code> utility. If you have a non-booting system you will need to boot using a Live CD or rescue disc, find out which is the boot partition for your system, mount it and then run the utility.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The commands below assume that you are logged in as root. If not, first run <code>sudo su -</code> to &#8220;become&#8221; root. When finished, type <code>exit</code> to log out and return to a regular user.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The first disk on a system is usually the <em>boot device</em> and you may need to know whether there is a <em>boot partition</em> on the disk. This can be done with the <code>fdisk</code> utility. To list all the partitions on the first disk of your machine, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>fdisk -l /dev/sda</strong>
Disk /dev/sda: 111,8 GiB, 120034123776 bytes, 234441648 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x97f8fef5

Device     Boot    Start       End   Sectors   Size Id Type
/dev/sda1  *        2048   2000895   1998848   976M 83 Linux
/dev/sda2        2002942 234440703 232437762 110,9G  5 Extended
/dev/sda5        2002944  18008063  16005120   7,6G 82 Linux swap / Solaris
/dev/sda6       18010112 234440703 216430592 103,2G 83 Linux</pre>
</div>
</div>
<div class="paragraph">
<p>The boot partition is identified with the <code>*</code> under the boot column. In the example above, it is <code>/dev/sda1</code>.</p>
</div>
<div class="paragraph">
<p>Now, create a temporary directory under <code>/mnt</code> and mount the partition under it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>mkdir /mnt/tmp</strong>
# <strong>mount /dev/sda1 /mnt/tmp</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Then run <code>grub-install</code>, pointing it to the boot <em>device</em> (<em>not</em> the partition) and the directory where the boot partition is mounted. If your system does have a dedicated boot partition, the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>grub-install --boot-directory=/mnt/tmp /dev/sda1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>If you are installing to a system which does not have a boot partition, but just a <code>/boot</code> directory on the root filesystem, point <code>grub-install</code> to it. So, the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>grub-install --boot-directory=/boot /dev/sda1</strong></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_grub_2">Configuring GRUB 2</h4>
<div class="paragraph">
<p>The default configuration file for GRUB 2 is <code>/boot/grub/grub.cfg</code>. This file is automatically generated and manual editing is not recommended. To make changes to the GRUB configuration, you need to edit the file <code>/etc/default/grub</code> and then run the <code>update-grub</code> utility to generate a compliant file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>update-grub</code> is usually a shortcut to <code>grub-mkconfig -o /boot/grub/grub.cfg</code>, so they produce the same results.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are some options in the file <code>/etc/default/grub</code> that control the behaviour of GRUB 2, like the default kernel to boot, timeout, extra command line parameters, etc. The most important ones are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>GRUB_DEFAULT=</code></dt>
<dd>
<p>The default menu entry to boot. This can be a numeric value (like <code>0</code>, <code>1</code>, etc.), the name of a menu entry (like <code>debian</code>) or <code>saved</code>, which is used in conjunction with <code>GRUB_SAVEDEFAULT=</code>, explained below. Keep in mind that menu entries start at zero, so the first menu entry is <code>0</code>, the second is <code>1</code>, etc.</p>
</dd>
<dt class="hdlist1"><code>GRUB_SAVEDEFAULT=</code></dt>
<dd>
<p>If this option is set to <code>true</code> and <code>GRUB_DEFAULT=</code> is set to <code>saved</code>, then the default boot option will always be the last one selected in the boot menu.</p>
</dd>
<dt class="hdlist1"><code>GRUB_TIMEOUT=</code></dt>
<dd>
<p>The timeout, in seconds, before the default menu entry is selected. If set to <code>0</code> the system will boot the default entry without showing a menu. If set to <code>-1</code> the system will wait until the user selects an option, no matter how long it takes.</p>
</dd>
<dt class="hdlist1"><code>GRUB_CMDLINE_LINUX=</code></dt>
<dd>
<p>This lists command line options that will be added to entries for the Linux kernel.</p>
</dd>
<dt class="hdlist1"><code>GRUB_CMDLINE_LINUX_DEFAULT=</code></dt>
<dd>
<p>By default, two menu entries are generated for each Linux kernel, one with the default options and one entry for recovery. With this option you can add extra parameters that will be added only to the default entry.</p>
</dd>
<dt class="hdlist1"><code>GRUB_ENABLE_CRYPTODISK=</code></dt>
<dd>
<p>If set to <code>y</code>, commands like <code>grub-mkconfig</code>, <code>update-grub</code> and <code>grub-install</code> will look for encrypted disks and add the commands needed to access them during boot. This disables automatic booting (<code>GRUB_TIMEOUT=</code> with any value other than <code>-1</code>) because a passphrase is needed to decrypt the disks before they can be accessed.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_managing_menu_entries">Managing Menu Entries</h4>
<div class="paragraph">
<p>When <code>update-grub</code> is run, GRUB 2 will scan for kernels and operating systems on the machine and generate the corresponding menu entries on the <code>/boot/grub/grub.cfg</code> file. New entries can be manually added to the script files within the <code>/etc/grub.d</code> directory.</p>
</div>
<div class="paragraph">
<p>These files should be executable, and are processed in numerical order by <code>update-grub</code>. Therefore <code>05_debian_theme</code> is processed before <code>10_linux</code> and so on. Custom menu entries are usually added to the <code>40_custom</code> file.</p>
</div>
<div class="paragraph">
<p>The basic syntax for a menu entry is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>menuentry "Default OS" {
    set root=(hd0,1)
    linux /vmlinuz root=/dev/sda1 ro quiet splash
    initrd /initrd.img
}</pre>
</div>
</div>
<div class="paragraph">
<p>The first line always starts with <code>menuentry</code> and ends with <code>{</code>. The text between quotes will be shown as the entry label on the GRUB 2 boot menu.</p>
</div>
<div class="paragraph">
<p>The <code>set root</code> parameter defines the disk and partition where the root file system for the operating system is located. Please note that on GRUB 2 disks are numbered from zero, so <code>hd0</code> is the first disk (<code>sda</code> under Linux), <code>hd1</code> the second, and so on. Partitions, however, are numbered starting from one. In the example above the root file system is located at the first disk (<code>hd0</code>), first partition (<code>,1</code>), or <code>sda1</code>.</p>
</div>
<div class="paragraph">
<p>Instead of directly specifying the device and partition you can also have GRUB 2 search for a file system with a specific label or UUID (<em>Universally Unique Identifier</em>). For that, use the parameter <code>search --set=root</code> followed by the <code>--label</code> parameter and file system label to search for, or <code>--fs-uuid</code> followed by the UUID of the file system.</p>
</div>
<div class="paragraph">
<p>You can find the UUID of a filesystem with the command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /dev/disk/by-uuid/</strong>
total 0
lrwxrwxrwx 1 root root 10 nov  4 08:40 3e0b34e2-949c-43f2-90b0-25454ac1595d -> ../../sda5
lrwxrwxrwx 1 root root 10 nov  4 08:40 428e35ee-5ad5-4dcb-adca-539aba6c2d84 -> ../../sda6
lrwxrwxrwx 1 root root 10 nov  5 19:10 56C11DCC5D2E1334 -> ../../sdb1
lrwxrwxrwx 1 root root 10 nov  4 08:40 ae71b214-0aec-48e8-80b2-090b6986b625 -> ../../sda1</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, the UUID for <code>/dev/sda1</code> is <code>ae71b214-0aec-48e8-80b2-090b6986b625</code>. Should you wish to set it as the root device for GRUB 2, the command would be <code>search --set=root --fs-uuid ae71b214-0aec-48e8-80b2-090b6986b625</code>.</p>
</div>
<div class="paragraph">
<p>When using the <code>search</code> command it is common to add the <code>--no-floppy</code> parameter so GRUB will not waste time searching on floppy disks.</p>
</div>
<div class="paragraph">
<p>The <code>linux</code> line indicates where the kernel for the operating system is located (in this case, the <code>vmlinuz</code> file at the root of the file system). After that, you can pass command line parameters to the kernel.</p>
</div>
<div class="paragraph">
<p>In the example above we specified the root partition (<code>root=/dev/sda1</code>) and passed three kernel parameters: the root partition should be mounted read-only (<code>ro</code>), most of the log messages should be disabled (<code>quiet</code>) and a splash screen should be shown (<code>splash</code>).</p>
</div>
<div class="paragraph">
<p>The <code>initrd</code> line indicates where the initial RAM disk is located. In the example above the file is <code>initrd.img</code>, located at the root of the file system.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Most Linux distributions do not actually put the kernel and initrd at the root directory of the root file system. Instead, these are links to the actual files inside the <code>/boot</code> directory or partition.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The last line of a menu entry should contain only the character <code>}</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_interacting_with_grub_2">Interacting with GRUB 2</h4>
<div class="paragraph">
<p>When booting a system with GRUB 2 you will see a menu of options. Use the arrow keys to select an option and <kbd>Enter</kbd> to confirm and boot the selected entry.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you see just a countdown, but not a menu, press <kbd>Shift</kbd> to bring up the menu.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To edit an option, select it with the arrow keys and press <kbd>E</kbd>. This will show an editor window with the contents of the <code>menuentry</code> associated with that option, as defined in <code>/boot/grub/grub.cfg</code>.</p>
</div>
<div class="paragraph">
<p>After editing an option, type <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>X</kbd></span> or <kbd>F10</kbd> to boot, or <kbd>Esc</kbd> to return to the menu.</p>
</div>
<div class="paragraph">
<p>To enter the GRUB 2 shell, press <kbd>C</kbd> on the menu screen (or <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>) on the editing window). You will see a command prompt like this: <code>grub &gt;</code></p>
</div>
<div class="paragraph">
<p>Type <code>help</code> to see a list of all available commands, or press <kbd>Esc</kbd> to exit the shell and return to the menu screen.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remember this menu will not appear if <code>GRUB_TIMEOUT</code> is set to <code>0</code> in <code>/etc/default/grub</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_booting_from_the_grub_2_shell">Booting from the GRUB 2 Shell</h4>
<div class="paragraph">
<p>You can use the GRUB 2 shell to boot the system in case a misconfiguration in a menu entry causes it to fail.</p>
</div>
<div class="paragraph">
<p>The first thing you should do is find out where the boot partition is. You can do that with the command <code>ls</code>, which will show you a list of the partitions and disks GRUB 2 has found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>ls</strong>
(proc) (hd0) (hd0,msdos1)</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, things are easy. There is only one disk <code>(hd0)</code> with only one partition on it: <code>(hd0,msdos1)</code>.</p>
</div>
<div class="paragraph">
<p>The disks and partitions listed will be different in your system. In our example the first partition of <code>hd0</code> is called <code>msdos1</code> because the disk was partitioned using the MBR partitioning scheme. If it were partitioned using GPT, the name would be <code>gpt1</code>.</p>
</div>
<div class="paragraph">
<p>To boot Linux, we need a kernel and initial RAM disk (initrd). Let us check the contents of <code>(hd0,msdos1)</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>ls (hd0,msdos1)/</strong>
lost+found/ swapfile etc/ media/ bin/ boot/ dev/ home/ lib/ lib64/ mnt/ opt/ proc/ root/ run/ sbin/ srv/ sys/ tmp/ usr/ var/ initrd.img initrd.img.old vmlinuz cdrom/</pre>
</div>
</div>
<div class="paragraph">
<p>You can add the <code>-l</code> parameter to <code>ls</code> to get a long listing, similar to what you would get on a Linux terminal. Use <kbd>Tab</kbd> to autocomplete disk, partition and file names.</p>
</div>
<div class="paragraph">
<p>Note that we have a kernel (<code>vmlinuz</code>) and initrd (<code>initrd.img</code>) images right on the root directory. If not, we could check the contents of <code>/boot</code> with <code>list (hd0,msdos1)/boot/</code>.</p>
</div>
<div class="paragraph">
<p>Now, set the boot partition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>set root=(hd0,msdos1)</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Load the Linux kernel with the <code>linux</code> command, followed by the path to the kernel and the <code>root=</code> option to tell the kernel where the root filesystem for the operating system is located.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>linux /vmlinuz root=/dev/sda1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Load the initial RAM disk with <code>initrd</code>, followed by the full path to the <code>initrd.img</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>initrd /initrd.img</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now, boot the system with <code>boot</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_booting_from_the_rescue_shell">Booting from the Rescue Shell</h4>
<div class="paragraph">
<p>In case of a boot failure GRUB 2 may load a rescue shell, a simplified version of the shell we mentioned before. You will recognize it by the command prompt, which displays as <code>grub rescue&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The process to boot a system from this shell is almost the same as shown before. However, you will need to load a few GRUB 2 modules to make things work.</p>
</div>
<div class="paragraph">
<p>After finding out which partition is the boot partition (with <code>ls</code>, as shown before), use the <code>set prefix=</code> command, followed by the full path to the directory containing the GRUB 2 files. Usually <code>/boot/grub</code>. In our example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub rescue> <strong>set prefix=(hd0,msdos1)/boot/grub</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now, load the modules <code>normal</code> and <code>linux</code> with the <code>insmod</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub rescue> <strong>insmod normal</strong>
grub rescue> <strong>insmod linux</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Next, set the boot partition with <code>set root=</code> as directed before, load the linux kernel (with <code>linux</code>), the initial RAM disk (<code>initrd</code>) and try to boot with <code>boot</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_grub_legacy">GRUB Legacy</h3>
<div class="sect3">
<h4 id="_installing_grub_legacy_from_a_running_system">Installing GRUB Legacy from a Running System</h4>
<div class="paragraph">
<p>To install GRUB Legacy on a disk from a running system we will use the <code>grub-install</code> utility. The basic command is <code>grub-install DEVICE</code> where <code>DEVICE</code> is the disk where you wish to install GRUB Legacy. An example would be <code>/dev/sda</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>grub-install /dev/sda</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you need to specify the <em>device</em> where GRUB Legacy will be installed, like <code>/dev/sda/</code>, <em>not the partition</em> as in <code>/dev/sda1</code>.</p>
</div>
<div class="paragraph">
<p>By default GRUB will copy the needed files to the <code>/boot</code> directory on the specified device. If you wish to copy them to another directory, use the <code>--boot-directory=</code> parameter, followed by the full path to where the files should be copied to.</p>
</div>
</div>
<div class="sect3">
<h4 id="_installing_grub_legacy_from_a_grub_shell">Installing GRUB Legacy from a GRUB Shell</h4>
<div class="paragraph">
<p>If you cannot boot the system for some reason and need to reinstall GRUB Legacy, you can do so from the GRUB shell on a GRUB Legacy boot disk.</p>
</div>
<div class="paragraph">
<p>From the GRUB shell (type <code>c</code> at the boot menu to get to the <code>grub&gt;</code> prompt), the first step is to set the boot device, which contains the <code>/boot</code> directory. For example, if this directory is in the first partition of the first disk, the command would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>root (hd0,0)</strong></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not know which device contains the <code>/boot</code> directory, you can ask GRUB to search for it with the <code>find</code> command, like below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>find /boot/grub/stage1</strong>
 (hd0,0)</pre>
</div>
</div>
<div class="paragraph">
<p>Then, set the boot partition as instructed above and use the <code>setup</code> command to install GRUB Legacy to the MBR and copy the needed files to the disk:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>setup (hd0)</strong></pre>
</div>
</div>
<div class="paragraph">
<p>When finished reboot the system and it should boot normally.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_grub_legacy_menu_entries_and_settings">Configuring GRUB Legacy Menu Entries and Settings</h4>
<div class="paragraph">
<p>GRUB Legacy menu entries and settings are stored in the file <code>/boot/grub/menu.lst</code>. This is a simple text file with a list of commands and parameters, which can be edited directly with your favourite text editor.</p>
</div>
<div class="paragraph">
<p>Lines starting with <code>#</code> are considered comments, and blank lines are ignored.</p>
</div>
<div class="paragraph">
<p>A menu entry has at least three commands. The first one, <code>title</code>, sets the title of the operating system on the menu screen. The second one, <code>root</code>, tells GRUB Legacy which device or partition to boot from.</p>
</div>
<div class="paragraph">
<p>The third entry, <code>kernel</code>, specifies the full path to the kernel image that should be loaded when the corresponding entry is selected. Note that this path is relative to the device specified on the <code>root</code> parameter.</p>
</div>
<div class="paragraph">
<p>A simple example follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># This line is a comment
title My Linux Distribution
root (hd0,0)
kernel /vmlinuz root=/dev/hda1</pre>
</div>
</div>
<div class="paragraph">
<p>Unlike GRUB 2, in GRUB Legacy both disks <em>and</em> partitions are numbered from zero. So, the command <code>root (hd0,0)</code> will set the boot partition as the first partition (<code>0</code>) of the first disk (<code>hd0</code>).</p>
</div>
<div class="paragraph">
<p>You can omit the <code>root</code> statement if you specify the boot device before the path on the <code>kernel</code> command. The syntax is the same, so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kernel (hd0,0)/vmlinuz root=dev/hda1</pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>root (hd0,0)
kernel /vmlinuz root=/dev/hda1</pre>
</div>
</div>
<div class="paragraph">
<p>Both will load the file <code>vmlinuz</code> from the root directory (<code>/</code>) of the first partition of the first disk (<code>hd0,0</code>).</p>
</div>
<div class="paragraph">
<p>The parameter <code>root=/dev/hda1</code> after the <code>kernel</code> command tells the Linux kernel which partition should be used as the root filesystem. This is a Linux kernel parameter, not a GRUB Legacy command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>To learn more about kernel parameters, see <a href="https://www.kernel.org/doc/html/v4.14/admin-guide/kernel-parameters.html" class="bare">https://www.kernel.org/doc/html/v4.14/admin-guide/kernel-parameters.html</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You may need to specify the location of the initial RAM Disk image for the operating system with the <code>initrd</code> parameter. The full path to the file can be specified like in the <code>kernel</code> parameter, and you can also specify a device or partition before the path, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># This line is a comment
title My Linux Distribution
root (hd0,0)
kernel /vmlinuz root=/dev/hda1
initrd /initrd.img</pre>
</div>
</div>
<div class="paragraph">
<p>GRUB Legacy has a modular design, where modules (usually stored as <code>.mod</code> files in <code>/boot/grub/i386-pc</code>) can be loaded to add extra features, like support for unusual hardware, filesystems or new compression algorithms.</p>
</div>
<div class="paragraph">
<p>Modules are loaded using the <code>module</code> command, followed by the full path to the corresponding <code>.mod</code> file. Keep in mind that, like kernels and initrd images, this path is relative to the device specified in the <code>root</code> command.</p>
</div>
<div class="paragraph">
<p>The example below will load the module <code>915resolution</code>, needed to correctly set the framebuffer resolution on systems with Intel 800 or 900 series video chipsets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>module /boot/grub/i386-pc/915resolution.mod</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_chainloading_other_operating_systems">Chainloading other Operating Systems</h4>
<div class="paragraph">
<p>GRUB Legacy can be used to load unsupported operating systems, like Windows, using a process called <em>chainloading</em>. GRUB Legacy is loaded first, and when the corresponding option is selected the bootloader for the desired system is loaded.</p>
</div>
<div class="paragraph">
<p>A typical entry for chainloading Windows would look like the one below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Load Windows
title Windows XP
root (hd0,1)
makeactive
chainload +1
boot</pre>
</div>
</div>
<div class="paragraph">
<p>Let us walk through each parameter. As before, <code>root (hd0,1)</code> specifies the device and partition where the boot loader for the operating system we wish to load is located. In this example, the <em>second</em> partition of the first disk.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>makeactive</code></dt>
<dd>
<p>will set a flag indicating that this is an active partition. This only works on DOS primary partitions.</p>
</dd>
<dt class="hdlist1"><code>chainload +1</code></dt>
<dd>
<p>tells GRUB to load the first sector of the boot partition. This is where bootloaders are usually located.</p>
</dd>
<dt class="hdlist1"><code>boot</code></dt>
<dd>
<p>will run the bootloader and load the corresponding operating system.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What is the default location for the GRUB 2 configuration file?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What are the steps needed to change the settings for GRUB 2?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Into which file should custom GRUB 2 menu entries be added?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Where are the menu entries for GRUB Legacy stored?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>From a GRUB 2 or GRUB Legacy menu, how can you enter the GRUB Shell?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Imagine a user configuring GRUB Legacy to boot from the second partition of the first disk. He writes the following custom menu entry:</p>
<div class="listingblock">
<div class="content">
<pre>title My Linux Distro
root (hd0,2)
kernel /vmlinuz root=/dev/hda1
initrd /initrd.img</pre>
</div>
</div>
<div class="paragraph">
<p>However, the system will not boot. What is wrong?</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Imagine you have a disk identified as <code>/dev/sda</code> with multiple partitions. Which command can be used to find out which is the boot partition on a system?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Which command can be used to find out the UUID of a partition?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Consider the following entry for GRUB 2</p>
<div class="listingblock">
<div class="content">
<pre>menuentry "Default OS" {
    set root=(hd0,1)
    linux /vmlinuz root=/dev/sda1 ro quiet splash
    initrd /initrd.img
}</pre>
</div>
</div>
<div class="paragraph">
<p>Change it so the system will boot from a disk with the UUID <code>5dda0af3-c995-481a-a6f3-46dcd3b6998d</code></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How can you set GRUB 2 to wait for 10 seconds before booting the default menu entry?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>From a GRUB Legacy shell, what are the commands to install GRUB to the first partition of the second disk?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson we learned</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What is a boot loader.</p>
</li>
<li>
<p>The differences between GRUB Legacy and GRUB 2.</p>
</li>
<li>
<p>What is a boot partition, and what are its contents.</p>
</li>
<li>
<p>How to install GRUB Legacy and GRUB 2.</p>
</li>
<li>
<p>How to configure GRUB Legacy and GRUB 2.</p>
</li>
<li>
<p>How to add custom menu entries to GRUB Legacy and GRUB 2.</p>
</li>
<li>
<p>How to interact with the menu screen and console of GRUB Legacy and GRUB 2.</p>
</li>
<li>
<p>How to boot a system from a GRUB Legacy or GRUB 2 shell or rescue shell.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following commands were discussed in this lesson:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>grub-install</code></p>
</li>
<li>
<p><code>update-grub</code></p>
</li>
<li>
<p><code>grub-mkconfig</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What is the default location for the GRUB 2 configuration file?</p>
<div class="paragraph">
<p><code>/boot/grub/grub.cfg</code></p>
</div>
</li>
<li>
<p>What are the steps needed to change the settings for GRUB 2?</p>
<div class="paragraph">
<p>Make your changes to the file <code>/etc/default/grub</code>, then update the configuration with <code>update-grub</code>.</p>
</div>
</li>
<li>
<p>Into which file should custom GRUB 2 menu entries be added?</p>
<div class="paragraph">
<p><code>/etc/grub.d/40_custom</code></p>
</div>
</li>
<li>
<p>Where are the menu entries for GRUB Legacy stored?</p>
<div class="paragraph">
<p><code>/boot/grub/menu.lst</code></p>
</div>
</li>
<li>
<p>From a GRUB 2 or GRUB Legacy menu, how can you enter the GRUB Shell?</p>
<div class="paragraph">
<p>Press <code>c</code> in the menu screen.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.102.2_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Imagine a user configuring GRUB Legacy to boot from the second partition of the first disk. He writes the following custom menu entry:</p>
<div class="listingblock">
<div class="content">
<pre>title My Linux Distro
root (hd0,2)
kernel /vmlinuz root=/dev/hda1
initrd /initrd.img</pre>
</div>
</div>
<div class="paragraph">
<p>However, the system will not boot. What is wrong?</p>
</div>
<div class="paragraph">
<p>The boot partition is wrong. Remember that, unlike GRUB 2, GRUB Legacy counts the partitions from <em>zero</em>. So, the correct command for the second partition of the first disk should be <code>root (hd0,1)</code>.</p>
</div>
</li>
<li>
<p>Imagine you have a disk identified as <code>/dev/sda</code> with multiple partitions. Which command can be used to find out which is the boot partition on a system?</p>
<div class="paragraph">
<p>Use <code>fdisk -l /dev/sda</code>. The boot partition will be marked with an asterisk (<code>*</code>) in the listing.</p>
</div>
</li>
<li>
<p>Which command can be used to find out the UUID of a partition?</p>
<div class="paragraph">
<p>Use <code>ls -la /dev/disk/by-uuid/</code> and look for the UUID that points to the partition.</p>
</div>
</li>
<li>
<p>Consider the following entry for GRUB 2</p>
<div class="listingblock">
<div class="content">
<pre>menuentry "Default OS" {
    set root=(hd0,1)
    linux /vmlinuz root=/dev/sda1 ro quiet splash
    initrd /initrd.img
}</pre>
</div>
</div>
<div class="paragraph">
<p>Change it so the system will boot from a disk with the UUID <code>5dda0af3-c995-481a-a6f3-46dcd3b6998d</code></p>
</div>
<div class="paragraph">
<p>You will need to change the <code>set root</code> statement. Instead of specifying a disk and partition, tell grub to search for the partition with the desired UUID.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>menuentry "Default OS" {
    search --set=root --fs-uuid 5dda0af3-c995-481a-a6f3-46dcd3b6998d
    linux /vmlinuz root=/dev/sda1 ro quiet splash
    initrd /initrd.img
}</pre>
</div>
</div>
</li>
<li>
<p>How can you set GRUB 2 to wait for 10 seconds before booting the default menu entry?</p>
<div class="paragraph">
<p>Add the parameter <code>GRUB_TIMEOUT=10</code> to <code>/etc/default/grub</code>.</p>
</div>
</li>
<li>
<p>From a GRUB Legacy shell, what are the commands to install GRUB to the first partition of the second disk?</p>
<div class="listingblock">
<div class="content">
<pre>grub> <strong>root (hd1,0)</strong>
grub> <strong>setup (hd1)</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">102.3 Manage shared libraries (102.3 Lesson 1)</p>

        <div class="button-group">
            <a href="../../102.3/102.3_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
