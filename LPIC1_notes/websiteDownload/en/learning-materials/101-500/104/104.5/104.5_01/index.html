

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>104.5 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">104.5 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../102/102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.2/index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.2/102.2_01/index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../103/103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.2/index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.2/103.2_01/index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.4/index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.4/103.4_01/index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.4/103.4_02/index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.5/index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.5/103.5_01/index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.5/103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../../103/103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../103/103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../103/103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">104.5 Manage file permissions and ownership</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">104.5 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>104.5 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">104 Devices, Linux Filesystems, Filesystem Hierarchy Standard</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">104.5 Manage file permissions and ownership</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Being a multi-user system, Linux needs some way to track who owns each file and whether or not a user is allowed to perform actions on a file. This is to ensure the privacy of users who might want to keep the contents of their files confidential, as well as to ensure collaboration by making certain files accessible to multiple users.</p>
</div>
<div class="paragraph">
<p>This is done through a three-level permissions system. Every file on disk is owned by a user and a user group and has three sets of permissions: one for its owner, one for the group who owns the file and one for everyone else. In this lesson, you will learn how to query the permissions for a file, the meaning of these permissions and how to manipulate them.</p>
</div>
<div class="sect2">
<h3 id="sec.104.5_01-QI">Querying Information about Files and Directories</h3>
<div class="paragraph">
<p>The command <code>ls</code> is used to get a listing of the contents of any directory. In this basic form, all you get are the filenames:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls</strong>
Another_Directory  picture.jpg  text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>But there is much more information available for each file, including its type, size, ownership and more. To see this information you must ask <code>ls</code> for a &#8220;long form&#8221; listing, using the <code>-l</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l</strong>
total 536
drwxrwxr-x 2 carol carol   4096 Dec 10 15:57 Another_Directory
-rw------- 1 carol carol 539663 Dec 10 10:43 picture.jpg
-rw-rw-r-- 1 carol carol   1881 Dec 10 15:57 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Each column on the output above has a meaning. Let us have a look at the columns relevant for this lesson.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>first</em> column on the listing shows the file type and permissions. For example, on <code>drwxrwxr-x</code>:</p>
<div class="ulist">
<ul>
<li>
<p>The first character, <code>d</code>, indicates the file type.</p>
</li>
<li>
<p>The next three characters, <code>rwx</code>, indicate the permissions for the owner of the file, also referred to as <em>user</em> or <code>u</code>.</p>
</li>
<li>
<p>The next three characters, <code>rwx</code>, indicate the permissions of the <em>group</em> owning the file, also referred to as <code>g</code>.</p>
</li>
<li>
<p>The last three characters, <code>r-x</code>, indicate the permissions for anyone else, also known as <em>others</em> or <code>o</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is also common to hear the <em>others</em> permission set referred to as <em>world</em> permissions, as in &#8220;Everyone else in the world has these permissions&#8221;.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>third</em> and <em>fourth</em> columns show ownership information: respectively the user and group that own the file.</p>
</li>
<li>
<p>The <em>seventh</em> and last column shows the file name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>second</em> column indicates the number of hard links pointing to that file. The <em>fifth</em> column shows the filesize. The <em>sixth</em> column shows the date and time the file was last modified. But these columns are not relevant for the current topic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_about_directories">What about Directories?</h3>
<div class="paragraph">
<p>If you try to query information about a directory using <code>ls -l</code>, it will show you a listing of the directory&#8217;s contents instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l Another_Directory/</strong>
total 0
-rw-r--r-- 1 carol carol 0 Dec 10 17:59 another_file.txt</pre>
</div>
</div>
<div class="paragraph">
<p>To avoid this and query information about the directory itself, add the <code>-d</code> parameter to <code>ls</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l -d Another_Directory/</strong>
drwxrwxr-x 2 carol carol 4096 Dec 10 17:59 Another_Directory/</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_viewing_hidden_files">Viewing Hidden Files</h3>
<div class="paragraph">
<p>The directory listing we have retrieved using <code>ls -l</code> before is incomplete:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l</strong>
total 544
drwxrwxr-x 2 carol carol   4096 Dec 10 17:59 Another_Directory
-rw------- 1 carol carol 539663 Dec 10 10:43 picture.jpg
-rw-rw-r-- 1 carol carol   1881 Dec 10 15:57 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>There are three other files in that directory, but they are hidden. On Linux, files whose name starts with a period (<code>.</code>) are automatically hidden. To see them we need to add the <code>-a</code> parameter to <code>ls</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l -a</strong>
total 544
drwxrwxr-x 3 carol carol   4096 Dec 10 16:01 .
drwxrwxr-x 4 carol carol   4096 Dec 10 15:56 ..
drwxrwxr-x 2 carol carol   4096 Dec 10 17:59 Another_Directory
-rw------- 1 carol carol 539663 Dec 10 10:43 picture.jpg
-rw-rw-r-- 1 carol carol   1881 Dec 10 15:57 text.txt
-rw-r--r-- 1 carol carol      0 Dec 10 16:01 .thisIsHidden</pre>
</div>
</div>
<div class="paragraph">
<p>The file <code>.thisIsHidden</code> is simply hidden because its name starts with <code>.</code>.</p>
</div>
<div class="paragraph">
<p>The directories <code>.</code> and <code>..</code> however are special. <code>.</code> is a pointer to the current directory. And <code>..</code> is a pointer to the parent directory, the one which contains the current one. In Linux, every directory contains at least these two directories.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can combine multiple parameters for <code>ls</code> (and many other Linux commands). <code>ls -l -a</code> can, for example, be written as <code>ls -la</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_filetypes">Understanding Filetypes</h3>
<div class="paragraph">
<p>We have already mentioned that the first letter in each output of <code>ls -l</code> describes the type of the file. The three most common file types are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-</code> (normal file)</dt>
<dd>
<p>A file can contain data of any kind and help to manage this data. Files can be modified, moved, copied and deleted.</p>
</dd>
<dt class="hdlist1"><code>d</code> (directory)</dt>
<dd>
<p>A directory contains other files or directories and helps to organize the file system. Technically, directories are a special kind of file.</p>
</dd>
<dt class="hdlist1"><code>l</code> (symbolic link)</dt>
<dd>
<p>This &#8220;file&#8221; is a pointer to another file or directory elsewhere in the filesystem.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In addition to these, there are three other file types that you should at least know about, but are out of scope for this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>b</code> (block device)</dt>
<dd>
<p>This file stands for a virtual or physical device, usually disks or other kinds of storage devices, such as the first hard disk which might be represented by <code>/dev/sda</code>.</p>
</dd>
<dt class="hdlist1"><code>c</code> (character device)</dt>
<dd>
<p>This file stands for a virtual or physical device. Terminals (like the main terminal on <code>/dev/ttyS0</code>) and serial ports are common examples of character devices.</p>
</dd>
<dt class="hdlist1"><code>s</code> (socket)</dt>
<dd>
<p>Sockets serve as &#8220;conduits&#8221; passing information between two programs.</p>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Do not alter any of the permissions on block devices, character devices or sockets, unless you know what you are doing. This may prevent your system from working!</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_understanding_permissions">Understanding Permissions</h3>
<div class="paragraph">
<p>In the output of <code>ls -l</code> the file permissions are shown right after the filetype, as three groups of three characters each, in the order <code>r</code>, <code>w</code> and <code>x</code>. Here is what they mean. Keep in mind that a dash <code>-</code> represents the lack of a permission.</p>
</div>
<div class="sect3">
<h4 id="_permissions_on_files">Permissions on Files</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>r</code></dt>
<dd>
<p>Stands for <em>read</em> and has an octal value of <code>4</code> (do not worry, we will discuss octals shortly). This means permission to open a file and read its contents.</p>
</dd>
<dt class="hdlist1"><code>w</code></dt>
<dd>
<p>Stands for <em>write</em> and has an octal value of <code>2</code>. This means permission to edit or delete a file.</p>
</dd>
<dt class="hdlist1"><code>x</code></dt>
<dd>
<p>Stands for <em>execute</em> and has an octal value of <code>1</code>. This means that the file can be run as an executable or script.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>So, for example, a file with permissions <code>rw-</code> can be read and written to, but cannot be executed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_permissions_on_directories">Permissions on Directories</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>r</code></dt>
<dd>
<p>Stands for <em>read</em> and has an octal value of <code>4</code>. This means permission to read the directory&#8217;s contents, like filenames. But it <em>does not</em> imply permission to read the files themselves.</p>
</dd>
<dt class="hdlist1"><code>w</code></dt>
<dd>
<p>Stands for <em>write</em> and has an octal value of <code>2</code>. This means permission to create or delete files in a directory, or change their names, permissions and owners.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If a user has the <code>w</code> permission on a directory, the user can change permissions of any file in the directory (the <em>contents</em> of the directory), even if the user has no permissions on the file or if the file is owned by another user.</p>
</div>
<div class="paragraph">
<p>Keep in mind that having write permissions on a directory or file does not mean you have the permission to remove or rename the directory or file itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>x</code></dt>
<dd>
<p>Stands for <em>execute</em> and has an octal value of <code>1</code>. This means permission to enter a directory, but not to list its files (for that <code>r</code> is needed).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The last bit about directories may sound a bit confusing. Let us imagine, for example, that you have a directory named <code>Another_Directory</code>, with the following permissions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -ld Another_Directory/</strong>
d--x--x--x 2 carol carol 4,0K Dec 20 18:46 Another_Directory</pre>
</div>
</div>
<div class="paragraph">
<p>Also imagine that inside this directory you have a shell script called <code>hello.sh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-rwxr-xr-x 1 carol carol 33 Dec 20 18:46 hello.sh</pre>
</div>
</div>
<div class="paragraph">
<p>If you are the user <code>carol</code> and try to list the contents of <code>Another_Directory</code>, you will get an error message, as your user lacks read permission for that directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l Another_Directory/</strong>
ls: cannot open directory 'Another_Directory/': Permission denied</pre>
</div>
</div>
<div class="paragraph">
<p>However, the user <code>carol</code> <em>does have</em> execute permissions, which means that she can enter the directory. Therefore, the user <code>carol</code> can access files inside the directory, as long as she has the correct permissions <em>for the respective file</em>. Let us assume the user has full permissions (<code>rwx</code>) for the script <code>hello.sh</code>. Then she <em>can</em> run the script, even though she <em>cannot</em> read the contents of the directory containing it if she knows the complete filename:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sh Another_Directory/hello.sh</strong>
Hello LPI World!</pre>
</div>
</div>
<div class="paragraph">
<p>As we said before, permissions are specified in sequence: first for the owner of the file, then for the owning group, and then for other users. Whenever someone tries to perform an action on the file, the permissions are checked in the same fashion.</p>
</div>
<div class="paragraph">
<p>First the system checks if the current user owns the file, and if this is true it applies the first set of permissions only. Otherwise, it checks if the current user belongs to the group owning the file. In that case, it applies the second set of permissions only. In any other case, the system will apply the third set of permissions.</p>
</div>
<div class="paragraph">
<p>This means that if the current user is the owner of the file, only the owner permissions are effective, even if the group or other permissions are more permissive than the owner’s permissions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sec.104.5_01-MP">Modifying File Permissions</h3>
<div class="paragraph">
<p>The command <code>chmod</code> is used to modify the permissions for a file, and takes at least two parameters: the first one describes which permissions to change, and the second one points to the file or directory where the change will be made. Keep in mind that only the owner of the file, or the system administrator (root) can change the permissions on a file.</p>
</div>
<div class="paragraph">
<p>The permissions to change can be described in two different ways, or &#8220;modes&#8221;.</p>
</div>
<div class="paragraph">
<p>The first one, called <em>symbolic mode</em> offers fine grained control, allowing you to add or revoke a single permission without modifying others on the set. The other mode, called <em>octal mode</em>, is easier to remember and quicker to use if you wish to set all permission values at once.</p>
</div>
<div class="paragraph">
<p>Both modes will lead to the same end result. So, for example, the commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod ug+rw-x,o-rwx text.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 660 text.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>will produce exactly the same output, a file with the permissions set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-rw-rw---- 1 carol carol  765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us see how each mode works.</p>
</div>
<div class="sect3">
<h4 id="_symbolic_mode">Symbolic Mode</h4>
<div class="paragraph">
<p>When describing which permissions to change in <em>symbolic mode</em> the first character(s) indicate(s) whose permissions you will alter: the ones for the user (<code>u</code>), for the group (<code>g</code>), for others (<code>o</code>) and/or for everyone (<code>a</code>).</p>
</div>
<div class="paragraph">
<p>Then you need to tell the command what to do: you can grant a permission (<code>+</code>), revoke a permission (<code>-</code>), or set it to a specific value (<code>=</code>).</p>
</div>
<div class="paragraph">
<p>Lastly, you specify which permission you wish to act on: read (<code>r</code>), write (<code>w</code>), or execute (<code>x</code>).</p>
</div>
<div class="paragraph">
<p>For example, imagine we have a file called <code>text.txt</code> with the following permission set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l text.txt</strong>
-rw-r--r-- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>If you wish to grant write permissions to members of the group owning the file, you would use the <code>g+w</code> parameter. It is easier if you think about it this way: &#8220;For the group (<code>g</code>), grant (<code>+</code>) write permissions (<code>w</code>)&#8221;. So, the command would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod g+w text.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Let us check the result with <code>ls</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l text.txt</strong>
-rw-rw-r-- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Do you wish to remove read permissions for the owner of the same file? Think about it as: &#8220;For the user (<code>u</code>), revoke (<code>-</code>) read permissions (<code>r</code>)&#8221;. So the parameter is <code>u-r</code>, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod u-r text.txt</strong>
$ <strong>ls -l text.txt</strong>
--w-rw-r-- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>What if we want to set the permissions exactly as <code>rw-</code> for everyone? Then think of it as: &#8220;For all (<code>a</code>), set exactly (<code>=</code>) read (<code>r</code>), write (<code>w</code>), and no execute (<code>-</code>)&#8221;. So:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod a=rw- text.txt</strong>
$ <strong>ls -l text.txt</strong>
-rw-rw-rw- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Of course, it is possible to modify multiple permissions at the same time. In this case, separate them with a comma (<code>,</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod u+rwx,g-x text.txt</strong>
$ <strong>ls -lh text.txt</strong>
-rwxrw-rw- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The example above can be read as: &#8220;For the user (<code>u</code>), grant (<code>+</code>) read, write and execute (<code>rwx</code>) permissions, for the group (<code>g</code>), revoke (<code>-</code>) execute permissions (<code>x</code>)&#8221;.</p>
</div>
<div class="paragraph">
<p>When run on a directory, <code>chmod</code> modifies only the directory&#8217;s permissions. <code>chmod</code> also has a recursive mode, which is useful for when you want to change the permissions for &#8220;all files inside a directory and its subdirectories&#8221;. To use this, add the parameter <code>-R</code> after the command name, before the permissions to change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod -R u+rwx Another_Directory/</strong></pre>
</div>
</div>
<div class="paragraph">
<p>This command can be read as: &#8220;Recursively (<code>-R</code>), for the user (<code>u</code>), grant (<code>+</code>) read, write and execute (<code>rwx</code>) permissions&#8221;.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Be careful and think twice before using the <code>-R</code> switch, as it is easy to change permissions on files and directories which you do not want to change, especially on directories with a large number of files and subdirectories.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_octal_mode">Octal Mode</h4>
<div class="paragraph">
<p>In <em>octal mode</em>, the permissions are specified in a different way: as a three-digit value on octal notation, a base-8 numeric system.</p>
</div>
<div class="paragraph">
<p>Each permission has a corresponding value, and they are specified in the following order: first comes read (<code>r</code>), which is <code>4</code>, then write (<code>w</code>), which is <code>2</code> and last is execute (<code>x</code>), represented by <code>1</code>. If there is no permission, use the value zero (<code>0</code>). So, a permission of <code>rwx</code> would be <code>7</code> (<code>4+2+1</code>) and <code>r-x</code> would be <code>5</code> (<code>4+0+1</code>).</p>
</div>
<div class="paragraph">
<p>The first of the three digits on the permission set represents the permissions for the user (<code>u</code>), the second for the group (<code>g</code>) and the third for others (<code>o</code>). If we wanted to set the permissions for a file to <code>rw-rw----</code>, the octal value would be <code>660</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 660 text.txt</strong>
$ <strong>ls -l text.txt</strong>
-rw-rw---- 1 carol carol 765 Dec 20 21:25 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Besides this, the syntax in <em>octal mode</em> is the same as in <em>symbolic mode</em>, the first parameter represents the permissions you wish to change, and the second parameter points to the file or directory where the change will be made.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If a permission value is <em>odd</em>, the file surely is executable!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Which syntax should you use? The <em>octal mode</em> is recommended if you want to change the permissions to a specific value, for example <code>640</code> (<code>rw- r-- ---</code>).</p>
</div>
<div class="paragraph">
<p>The <em>symbolic mode</em> is more useful if you want to flip just a specific value, regardless of the current permissions for the file. For example, you can add execute permissions for the user using just <code>chmod u+x script.sh</code> without regard to, or even touching, the current permissions for the group and others.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sec.104.5_01-MO">Modifying File Ownership</h3>
<div class="paragraph">
<p>The command <code>chown</code> is used to modify the ownership of a file or directory. The syntax is quite simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>chown USERNAME:GROUPNAME FILENAME</pre>
</div>
</div>
<div class="paragraph">
<p>For example, let us check a file called <code>text.txt</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l text.txt</strong>
-rw-rw---- 1 carol carol 1881 Dec 10 15:57 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The user who owns the file is <code>carol</code>, and the group is also <code>carol</code>. Now, we will change the group owning the file to some other group, like <code>students</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chown carol:students text.txt</strong>
$ <strong>ls -l text.txt</strong>
-rw-rw---- 1 carol students 1881 Dec 10 15:57 text.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Keep in mind that the user who owns a file does not need to belong to the group who owns a file. In the example above, the user <code>carol</code> does not need to be a member of the <code>students</code> group.</p>
</div>
<div class="paragraph">
<p>The user or group permission set can be omitted if you do not wish to change them. So, to change just the group owning a file you would use <code>chown :students text.txt</code>. To change just the user, the command would be <code>chown carol: text.txt</code> or just <code>chown carol text.txt</code>. Alternatively, you could use the command <code>chgrp students text.txt</code>.</p>
</div>
<div class="paragraph">
<p>Unless you are the system administrator (root), you cannot change ownership of a file to another user or group you do not belong to. If you try to do this, you will get the error message <code>Operation not permitted</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_querying_groups">Querying Groups</h3>
<div class="paragraph">
<p>Before changing the ownership of a file, it might be useful to know which groups exist on the system, which users are members of a group and to which groups a user belongs.</p>
</div>
<div class="paragraph">
<p>To see which groups exist on your system, type <code>getent group</code>. The output will be similar to this one (the output has been abbreviated):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>getent group</strong>
root:x:0:
daemon:x:1:
bin:x:2:
sys:x:3:
adm:x:4:syslog,rigues
tty:x:5:rigues
disk:x:6:
lp:x:7:
mail:x:8:
news:x:9:
uucp:x:10:rigues</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to know to which groups a user belongs, add the username as a parameter to <code>groups</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>groups carol</strong>
carol : carol students cdrom sudo dip plugdev lpadmin sambashare</pre>
</div>
</div>
<div class="paragraph">
<p>To do the reverse (see which users belong to a group) use <code>groupmems</code>. The parameter <code>-g</code> specifies the group, and <code>-l</code> will list all of its members:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>groupmems -g cdrom -l</strong>
carol</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p><code>groupmems</code> can only be run as root, the system administrator. If you are not currently logged in as root, add <code>sudo</code> before the command.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_default_permissions">Default Permissions</h3>
<div class="paragraph">
<p>Let us try an experiment. Open a terminal window and create an empty file with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>touch testfile</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us take a look at the permissions for this file. They <em>may</em> be different on your system, but let us assume they look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -lh testfile</strong>
-rw-r--r-- 1 carol carol 0 jul 13 21:55 testfile</pre>
</div>
</div>
<div class="paragraph">
<p>The permissions are <code>rw-r&#8212;&#8203;r--</code>: <em>read</em> and <em>write</em> for the user, and <em>read</em> for the group and others, or <code>644</code> in octal mode. Now, try creating a directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>mkdir testdir</strong>
$ <strong>ls -lhd testdir</strong>
drwxr-xr-x 2 carol carol 4,0K jul 13 22:01 testdir</pre>
</div>
</div>
<div class="paragraph">
<p>Now the permissions are <code>rwxr-xr-x</code> : <em>read</em>, <em>write</em> and <em>execute</em> for the user, <em>read</em> and <em>execute</em> for the group and others, or <code>755</code> in symbolic mode.</p>
</div>
<div class="paragraph">
<p>No matter where you are in the filesystem every file or directory you create will get those same permissions. Did you ever wonder where they come from?</p>
</div>
<div class="paragraph">
<p>They come from the <em>user mask</em> or <code>umask</code>, which sets the default permissions for every file created. You can check the current values with the <code>umask</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>umask</strong>
0022</pre>
</div>
</div>
<div class="paragraph">
<p>But that does not look like <code>rw-r&#8212;&#8203;r--</code>, or even <code>644</code>. Maybe we should try with the <code>-S</code> parameter, to get an output in symbolic mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>umask -S</strong>
u=rwx,g=rx,o=rx</pre>
</div>
</div>
<div class="paragraph">
<p>Those are the same permissions our test directory got in one of the examples above. But, why is it that when we created a file the permissions were different?</p>
</div>
<div class="paragraph">
<p>Well, it makes no sense to set global execute permissions for everyone on any file by default, right? Directories need execute permissions (otherwise you cannot enter them), but files do not, so they do not get them. Hence the <code>rw-r&#8212;&#8203;r--</code>.</p>
</div>
<div class="paragraph">
<p>Besides displaying the default permissions, <code>umask</code> can also be used to change them for your current shell session. For example, if we use the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>umask u=rwx,g=rwx,o=</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Every new directory will inherit the permissions <code>rwxrwx---</code>, and every file <code>rw-rw----</code> (as they do not get execute permissions). If you repeat the examples above to create a <code>testfile</code> and <code>testdir</code> and check the permissions, you should get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -lhd test</strong>*
drwxrwx--- 2 carol carol 4,0K jul 13 22:25 testdir
-rw-rw---- 1 carol carol    0 jul 13 22:25 testfile</pre>
</div>
</div>
<div class="paragraph">
<p>And if you check the <code>umask</code> without the <code>-S</code> (symbolic mode) parameter, you get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>umask</strong>
0007</pre>
</div>
</div>
<div class="paragraph">
<p>The result does not look familiar because the values used are different. Here is a table with every value and its respective meaning:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Permission for Files</th>
<th class="tableblock halign-left valign-top">Permission for Directories</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rw-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rwx</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rw-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rw-</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r--</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r-x</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r--</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r--</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-w-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-wx</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-w-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-w-</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>6</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>---</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>--x</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>7</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>---</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>---</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As you can see, <code>007</code> corresponds to <code>rwxrwx---</code>, exactly as we requested. The leading zero can be ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="_special_permissions">Special Permissions</h3>
<div class="paragraph">
<p>Besides the read, write and execute permissions for user, group and others, each file can have three other <em>special permissions</em> which can alter the way a directory works or how a program runs. They can be specified either in symbolic or octal mode, and are as follows:</p>
</div>
<div class="sect3">
<h4 id="_sticky_bit">Sticky Bit</h4>
<div class="paragraph">
<p>The sticky bit, also called the <em>restricted deletion flag</em>, has the octal value <code>1</code> and in symbolic mode is represented by a <code>t</code> within the other&#8217;s permissions. This applies only to directories, and has no effect on normal files. On Linux it prevents users from removing or renaming a file in a directory unless they own that file or directory.</p>
</div>
<div class="paragraph">
<p>Directories with the sticky bit set show a <code>t</code> replacing the <code>x</code> on the permissions for <em>others</em> on the output of <code>ls -l</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -ld Sample_Directory/</strong>
drwxr-xr-t 2 carol carol 4096 Dec 20 18:46 Sample_Directory/</pre>
</div>
</div>
<div class="paragraph">
<p>In octal mode, the special permissions are specified using a 4-digit notation, with the first digit representing the special permission to act upon. For example, to set the sticky bit (value <code>1</code>) for the directory <code>Another_Directory</code> in octal mode, with permissions <code>755</code>, the command would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 1755 Another_Directory</strong>
$ <strong>ls -ld Another_Directory</strong>
drwxr-xr-t 2 carol carol 4,0K Dec 20 18:46 Another_Directory</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_set_gid">Set GID</h4>
<div class="paragraph">
<p>Set GID, also known as SGID or Set Group ID bit, has the octal value <code>2</code> and in symbolic mode is represented by an <code>s</code> on the <em>group</em> permissions. This can be applied to executable files or directories. On files, it will make the process run with the privileges of the group who owns the file. When applied to directories, it will make every file or directory created under it inherit the group from the parent directory.</p>
</div>
<div class="paragraph">
<p>Files and directories with SGID bit show an <code>s</code> replacing the <code>x</code> on the permissions for the <em>group</em> on the output of <code>ls -l</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l test.sh</strong>
-rwxr-sr-x 1 carol carol 33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="paragraph">
<p>To add SGID permissions to a file in symbolic mode, the command would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod g+s test.sh</strong>
$ <strong>ls -l test.sh</strong>
-rwxr-sr-x 1 carol root     33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="paragraph">
<p>The following example will help you better understand the effects of SGID on a directory. Suppose we have a directory called <code>Sample_Directory</code>, owned by the user <code>carol</code> and the group <code>users</code>, with the following permission structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -ldh Sample_Directory/</strong>
drwxr-xr-x 2 carol users 4,0K Jan 18 17:06 Sample_Directory/</pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us change to this directory and, using the command <code>touch</code>, create an empty file inside of it. The result would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cd Sample_Directory/</strong>
$ <strong>touch newfile</strong>
$ <strong>ls -lh newfile</strong>
-rw-r--r-- 1 carol carol 0 Jan 18 17:11 newfile</pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, the file is owned by the user <code>carol</code> and group <code>carol</code>. But, if the directory had the SGID permission set, the result would be different. First, let us add the SGID bit to the <code>Sample_Directory</code> and check the results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo chmod g+s Sample_Directory/</strong>
$ <strong>ls -ldh Sample_Directory/</strong>
drwxr-sr-x 2 carol users 4,0K Jan 18 17:17 Sample_Directory/</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>s</code> on the group permissions indicates that the SGID bit is set. Now, we will change to this directory and, again, create an empty file with the <code>touch</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cd Sample_Directory/</strong>
$ <strong>touch emptyfile</strong>
$ <strong>ls -lh emptyfile</strong>
 -rw-r--r-- 1 carol users 0 Jan 18 17:20 emptyfile</pre>
</div>
</div>
<div class="paragraph">
<p>The group who owns the file is <code>users</code>. This is because the SGID bit made the file inherit the group owner of its parent directory, which is <code>users</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_set_uid">Set UID</h4>
<div class="paragraph">
<p>SUID, also known as Set User ID, has the octal value <code>4</code> and is represented by an <code>s</code> on the <em>user</em> permissions in symbolic mode. It only applies to files and has no effect on directories. Its behavior is similar to the SGID bit, but the process will run with the privileges of the <em>user</em> who owns the file. Files with the SUID bit show a <code>s</code> replacing the <code>x</code> on the permissions for the user on the output of <code>ls -l</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -ld test.sh</strong>
-rwsr-xr-x 1 carol carol 33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="paragraph">
<p>You can combine multiple special permissions on one parameter. So, to set SGID (value <code>2</code>) and SUID (value <code>4</code>) in octal mode for the script <code>test.sh</code> with permissions <code>755</code>, you would type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 6755 test.sh</strong></pre>
</div>
</div>
<div class="paragraph">
<p>And the result would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -lh test.sh</strong>
-rwsr-sr-x 1 carol carol 66 Jan 18 17:29 test.sh</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If your terminal supports color, and these days most of them do, you can quickly see if these special permissions are set by glancing at the output of <code>ls -l</code>. For the sticky bit, the directory name might be shown in a black font with blue background. The same applies for files with the SGID (yellow background) and SUID (red background) bits. Colors may be different depending on which Linux distribution and terminal settings you use.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a directory named <code>emptydir</code> using the command <code>mkdir emptydir</code>. Now, using <code>ls</code>, list the permissions for the directory <code>emptydir</code>.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Create an empty file named <code>emptyfile</code> with the command <code>touch emptyfile</code>. Now, using <code>chmod</code> in symbolic mode, add execute permissions for the owner of the file <code>emptyfile</code>, and remove write and execute permissions for everyone else. Do this using only one <code>chmod</code> command.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What would the default permissions for a file be if the <code>umask</code> value is set to <code>027</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Let us assume a file named <code>test.sh</code> is a shell script with the following permissions and ownership:</p>
<div class="listingblock">
<div class="content">
<pre>-rwxr-sr-x 1 carol root     33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What are the permissions for the owner of the file?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using the octal notation, what would the syntax of <code>chmod</code> be to &#8220;unset&#8221; the special permission granted to this file?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Consider this file:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /dev/sdb1</strong>
brw-rw---- 1 root disk 8, 17 Dec 21 18:51 /dev/sdb1</pre>
</div>
</div>
<div class="paragraph">
<p>Which type of file is <code>sdb1</code>? Who can write to it?</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Consider the following 4 files:</p>
<div class="listingblock">
<div class="content">
<pre>drwxr-xr-t 2 carol carol 4,0K Dec 20 18:46 Another_Directory
----r--r-- 1 carol carol    0 Dec 11 10:55 foo.bar
-rw-rw-r-- 1 carol carol 1,2G Dec 20 18:22 HugeFile.zip
drwxr-sr-x 2 carol users  4,0K Jan 18 17:26 Sample_Directory</pre>
</div>
</div>
<div class="paragraph">
<p>Write down the corresponding permissions for each file and directory using octal mode using the 4-digit notation.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Another_Directory</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>foo.bar</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HugeFile.zip</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sample_Directory</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Try this on a terminal: create an empty file called <code>emptyfile</code> with the command <code>touch emptyfile</code>. Now &#8220;zero out&#8221; the permissions for the file with <code>chmod 000 emptyfile</code>. What will happen if you change the permissions for <code>emptyfile</code> by passing only <em>one</em> value for <code>chmod</code> in octal mode, like <code>chmod 4 emptyfile</code>? And if you use two, as in <code>chmod 44 emptyfile</code>? What can we learn about the way <code>chmod</code> reads the numerical value?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Consider the permissions for the temporary directory on a Linux system, <code>/tmp</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /tmp</strong>
drwxrwxrwt  19 root root  16K Dec 21 18:58 tmp</pre>
</div>
</div>
<div class="paragraph">
<p>User, group and others have full permissions. But can a regular user delete <em>any</em> files inside this directory? Why is this the case?</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>A file called <code>test.sh</code> has the following permissions: <code>-rwsr-xr-x</code>, meaning the SUID bit is set. Now, run the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod u-x test.sh</strong>
$ <strong>ls -l test.sh</strong>
-rwSr-xr-x 1 carol carol 33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="paragraph">
<p>What did we do? What does the uppercase <code>S</code> mean?</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How would you create a directory named <code>Box</code> where all the files are automatically owned by the group <code>users</code>, and can only be deleted by the user who created them?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson you have learned how to use <code>ls</code> to get (and decode) information about file permissions, how to control or change who can create, delete or modify a file with <code>chmod</code>, both in <em>octal</em> and <em>symbolic</em> modes, how to change the ownership of files with <code>chown</code> and <code>chgrp</code> and how to query and change the default permissions mask for files and directories with <code>umask</code></p>
</div>
<div class="paragraph">
<p>The following commands were discussed in this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ls</code></dt>
<dd>
<p>List files, optionally including details such as permissions.</p>
</dd>
<dt class="hdlist1"><code>chmod</code></dt>
<dd>
<p>Change the permissions of a file or directory.</p>
</dd>
<dt class="hdlist1"><code>chown</code></dt>
<dd>
<p>Change the owning user and/or group of a file or directory.</p>
</dd>
<dt class="hdlist1"><code>chgrp</code></dt>
<dd>
<p>Change the owning group of a file or directory.</p>
</dd>
<dt class="hdlist1"><code>umask</code></dt>
<dd>
<p>Query, or set, the default permissions mask for files and directories</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a directory named <code>emptydir</code> using the command <code>mkdir emptydir</code>. Now, using <code>ls</code>, list the permissions for the directory <code>emptydir</code>.</p>
<div class="paragraph">
<p>Add the <code>-d</code> parameter to <code>ls</code> to see the file attributes of a directory, instead of listing its contents. So, the answer is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ls -l -d emptydir</pre>
</div>
</div>
<div class="paragraph">
<p>Bonus points if you merged the two parameters in one, as in <code>ls -ld emptydir</code>.</p>
</div>
</li>
<li>
<p>Create an empty file named <code>emptyfile</code> with the command <code>touch emptyfile</code>. Now, using <code>chmod</code> on symbolic mode, add execute permissions for the owner of the file <code>emptyfile</code>, and remove write and execute permissions for everyone else. Do this using only one <code>chmod</code> command.</p>
<div class="paragraph">
<p>Think about it this way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#8220;For the user who owns the file (<code>u</code>) add (<code>+</code>) execute (<code>x</code>) permissions&#8221;, so <code>u+x</code>.</p>
</li>
<li>
<p>&#8220;For the group (<code>g</code>) and other users (<code>o</code>), remove (<code>-</code>) write (<code>w</code>) and execute (<code>x</code>) permissions&#8221;, so <code>go-wx</code>.</p>
<div class="paragraph">
<p>To combine these two sets of permissions, we add a comma between them. So the final result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>chmod u+x,go-wx emptyfile</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>What would the default permissions be for a file if the <code>umask</code> value is set to <code>027</code>?</p>
<div class="paragraph">
<p>The permissions would be <code>rw-r-----</code></p>
</div>
</li>
<li>
<p>Let us assume a file named <code>test.sh</code> is a shell script with the following permissions and ownership:</p>
<div class="listingblock">
<div class="content">
<pre>-rwxr-sr-x 1 carol root     33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>What are the permissions for the owner of the file?</p>
<div class="paragraph">
<p>The permissions for the owner (2nd to 4th characters in the output of <code>ls -l</code>) are <code>rwx</code>, so the answer is: &#8220;to read, to write to and to execute the file&#8221;.</p>
</div>
</li>
<li>
<p>Using the octal notation, which should be the syntax of chmod to &#8220;unset&#8221; the special permission granted to this file?</p>
<div class="paragraph">
<p>We can &#8220;unset&#8221; the special permissions by passing a 4th digit, <code>0</code>, to <code>chmod</code>. The current permissions are <code>755</code>, so the command should be <code>chmod 0755</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Consider this file:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /dev/sdb1</strong>
brw-rw---- 1 root disk 8, 17 Dec 21 18:51 /dev/sdb1</pre>
</div>
</div>
<div class="paragraph">
<p>Which type of file is <code>sdb1</code>? Who can write to it?</p>
</div>
<div class="paragraph">
<p>The first character on the output of <code>ls -l</code> shows the type of file. <code>b</code> is a <em>block device</em>, usually a disk (internal or external), connected to the machine. The owner (<code>root</code>) and any users of the group <code>disk</code> can write to it.</p>
</div>
</li>
<li>
<p>Consider the following 4 files:</p>
<div class="listingblock">
<div class="content">
<pre>drwxr-xr-t 2 carol carol 4,0K Dec 20 18:46 Another_Directory
----r--r-- 1 carol carol    0 Dec 11 10:55 foo.bar
-rw-rw-r-- 1 carol carol 1,2G Dec 20 18:22 HugeFile.zip
drwxr-sr-x 2 carol users 4,0K Jan 18 17:26 Sample_Directory</pre>
</div>
</div>
<div class="paragraph">
<p>Write down the corresponding permissions for each file and directory using octal mode using the 4-digit notation.</p>
</div>
<div class="paragraph">
<p>The corresponding permissions, in octal mode, are as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Another_Directory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1755</code>. <code>1</code> for the sticky bit, <code>755</code> for the regular permissions (<code>rwx</code> for the user, <code>r-x</code> for group and others).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>foo.bar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0044</code>. No special permissions (so the first digit is <code>0</code>), no permissions for the user (<code>---</code>) and just read (<code>r&#8212;&#8203;r--</code>) for group and others.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HugeFile.zip</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0664</code>. No special permissions, so the first digit is <code>0</code>. <code>6</code> (<code>rw-</code>) for the user and group, <code>4</code> (<code>r--</code>) for the others.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sample_Directory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2755</code>. <code>2</code> for the SGID bit, <code>7</code> (<code>rwx</code>) for the user, <code>5</code> (<code>r-x</code>) for the group and others.</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.104.5_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Try this on a terminal: create an empty file called <code>emptyfile</code> with the command <code>touch emptyfile</code>. Now &#8220;zero out&#8221; the permissions for the file with <code>chmod 000 emptyfile</code>. What will happen if you change the permissions for <code>emptyfile</code> by passing only <em>one</em> value for <code>chmod</code> in octal mode, like <code>chmod 4 emptyfile</code>? And if you use two, as in <code>chmod 44 emptyfile</code>? What can we learn about the way <code>chmod</code> reads the numerical value?</p>
<div class="paragraph">
<p>Remember that we &#8220;zeroed out&#8221; the permissions for <code>emptyfile</code>. So, its initial state would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>---------- 1 carol carol    0 Dec 11 10:55 emptyfile</pre>
</div>
</div>
<div class="paragraph">
<p>Now, let us try the first command, <code>chmod 4 emptyfile</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 4 emptyfile</strong>
$ <strong>ls -l emptyfile</strong>
-------r-- 1 carol carol 0 Dec 11 10:55 emptyfile</pre>
</div>
</div>
<div class="paragraph">
<p>See? The permissions for <em>others</em> were changed. And what if we try two digits, like in <code>chmod 44 emptyfile</code>?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod 44 emptyfile</strong>
$ <strong>ls -l emptyfile</strong>
----r--r-- 1 carol carol 0 Dec 11 10:55 emptyfile</pre>
</div>
</div>
<div class="paragraph">
<p>Now, the permissions for <em>group</em> and <em>others</em> were affected. From this, we can conclude that in octal mode <code>chmod</code> reads the value &#8220;backwards&#8221;, from the least significant digit (<em>others</em>) to the most significant one (<em>user</em>). If you pass one digit, you modify the permissions for <em>others</em>. With two digits you modify <em>group</em> and <em>others</em>, and with three you modify <em>user</em>, <em>group</em> and <em>others</em> and with four digits you modify <em>user</em>, <em>group</em>, <em>others</em> and the special permissions.</p>
</div>
</li>
<li>
<p>Consider the permissions for the temporary directory on a Linux system, <code>/tmp</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /tmp</strong>
drwxrwxrwt  19 root root  16K Dec 21 18:58 tmp</pre>
</div>
</div>
<div class="paragraph">
<p>User, group and others have full permissions. But can a regular user delete <em>any</em> files inside this directory? Why is this the case?</p>
</div>
<div class="paragraph">
<p><code>/tmp</code> is what we call a <em>world writeable</em> directory, meaning that any user can write to it. But we don&#8217;t want one user messing with files created by others, so the <em>sticky bit</em> is set (as indicated by the <code>t</code> on the permissions for <em>others</em>). This means that a user can delete files on <code>/tmp</code>, but only those created by himself.</p>
</div>
</li>
<li>
<p>A file called <code>test.sh</code> has the following permissions: <code>-rwsr-xr-x</code>, meaning the SUID bit is set. Now, run the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod u-x test.sh</strong>
$ <strong>ls -l test.sh</strong>
-rwSr-xr-x 1 carol carol 33 Dec 11 10:36 test.sh</pre>
</div>
</div>
<div class="paragraph">
<p>What did we do? What does the uppercase <code>S</code> mean?</p>
</div>
<div class="paragraph">
<p>We removed execute permissions for the user who owns the file. The <code>s</code> (or <code>t</code>) takes the place of the <code>x</code> on the output of <code>ls -l</code>, so the system needs a way to show if the user has execute permissions or not. It does this by changing the case of the special character.</p>
</div>
<div class="paragraph">
<p>A lowercase <code>s</code> on the first group of permissions means that the user who owns the file has execute permissions and that the SUID bit is set. An uppercase <code>S</code> means that the user who owns the file lacks (<code>-</code>) execute permissions and that the SUID bit is set.</p>
</div>
<div class="paragraph">
<p>The same can be said for SGID, a lowercase <code>s</code> on the second group of permissions means that the group who owns the file has execute permissions and that the SGID bit is set. An uppercase <code>S</code> means that the group who owns the file lacks (<code>-</code>) execute permissions and that the SGID bit is set.</p>
</div>
<div class="paragraph">
<p>This is also true for the sticky bit, represented by the <code>t</code> on the third group of permissions. Lowercase <code>t</code> means sticky bit set and that others have execute permissions. Uppercase <code>T</code> means sticky bit set and that others do not have execute permissions.</p>
</div>
</li>
<li>
<p>How would you create a directory named <code>Box</code> where all the files are automatically owned by the group <code>users</code>, and can only be deleted by the user who created them?</p>
<div class="paragraph">
<p>This is a multi-step process. The first step is to create the directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>mkdir Box</strong></pre>
</div>
</div>
<div class="paragraph">
<p>We want every file created inside this directory to be automatically assigned to the group <code>users</code>. We can do this by setting this group as the owner of the directory, and then by setting the SGID bit on it. We also need to make sure that any member of the group can write to that directory.</p>
</div>
<div class="paragraph">
<p>Since we do not care about what the other permissions are, and want to &#8220;flip&#8221; only the special bits, it makes sense to use the symbolic mode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chown :users Box/</strong>
$ <strong>chmod g+wxs Box/</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if your current user does not belong to the group <code>users</code>, you will have to use the command <code>sudo</code> before the commands above to do the change as root.</p>
</div>
<div class="paragraph">
<p>Now for the last part, making sure that only the user who created a file is allowed to delete it. This is done by setting the sticky bit (represented by a <code>t</code>) on the directory. Remember that it is set on the permissions for others (<code>o</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod o+t Box/</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The permissions on the directory <code>Box</code> should be as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>drwxrwsr-t 2 carol users  4,0K Jan 18 19:09 Box</pre>
</div>
</div>
<div class="paragraph">
<p>Of course, you can specify SGID and the sticky bit using only one <code>chmod</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>chmod g+wxs,o+t Box/</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Bonus points if you thought of that.</p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">104.6 Create and change hard and symbolic links (104.6 Lesson 1)</p>

        <div class="button-group">
            <a href="../../104.6/104.6_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
