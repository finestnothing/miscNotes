

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>103.4 Lesson 2</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">103.4 Lesson 2</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../102/102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.2/index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.2/102.2_01/index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.2/index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.2/103.2_01/index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../103.4_01/index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.5/index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_01/index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../104/104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.5/index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.5/104.5_01/index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 103: GNU and Unix Commands</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">103.4 Use streams, pipes and redirects</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">103.4 Lesson 2</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>103.4 Lesson 2</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1 (101)</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103 GNU and Unix Commands</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103.4 Use streams, pipes and redirects</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 of 2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One aspect of the Unix philosophy states that each program should have a specific purpose and should not try to incorporate features outside its scope. But keeping things simple does not mean less elaborated results, because different programs can be chained together to produce a combined output. The vertical bar character <code>|</code>, also known as the <em>pipe</em> symbol, can be used to create a pipeline connecting the output of a program directly into the input of another program, whereas <em>command substitution</em> allows to store the output of a program in a variable or use it directly as an argument to another command.</p>
</div>
<div class="sect2">
<h3 id="sec.103.4_02-PI">Pipes</h3>
<div class="paragraph">
<p>Unlike redirects, with pipes data flows from left to right in the command line and the target is another process, not a filesystem path, file descriptor or Here document. The pipe character <code>|</code> tells the shell to start all distinct commands at the same time and to connect the output of the previous command to the input of the following command, left to right. For example, instead of using redirects, the content of the file <code>/proc/cpuinfo</code> sent to the standard output by <code>cat</code> can be piped to the stdin of <code>wc</code> with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpuinfo | wc</strong>
   208    1184    6096</pre>
</div>
</div>
<div class="paragraph">
<p>In the absence of a path to a file, <code>wc</code> counts the number of lines, words and characters it receives on its stdin, as is the case in the example. Many pipes can be present in a compound command. In the following example, two pipes are used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpuinfo | grep 'model name' | uniq</strong>
model name      : Intel(R) Xeon(R) CPU           X5355  @ 2.66GHz</pre>
</div>
</div>
<div class="paragraph">
<p>The content of file <code>/proc/cpuinfo</code> produced by <code>cat /proc/cpuinfo</code> was piped to the command <code>grep 'model name'</code>, which then selects only the lines containing the term <code>model name</code>. The machine running the example has many CPUs, so there are repeated lines with <code>model name</code>. The last pipe connects <code>grep 'model name'</code> to <code>uniq</code>, which is responsible for skipping any line equal to the previous one.</p>
</div>
<div class="paragraph">
<p>Pipes can be combined with redirects in the same command line. The previous example can be rewritten to a simpler form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep 'model name' &lt;/proc/cpuinfo | uniq</strong>
model name      : Intel(R) Xeon(R) CPU           X5355  @ 2.66GHz</pre>
</div>
</div>
<div class="paragraph">
<p>The input redirect for <code>grep</code> is not strictly necessary as <code>grep</code> accepts a file path as argument, but the example demonstrates how to build such combined commands.</p>
</div>
<div class="paragraph">
<p>Pipes and redirects are exclusive, that is, one source can be mapped to only one target. Yet, it is possible to redirect an output to a file and still see it on the screen with program <code>tee</code>. To do it, the first program sends its output to the stdin of <code>tee</code> and a file name is provided to the latter to store the data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep 'model name' &lt;/proc/cpuinfo | uniq | tee cpu_model.txt</strong>
model name      : Intel(R) Xeon(R) CPU           X5355  @ 2.66GHz
$ <strong>cat cpu_model.txt</strong>
model name      : Intel(R) Xeon(R) CPU           X5355  @ 2.66GHz</pre>
</div>
</div>
<div class="paragraph">
<p>The output of the last program in the chain, generated by <code>uniq</code>, is displayed and stored in the file <code>cpu_model.txt</code>. To not overwrite the content of the provided file but to append data to it, the option <code>-a</code> must be provided to <code>tee</code>.</p>
</div>
<div class="paragraph">
<p>Only the standard output of a process is captured by a pipe. Let&#8217;s say you must to go through a long compilation process on the screen and at the same time save both the standard output and the standard error to a file for later inspection. Assuming your current directory does not have a <em>Makefile</em>, the following command will output an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>make | tee log.txt</strong>
make: *** No targets specified and no makefile found.  Stop.</pre>
</div>
</div>
<div class="paragraph">
<p>Although shown on the screen, the error message generated by <code>make</code> was not captured by <code>tee</code> and the file <em>log.txt</em> was created empty. A redirect needs to be done before a pipe can capture the stderr:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>make 2&gt;&amp;1 | tee log.txt</strong>
make: *** No targets specified and no makefile found.  Stop.
$ <strong>cat log.txt</strong>
make: *** No targets specified and no makefile found.  Stop.</pre>
</div>
</div>
<div class="paragraph">
<p>In this example the stderr of <code>make</code> was redirected to the stdout, so <code>tee</code> was able to capture it with a pipe, display it on the screen and save it in the file <code>log.txt</code>. In cases like this, it may be useful to save the error messages for later inspection.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec.103.4_02-CS">Command Substitution</h3>
<div class="paragraph">
<p>Another method to capture the output of a command is <em>command substitution</em>. By placing a command inside backquotes, Bash replaces it with its standard output. The following example shows how to use the stdout of a program as an argument to another program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>mkdir `date +%Y-%m-%d`</strong>
$ <strong>ls</strong>
2019-09-05</pre>
</div>
</div>
<div class="paragraph">
<p>The output of the program <code>date</code>, the current date formatted as <em>year-month-day</em>, was used as an argument to create a directory with <code>mkdir</code>. An identical result is obtained by using <code>$()</code> instead of backquotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>rmdir 2019-09-05</strong>
$ <strong>mkdir $(date +%Y-%m-%d)</strong>
$ <strong>ls</strong>
2019-09-05</pre>
</div>
</div>
<div class="paragraph">
<p>The same method can be used to store the output of a command as a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>OS=`uname -o`</strong>
$ <strong>echo $OS</strong>
GNU/Linux</pre>
</div>
</div>
<div class="paragraph">
<p>The command <code>uname -o</code> outputs the generic name of the current operating system, which was stored in the session variable <code>OS</code>. To assign the output of a command to a variable is very useful in scripts, making it possible to store and evaluate the data in many distinct ways.</p>
</div>
<div class="paragraph">
<p>Depending on the output generated by the replaced command, the builtin command substitution may not be appropriate. A more sophisticated method to use the output of a program as the argument of another program employs an intermediate called <code>xargs</code>. The program <code>xargs</code> uses the contents it receives via stdin to run a given command with the contents as its argument. The following example shows <code>xargs</code> running the program <code>identify</code> with arguments provided by program <code>find</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>find /usr/share/icons -name 'debian*' | xargs identify -format "%f: %wx%h\n"</strong>
debian-swirl.svg: 48x48
debian-swirl.png: 22x22
debian-swirl.png: 32x32
debian-swirl.png: 256x256
debian-swirl.png: 48x48
debian-swirl.png: 16x16
debian-swirl.png: 24x24
debian-swirl.svg: 48x48</pre>
</div>
</div>
<div class="paragraph">
<p>The program <code>identify</code> is part of <em>ImageMagick</em>, a set of command-line tools to inspect, convert and edit most image file types. In the example, <code>xargs</code> took all paths listed by <code>find</code> and put them as arguments to <code>identify</code>, which then shows the information for each file formatted as required by the option <code>-format</code>. The files found by <code>find</code> in the example are images containing the distribution logo in a Debian filesystem. <code>-format</code> is a parameter to <code>identify</code>, not to <code>xargs</code>.</p>
</div>
<div class="paragraph">
<p>Option <code>-n 1</code> requires <code>xargs</code> to run the given command with only one argument at a time. In the example&#8217;s case, instead of passing all paths found by <code>find</code> as a list of arguments to <code>identify</code>, using <code>xargs -n 1</code> would execute command <code>identify</code> for each path separately. Using <code>-n 2</code> would execute <code>identify</code> with two paths as arguments, <code>-n 3</code> with three paths as arguments and so on. Similarly, when <code>xargs</code> process multiline contents&#8201;&#8212;&#8201;as is the case with input provided by <code>find</code>&#8201;&#8212;&#8201;the option <code>-L</code> can be used to limit how many lines will be used as arguments per command execution.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Using <code>xargs</code> with option <code>-n 1</code> or <code>-L 1</code> to process output generated by <code>find</code>
may be unnecessary. Command <code>find</code> has the option <code>-exec</code> to run a given command
for each search result item.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the paths have space characters, it is important to run <code>find</code> with the option <code>-print0</code>. This option instructs <code>find</code> to use a null character between each entry so the list can be correctly parsed by <code>xargs</code> (the output was suppressed):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>find . -name '*avi' -print0 -o -name '*mp4' -print0 -o -name '*mkv' -print0 | xargs -0 du | sort -n</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The option <code>-0</code> tells <code>xargs</code> the null character should be used as the separator. That way the file paths given by <code>find</code> are correctly parsed even if they have blank or other special characters in it. The previous example shows how to use the command <code>du</code> to find out the disk usage of every file found and then sort the results by size. The output was suppressed for conciseness. Note that for each search criteria it is necessary to place the <code>-print0</code> option for <code>find</code>.</p>
</div>
<div class="paragraph">
<p>By default, <code>xargs</code> places the arguments of the executed command last. To change that behavior, the option <code>-I</code> should be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>find . -mindepth 2 -name '*avi' -print0 -o -name '*mp4' -print0 -o -name '*mkv' -print0 | xargs -0 -I PATH mv PATH ./</strong></pre>
</div>
</div>
<div class="paragraph">
<p>In the last example, every file found by <code>find</code> is moved to the current directory. As the source path(s) must be informed to <code>mv</code> before the target path, a substitution term is given to the option <code>-I</code> of <code>xargs</code> which is then appropriately placed alongside <code>mv</code>. By using the null character as separator, it is not necessary to enclose the substitution term with quotes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It&#8217;s convenient to save the execution date of actions performed by automated scripts. Command <code>date +%Y-%m-%d</code> shows the current date in <em>year-month-day</em> format. How can the output of such a command be stored in a shell variable called <code>TODAY</code> using command substitution?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using command <code>echo</code>, how can the contents of variable <code>TODAY</code> be sent to the standard input of command <code>sed s/-/./g</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How could the output of command <code>date +%Y-%m-%d</code> be used as a Here string to command <code>sed s/-/./g</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Command <code>convert image.jpeg -resize 25% small/image.jpeg</code> creates a smaller version of <code>image.jpeg</code> and places the resulting image in a likewise named file inside subdirectory <code>small</code>. Using <code>xargs</code>, how is it possible to perform the same command for every image listed in file <code>filelist.txt</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A simple backup routine periodically creates an image of partition <code>/dev/sda1</code> with <code>dd &lt; /dev/sda1 &gt; sda1.img</code>. To perform future data integrity checks, the routine also generates a SHA1 hash of the file with <code>sha1sum &lt; sda1.img &gt; sda1.sha1</code>. By adding pipes and command <code>tee</code>, how would these two commands be combined into one?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Command <code>tar</code> is used to archive many files into a single file, preserving directory structure. Option <code>-T</code> allows to specify a file containing the paths to be archived. For example, <code>find /etc -type f | tar -cJ -f /srv/backup/etc.tar.xz -T -</code> creates a compressed tar file <code>etc.tar.xz</code> from the list provided by command <code>find</code> (option <code>-T -</code> indicates the standard input as the path list). In order to avoid possible parsing errors due to paths containing spaces, what command options should be present for <code>find</code> and <code>tar</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Instead of opening a new remote shell session, command <code>ssh</code> can just execute a command indicated as its argument: <code>ssh user@storage "remote command"</code>. Given that <code>ssh</code> also allows to redirect the standard output of a local program to the standard input of the remote program, how would the <code>cat</code> command pipe a local file named <code>etc.tar.gz</code> to <code>/srv/backup/etc.tar.gz</code> at <code>user@storage</code> through <code>ssh</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lesson covers traditional inter-process communication techniques employed by Linux. <em>Command pipelining</em> creates a one way communication channel between two process and <em>command substitution</em> allows to store the output of a process in a shell variable. The lesson goes through the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How <em>pipes</em> can be used to stream the output of a process to the input of another process.</p>
</li>
<li>
<p>The purpose of commands <code>tee</code> and <code>xargs</code>.</p>
</li>
<li>
<p>How to capture the output of a process with <em>command substitution</em>, storing it in a variable or using it directly as a parameter to another command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The commands and procedures addressed were:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Command pipelining with <code>|</code>.</p>
</li>
<li>
<p>Command substitution with backticks and <code>$()</code>.</p>
</li>
<li>
<p>Commands <code>tee</code>, <code>xargs</code> and <code>find</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It&#8217;s convenient to save the execution date of actions performed by automated scripts. Command <code>date +%Y-%m-%d</code> shows the current date in <em>year-month-day</em> format. How can the output of such a command can be stored in a shell variable called <code>TODAY</code> using command substitution?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>TODAY=`date +%Y-%m-%d`</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>TODAY=$(date +%Y-%m-%d)</strong></pre>
</div>
</div>
</li>
<li>
<p>Using command <code>echo</code>, how can the contents of variable <code>TODAY</code> be sent to the standard input of command <code>sed s/-/./g</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>echo $TODAY | sed s/-/./g</strong></pre>
</div>
</div>
</li>
<li>
<p>How could the output of command <code>date +%Y-%m-%d</code> be used as a Here string to command <code>sed s/-/./g</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed s/-/./g &lt;&lt;&lt; `date +%Y-%m-%d`</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed s/-/./g &lt;&lt;&lt; $(date +%Y-%m-%d)</strong></pre>
</div>
</div>
</li>
<li>
<p>Command <code>convert image.jpeg -resize 25% small/image.jpeg</code> creates a smaller version of <code>image.jpeg</code> and places the resulting image in a likewise named file inside subdirectory <code>small</code>. Using <code>xargs</code>, how is it possible to perform the same command for every image listed in file <code>filelist.txt</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>xargs -I IMG convert IMG -resize 25% small/IMG &lt; filelist.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat filelist.txt | xargs -I IMG convert IMG -resize 25% small/IMG</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_02-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A simple backup routine periodically creates an image of partition <code>/dev/sda1</code> with <code>dd &lt; /dev/sda1 &gt; sda1.img</code>. To perform future data integrity checks, the routine also generates a SHA1 hash of the file with <code>sha1sum &lt; sda1.img &gt; sda1.sha1</code>. By adding pipes and command <code>tee</code>, how would these two commands be combined into one?</p>
<div class="listingblock">
<div class="content">
<pre># <strong>dd &lt; /dev/sda1 | tee sda1.img | sha1sum &gt; sda1.sha1</strong></pre>
</div>
</div>
</li>
<li>
<p>Command <code>tar</code> is used to archive many files into a single file, preserving directory structure. Option <code>-T</code> allows to specify a file containing the paths to be archived. For example, <code>find /etc -type f | tar -cJ -f /srv/backup/etc.tar.xz -T -</code> creates a compressed tar file <code>etc.tar.xz</code> from the list provided by command <code>find</code> (option <code>-T -</code> indicates the standard input as the path list). In order to avoid possible parsing errors due to paths containing spaces, what command options should be present for <code>find</code> and <code>tar</code>?</p>
<div class="paragraph">
<p>Options <code>-print0</code> and <code>--null</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>find /etc -type f -print0 | tar -cJ -f /srv/backup/etc.tar.xz -T - --null</strong></pre>
</div>
</div>
</li>
<li>
<p>Instead of opening a new remote shell session, command <code>ssh</code> can just execute a command indicated as its argument: <code>ssh user@storage "remote command"</code>. Given that <code>ssh</code> also allows to redirect the standard output of a local program to the standard input of the remote program, how would the <code>cat</code> pipe a local file named <code>etc.tar.gz</code> to <code>/srv/backup/etc.tar.gz</code> at <code>user@storage</code> through <code>ssh</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat etc.tar.xz | ssh user@storage "cat > /srv/backup/etc.tar.xz"</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ssh user@storage "cat &gt; /srv/backup/etc.tar.xz" &lt; etc.tar.xz</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">103.5 Create, monitor and kill processes (103.5 Lesson 1)</p>

        <div class="button-group">
            <a href="../../103.5/103.5_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
