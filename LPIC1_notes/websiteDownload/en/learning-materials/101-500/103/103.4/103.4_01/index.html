

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>103.4 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">103.4 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../102/102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.2/index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.2/102.2_01/index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.2/index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.2/103.2_01/index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../103.4_02/index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.5/index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_01/index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../104/104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.5/index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.5/104.5_01/index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 103: GNU and Unix Commands</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">103.4 Use streams, pipes and redirects</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">103.4 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>103.4 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1 (101)</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103 GNU and Unix Commands</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103.4 Use streams, pipes and redirects</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All computer programs follow the same general principle: data received from some source is transformed to generate an intelligible outcome. In Linux shell context, the data source can be a local file, a remote file, a device (like a keyboard), etc. The program&#8217;s output is usually rendered on a screen, but is also common to store the output data in a local filesystem, send it to a remote device, play it through audio speakers, etc.</p>
</div>
<div class="paragraph">
<p>Operating systems inspired by Unix, like Linux, offer a great variety of input/output methods. In particular, the method of <em>file descriptors</em> allows to dynamically associate integer numbers with data channels, so that a process can reference them as its input/output data streams.</p>
</div>
<div class="paragraph">
<p>Standard Linux processes have three communication channels opened by default: the <em>standard input</em> channel (most times simply called <em>stdin</em>), the <em>standard output</em> channel (<em>stdout</em>) and the <em>standard error</em> channel (<em>stderr</em>). The numerical file descriptors assigned to these channels are <code>0</code> to stdin, <code>1</code> to stdout and <code>2</code> to stderr. Communication channels are also accessible through the special devices <code>/dev/stdin</code>, <code>/dev/stdout</code> and <code>/dev/stderr</code>.</p>
</div>
<div class="paragraph">
<p>These three standard communication channels allow programmers to write code that reads and writes data without worrying about the kind of media it&#8217;s coming from or going to. For example, if a program needs a set of data as its input, it can just ask for data from the standard input and whatever is being used as the standard input will provide that data. Likewise, the simplest method a program can use to display its output is to write it in the standard output. In a standard shell session, the keyboard is defined as the stdin and the monitor screen is defined as the stdout and stderr.</p>
</div>
<div class="paragraph">
<p>The Bash shell has the ability to reassign the communication channels when loading a program. It allows, for example, to override the screen as the standard output and use a file in the local filesystem as stdout.</p>
</div>
<div class="sect2">
<h3 id="sec.103.4_01-RE">Redirects</h3>
<div class="paragraph">
<p>The reassignment of a channel&#8217;s file descriptor in the shell environment is called a <em>redirect</em>. A redirect is defined by a special character within the command line. For example, to redirect the standard output of a process to a file, the <em>greater than</em> symbol  <code>&gt;</code> is positioned at the end of the command and followed by the path to the file that will receive the redirected output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpuinfo >/tmp/cpu.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>By default, only the content coming to stdout is redirected. That happens because the numerical value of the file descriptor should be specified just before the greater than symbol and, when not specified, Bash redirects the standard output. Therefore, using <code>&gt;</code> is equivalent to use <code>1&gt;</code> (the value of stdout&#8217;s file descriptor is <code>1</code>).</p>
</div>
<div class="paragraph">
<p>To capture the content of stderr, the redirect <code>2&gt;</code> should be used instead. Most command-line programs send debug information and error messages to the standard error channel. It is possible, for example, to capture the error message triggered by an attempt to read a non-existent file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpu_info 2>/tmp/error.txt</strong>
$ <strong>cat /tmp/error.txt</strong>
cat: /proc/cpu_info: No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>Both stdout and stderr are redirected to the same target with <code>&amp;&gt;</code> or <code>&gt;&amp;</code>. It&#8217;s important to not place any spaces beside the ampersand, otherwise Bash will take it as the instruction to run the process in background and not to perform the redirect.</p>
</div>
<div class="paragraph">
<p>The target must be a path to a writable file, like <code>/tmp/cpu.txt</code>, or a writable file descriptor. A file descriptor target is represented by an ampersand followed by the file descriptor&#8217;s numerical value. For example, <code>1&gt;&amp;2</code> redirects stdout to stderr. To do the opposite, stderr to stdout, <code>2&gt;&amp;1</code> should be used instead.</p>
</div>
<div class="paragraph">
<p>Although not very useful, given that there is a shorter way to do the same task, it is possible to redirect stderr to stdout and then redirect it to a file. For example, a redirect to write both stderr and stdout to a file named <code>log.txt</code> can be written as <code>&gt;log.txt 2&gt;&amp;1</code>. However, the main reason for redirecting stderr to stdout is to allow parsing of debug and error messages. It is possible to redirect the standard output of a program to the standard input of another program, but it is not possible to directly redirect the standard error to the standard input of another program. Thus, program&#8217;s messages sent to stderr first need to be redirected to stdout in order to be read by another program&#8217;s stdin.</p>
</div>
<div class="paragraph">
<p>To just discard the output of a command, its content can be redirected to the special file <code>/dev/null</code>. For example, <code>&gt;log.txt 2&gt;/dev/null</code> saves the contents of stdout in the file <code>log.txt</code> and discards the stderr. The file <code>/dev/null</code> is writable by any user but no data can be recovered from it, as it is not stored anywhere.</p>
</div>
<div class="paragraph">
<p>An error message is presented if the specified target is not writable (if the path points to a directory or a read-only file) and no modification to the target is made. However, an output redirect overwrites an existing writable target without any confirmation. Files are overwritten by output redirects unless Bash option <code>noclobber</code> is enabled, which can be done for the current session with the command <code>set -o noclobber</code> or <code>set -C</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>set -o noclobber</strong>
$ <strong>cat /proc/cpu_info 2>/tmp/error.txt</strong>
-bash: /tmp/error.txt: cannot overwrite existing file</pre>
</div>
</div>
<div class="paragraph">
<p>To unset the <code>noclobber</code> option for the current session, run <code>set +o noclobber</code> or <code>set +C</code>. To make the <code>noclobber</code> option persistent, it must be included in the user&#8217;s Bash profile or in the system-wide profile.</p>
</div>
<div class="paragraph">
<p>Even with the <code>noclobber</code> option enabled it is possible to append redirected data to existent content. This is accomplished with a redirection written with two greater than symbols <code>&gt;&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpu_info 2>>/tmp/error.txt</strong>
$ <strong>cat /tmp/error.txt</strong>
cat: /proc/cpu_info: No such file or directory
cat: /proc/cpu_info: No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>In the previous example, the new error message was appended to the existing one in file <code>/tmp/error.txt</code>. If the file does not exist yet, it will be created with the new data.</p>
</div>
<div class="paragraph">
<p>The data source of the standard input of a process can be reassigned as well. The less than symbol <code>&lt;</code> is used to redirect the content of a file to the stdin of a process. In this case, data flows from right to left: the reassigned descriptor is assumed to be 0 at the left of the less than symbol and the data source (a path to a file) must be at the right of the less than symbol. The command <code>uniq</code>, like most command line utilities for processing text, accepts data sent to stdin by default:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>uniq -c &lt;/tmp/error.txt</strong>
      2 cat: /proc/cpu_info: No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-c</code> option makes <code>uniq</code> display how many times a repeated line appears in the text. As the numeric value of the redirected file descriptor was suppressed, the example command is equivalent to <code>uniq -c 0&lt;/tmp/error.txt</code>. To use a file descriptor other than <code>0</code> in an input redirect only makes sense in specific contexts, because it is possible for a program to ask for data at file descriptors <code>3</code>, <code>4</code>, etc. Indeed, programs can use any integer above 2 as new file descriptors for data input/output. For example, the following C code reads data from file descriptor <code>3</code> and just replicates it to file descriptor <code>4</code>:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The program must handle such file descriptors correctly, otherwise it could attempt an invalid read or write operation and crash.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>#include &lt;stdio.h&gt;

int main(int argc, char **argv){
  FILE *fd_3, *fd_4;
  // Open file descriptor 3
  fd_3 = fdopen(3, "r");
  // Open file descriptor 4
  fd_4 = fdopen(4, "w");
  // Read from file descriptor 3
  char buf[32];
  while ( fgets(buf, 32, fd_3) != NULL ){
    // Write to file descriptor 4
    fprintf(fd_4, "%s", buf);
  }
  // Close both file descriptors
  fclose(fd_3);
  fclose(fd_4);
}</pre>
</div>
</div>
<div class="paragraph">
<p>To test it, save the sample code as <code>fd.c</code> and compile it with <code>gcc -o fd fd.c</code>. This program needs file descriptors 3 and 4 to be available so it can read and write to them. As an example, the previously created file <code>/tmp/error.txt</code> can be used as the source for file descriptor <code>3</code> and the file descriptor <code>4</code> can be redirected to stdout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>./fd 3&lt;/tmp/error.txt 4&gt;&amp;1</strong>
cat: /proc/cpu_info: No such file or directory
cat: /proc/cpu_info: No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>From a programmer&#8217;s perspective, using file descriptors avoids having to deal with option parsing and filesystem paths. The same file descriptor can even be used as input and output. In this case, the file descriptor is defined in the command line with both less than and greater than symbols, like in <code>3&lt;&gt;/tmp/error.txt</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="sec.103.4_01-HH">Here Document and Here String</h3>
<div class="paragraph">
<p>Another way to redirect input involve the <em>Here document</em> and <em>Here string</em> methods. The Here document redirect allows to type multi-line text that will be used as the redirected content. Two less than symbols <code>&lt;&lt;</code> indicate a Here document redirect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>wc -c &lt;&lt;EOF</strong>
&gt; How many characters
&gt; in this Here document?
&gt; EOF
43</pre>
</div>
</div>
<div class="paragraph">
<p>At the right of the two less than symbols <code>&lt;&lt;</code> is the ending term <code>EOF</code>. The insertion mode will finish as soon as a line containing only the ending term is entered. Any other term can be used as the ending term, but it is important to not put blank characters between the less than symbol and the ending term. In the example above, the two lines of text were sent to the stdin of <code>wc -c</code> command, which displays the characters count. As with input redirects for files, the stdin (file descriptor <code>0</code>) is assumed if the redirected file descriptor is suppressed.</p>
</div>
<div class="paragraph">
<p>The Here string method is much like the Here document method, but for one line only:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>wc -c &lt;&lt;&lt;"How many characters in this Here string?"</strong>
41</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the string at the right of the three less than signs is sent to the stdin of <code>wc -c</code>, which counts the number of characters. Strings containing spaces must be inside quotes, otherwise only the first word will be used as the Here string and the remaining ones will be passed as arguments to the command.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In addition to text files, the command <code>cat</code> can also work with binary data, like sending the contents of a block device to a file. Using redirection, how can <code>cat</code> send the contents of device <code>/dev/sdc</code> to the file <code>sdc.img</code> in the current directory?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What&#8217;s the name of the standard channel redirected by the command <code>date 1&gt; now.txt</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>After trying to overwrite a file using redirection, a user gets an error informing that option <code>noclobber</code> is enabled. How can the option <code>noclobber</code> be deactivated for the current session?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>What will be the result of command <code>cat &lt;&lt;.&gt;/dev/stdout</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The command <code>cat /proc/cpu_info</code> displays an error message because <code>/proc/cpu_info</code> is nonexistent. The command <code>cat /proc/cpu_info 2&gt;1</code> redirects the error message to where?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Will it still be possible to discard content sent to <code>/dev/null</code> if the <code>noclobber</code> option is enabled for the current shell session?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Without using <code>echo</code>, how could the contents of the variable <code>$USER</code> be redirected to the stdin of command <code>sha1sum</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>The Linux kernel keeps symbolic links in <code>/proc/PID/fd/</code> to every file opened by a process, where <em>PID</em> is the identification number of the corresponding process. How could the system administrator use that directory to verify the location of log files opened by <code>nginx</code>, supposing its PID is <code>1234</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>It&#8217;s possible to do arithmetic calculations using only shell builtin commands, but floating point calculations require specific programs, like <code>bc</code> (<em>basic calculator</em>). With <code>bc</code> it&#8217;s even possible to specify the number of decimal places, with parameter <code>scale</code>. However, <code>bc</code> accepts operations only through its standard input, usually entered in interactive mode. Using a Here string, how can the floating point operation <code>scale=6; 1/3</code> be sent to the standard input of <code>bc</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This lesson covers methods to run a program redirecting its standard communication channels. Linux processes use these standard channels as generic <em>file descriptors</em> to read and to write data, making it possible to arbitrarily change them to files or devices. The lesson goes through the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What file descriptors are and the role they play in Linux.</p>
</li>
<li>
<p>The standard communication channels of every process: <em>stdin</em>, <em>stdout</em> and <em>stderr</em>.</p>
</li>
<li>
<p>How to correctly execute a command using data redirection, both for input and output.</p>
</li>
<li>
<p>How to use <em>Here Documents</em> and <em>Here Strings</em> in input redirections.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The commands and procedures addressed were:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Redirection operators: <code>&gt;</code>, <code>&lt;</code>, <code>&gt;&gt;</code>, <code>&lt;&lt;</code>, <code>&lt;&lt;&lt;</code>.</p>
</li>
<li>
<p>Commands <code>cat</code>, <code>set</code>, <code>uniq</code> and <code>wc</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In addition to text files, the command <code>cat</code> can also work with binary data, like sending the contents of a block device to a file. Using redirection, how can <code>cat</code> send the contents of device <code>/dev/sdc</code> to the file <code>sdc.img</code> in the current directory?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /dev/sdc > sdc.img</strong></pre>
</div>
</div>
</li>
<li>
<p>What&#8217;s the name of the standard channel redirected by the command <code>date 1&gt; now.txt</code>?</p>
<div class="paragraph">
<p>Standard output or stdout</p>
</div>
</li>
<li>
<p>After trying to overwrite a file using redirection, a user gets an error informing that the option <code>noclobber</code> is enabled. How can the option <code>noclobber</code> be deactivated for the current session?</p>
<div class="paragraph">
<p><code>set +C</code> or <code>set +o noclobber</code></p>
</div>
</li>
<li>
<p>What will be the result of command <code>cat &lt;&lt;.&gt;/dev/stdout</code>?</p>
<div class="paragraph">
<p>Bash will enter Heredoc input mode, then exit when a period appears in a line by itself. The typed text will be redirected to stdout (printed on screen).</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.4_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The command <code>cat /proc/cpu_info</code> displays an error message because <code>/proc/cpu_info</code> is nonexistent. The command <code>cat /proc/cpu_info 2&gt;1</code> redirects the error message to where?</p>
<div class="paragraph">
<p>To a file named <code>1</code> in the current directory.</p>
</div>
</li>
<li>
<p>Will it still be possible to discard content sent to <code>/dev/null</code> if the <code>noclobber</code> option is enabled for the current shell session?</p>
<div class="paragraph">
<p>Yes. <code>/dev/null</code> is a special file not affected by <code>noclobber</code>.</p>
</div>
</li>
<li>
<p>Without using <code>echo</code>, how can the contents of the variable <code>$USER</code> be redirected to the stdin of command <code>sha1sum</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sha1sum &lt;&lt;&lt;$USER</strong></pre>
</div>
</div>
</li>
<li>
<p>The Linux kernel keeps symbolic links in <code>/proc/PID/fd/</code> to every file opened by a process, where <em>PID</em> is the identification number of the corresponding process. How could the system administrator use that directory to verify the location of log files opened by <code>nginx</code>, supposing its PID is <code>1234</code>?</p>
<div class="paragraph">
<p>By issuing the command <code>ls -l /proc/1234/fd</code>, which will display the targets of every symbolic link in the directory.</p>
</div>
</li>
<li>
<p>It&#8217;s possible to do arithmetic calculations using only shell builtin commands, but floating point calculations require specific programs, like <code>bc</code> (<em>basic calculator</em>). With <code>bc</code> it&#8217;s even possible to specify the number of decimal places, with parameter <code>scale</code>. However, <code>bc</code> accepts operations only through its standard input, usually entered in interactive mode. Using a Here string, how could the floating point operation <code>scale=6; 1/3</code> be sent to the standard input of <code>bc</code>?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>bc &lt;&lt;&lt;"scale=6; 1/3"</strong></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">103.4 Use streams, pipes and redirects (103.4 Lesson 2)</p>

        <div class="button-group">
            <a href="../103.4_02/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
