

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>103.2 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">103.2 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../102/102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.2/index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.2/102.2_01/index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.4/index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.4/103.4_01/index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.4/103.4_02/index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.5/index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_01/index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.5/103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../104/104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.5/index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.5/104.5_01/index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 103: GNU and Unix Commands</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">103.2 Process text streams using filters</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">103.2 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>103.2 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103 GNU and Unix Commands</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103.2 Process text streams using filters</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dealing with text is a major part of every systems administrator&#8217;s job. Doug McIlroy, a member of the original Unix development team, summarized the Unix philosophy and said (among other important things): &#8220;Write programs to handle text streams, because that is a universal interface.&#8221; Linux is inspired by the Unix operating system and it firmly adopts its philosophy, so an administrator must expect lots of text manipulation tools within a Linux distribution.</p>
</div>
<div class="sect2">
<h3 id="_a_quick_review_on_redirections_and_pipes">A Quick Review on Redirections and Pipes</h3>
<div class="paragraph">
<p>Also from the Unix philosophy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Write programs that do one thing and do it well.</p>
</li>
<li>
<p>Write programs to work together.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>One major way of making programs work together is through <em>piping</em> and <em>redirections</em>. Pretty much all of your text manipulation programs will get text from a standard input (<em>stdin</em>), output it to a standard output (<em>stdout</em>) and send eventual errors to a standard error output (<em>stderr</em>). Unless you specify otherwise, the standard input will be what you type on your keyboard (the program will read it after you press the Enter key). Similarly, the standard output and errors will be displayed in your terminal screen. Let us see how this works.</p>
</div>
<div class="paragraph">
<p>In your terminal, type <code>cat</code> and then hit the Enter key. Then type some random text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat</strong>
This is a test
This is a test
Hey!
Hey!
It is repeating everything I type!
It is repeating everything I type!
(I will hit ctrl+c so I will stop this nonsense)
(I will hit ctrl+c so I will stop this nonsense)
^C</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the <code>cat</code> command (the term comes from &#8220;concatenate&#8221;) please refer to the man pages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you are working on a really plain installation of a Linux server, some commands such as <code>info</code> and <code>less</code> might not be available. If this is the case, install these tools using the proper procedure in your system as described in the corresponding lessons.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As demonstrated above if you do not specify where <code>cat</code> should read from, it will read from the standard input (whatever you type) and output whatever it reads to your terminal window (its standard output).</p>
</div>
<div class="paragraph">
<p>Now try the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat > mytextfile</strong>
This is a test
I hope cat is storing this to mytextfile as I redirected the output
I will hit ctrl+c now and check this
^C

$ <strong>cat mytextfile</strong>
This is a test
I hope cat is storing this to mytextfile as I redirected the output
I will hit ctrl+c now and check this</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&gt;</code> (greater than) tells <code>cat</code> to direct its output to the <code>mytextfile</code> file, not the standard output. Now try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat mytextfile > mynewtextfile</strong>
$ <strong>cat mynewtextfile</strong>
This is a test
I hope cat is storing this to mytextfile as I redirected the output
I will hit ctrl+c now and check this</pre>
</div>
</div>
<div class="paragraph">
<p>This has the effect of copying <code>mytextfile</code> to <code>mynewtextfile</code>. You can actually verify that these two files have the same content by performing a <code>diff</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>diff mynewtextfile mytextfile</strong></pre>
</div>
</div>
<div class="paragraph">
<p>As there is no output, the files are equal. Now try the append redirection operator (<code>&gt;&gt;</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>echo 'This is my new line' &gt;&gt; mynewtextfile</strong>
$ <strong>diff mynewtextfile mytextfile</strong>
4d3
&lt; This is my new line</pre>
</div>
</div>
<div class="paragraph">
<p>So far we have used redirections to create and manipulate files. We can also use pipes (represented by the symbol <code>|</code>) to redirect the output of one program to another program. Let us find the lines where the word &#8220;this&#8221; is found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat mytextfile | grep this</strong>
I hope cat is storing this to mytextfile as I redirected the output
I will hit ctrl+c now and check this

$ <strong>cat mytextfile | grep -i this</strong>
This is a test
I hope cat is storing this to mytextfile as I redirected the output
I will hit ctrl+c now and check this</pre>
</div>
</div>
<div class="paragraph">
<p>Now we have piped the output of <code>cat</code> to another command: <code>grep</code>. Notice when we ignore the case (using the <code>-i</code> option) we get an extra line as a result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_processing_text_streams">Processing Text Streams</h3>
<div class="sect3">
<h4 id="_reading_a_compressed_file">Reading a Compressed File</h4>
<div class="paragraph">
<p>We will create a file called <code>ftu.txt</code> containing a list of the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bzcat
cat
cut
head
less
md5sum
nl
od
paste
sed
sha256sum
sha512sum
sort
split
tail
tr
uniq
wc
xzcat
zcat</pre>
</div>
</div>
<div class="paragraph">
<p>Now we will use the <code>grep</code> command to print all of the lines containing the string <code>cat</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat ftu.txt | grep cat</strong>
bzcat
cat
xzcat
zcat</pre>
</div>
</div>
<div class="paragraph">
<p>Another way to get this information is to just use the <code>grep</code> command to filter the text directly, without the need to use another application to send the text stream to <code>stdout</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep cat ftu.txt</strong>
bzcat
cat
xzcat
zcat</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remember there are many ways to perform the same task using Linux.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are other commands that handle compressed files (<code>bzcat</code> for <code>bzip</code> compressed files, <code>xzcat</code> for <code>xz</code> compressed files and <code>zcat</code> for <code>gzip</code> compressed files) and each one is used to view the contents of a compressed file based on the compression algorithm used.</p>
</div>
<div class="paragraph">
<p>Verify that the newly created file <code>ftu.txt</code> is the only one in the directory, then create a <code>gzip</code> compressed version of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls ftu</strong>*
ftu.txt

$ <strong>gzip ftu.txt</strong>
$ <strong>ls ftu</strong>*
ftu.txt.gz</pre>
</div>
</div>
<div class="paragraph">
<p>Next, use the <code>zcat</code> command to view the contents of the gzipped compressed file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>zcat ftu.txt.gz</strong>
bzcat
cat
cut
head
less
md5sum
nl
od
paste
sed
sha256sum
sha512sum
sort
split
tail
tr
uniq
wc
xzcat
zcat</pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>gzip</code> will compress <code>ftu.txt</code> into <code>ftu.txt.gz</code> and it will remove the original file. By default, no output from the <code>gzip</code> command will be displayed.  However, if you do want <code>gzip</code> to tell you what it is doing, use the <code>-v</code> option for the &#8220;verbose&#8221; output.</p>
</div>
</div>
<div class="sect3">
<h4 id="_viewing_a_file_in_a_pager">Viewing a File in a Pager</h4>
<div class="paragraph">
<p>You know <code>cat</code> concatenates a file to the standard output (once a file is provided after the command). The file <code>/var/log/syslog</code> is where your Linux system stores everything important going on in your system.  Using the <code>sudo</code> command to elevate privileges so as to be able to read the <code>/var/log/syslog</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo cat /var/log/syslog</strong></pre>
</div>
</div>
<div class="paragraph">
<p>&#8230;&#8203;you will see messages scrolling very fast within your terminal window. You can pipe the output to the program <code>less</code> so the results will be paginated. By using <code>less</code> you can use the arrow keys to navigate through the output and also use <code>vi</code> like commands to navigate and search throughout the text.</p>
</div>
<div class="paragraph">
<p>However, rather than pipe the <code>cat</code> command into a pagination program it is more pragmatic to just use the pagination program directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo less /var/log/syslog</strong>
... (output omitted for clarity)</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_getting_a_portion_of_a_text_file">Getting a Portion of a Text File</h4>
<div class="paragraph">
<p>If only the start or end of a file needs to be reviewed, there are other methods available.  The command <code>head</code> is used to read the first ten lines of a file by default, and the command <code>tail</code> is used to read the last ten lines of a file by default. Now try:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo head /var/log/syslog</strong>
Nov 12 08:04:30 hypatia rsyslogd: [origin software="rsyslogd" swVersion="8.1910.0" x-pid="811" x-info="https://www.rsyslog.com"] rsyslogd was HUPed
Nov 12 08:04:30 hypatia systemd[1]: logrotate.service: Succeeded.
Nov 12 08:04:30 hypatia systemd[1]: Started Rotate log files.
Nov 12 08:04:30 hypatia vdr: [928] video directory scanner thread started (pid=882, tid=928, prio=low)
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'A - ATSC'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'C - DVB-C'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'S - DVB-S'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'T - DVB-T'
Nov 12 08:04:30 hypatia vdr[882]: vdr: no primary device found - using first device!
Nov 12 08:04:30 hypatia vdr: [929] epg data reader thread started (pid=882, tid=929, prio=high)
$ <strong>sudo tail /var/log/syslog</strong>
Nov 13 10:24:45 hypatia kernel: [ 8001.679238] mce: CPU7: Core temperature/speed normal
Nov 13 10:24:46 hypatia dbus-daemon[2023]: [session uid=1000 pid=2023] Activating via systemd: service name='org.freedesktop.Tracker1.Miner.Extract' unit='tracker-extract.service' requested by ':1.73' (uid=1000 pid=2425 comm="/usr/lib/tracker/tracker-miner-fs ")
Nov 13 10:24:46 hypatia systemd[2004]: Starting Tracker metadata extractor...
Nov 13 10:24:47 hypatia dbus-daemon[2023]: [session uid=1000 pid=2023] Successfully activated service 'org.freedesktop.Tracker1.Miner.Extract'
Nov 13 10:24:47 hypatia systemd[2004]: Started Tracker metadata extractor.
Nov 13 10:24:54 hypatia kernel: [ 8010.462227] mce: CPU0: Core temperature above threshold, cpu clock throttled (total events = 502907)
Nov 13 10:24:54 hypatia kernel: [ 8010.462228] mce: CPU4: Core temperature above threshold, cpu clock throttled (total events = 502911)
Nov 13 10:24:54 hypatia kernel: [ 8010.469221] mce: CPU0: Core temperature/speed normal
Nov 13 10:24:54 hypatia kernel: [ 8010.469222] mce: CPU4: Core temperature/speed normal
Nov 13 10:25:03 hypatia systemd[2004]: tracker-extract.service: Succeeded.</pre>
</div>
</div>
<div class="paragraph">
<p>To help illustrate the number of lines displayed, we can pipe the output of the <code>head</code> command to the <code>nl</code> command, which will display the number of lines of text streamed into the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo head /var/log/syslog | nl</strong>
1	Nov 12 08:04:30 hypatia rsyslogd: [origin software="rsyslogd" swVersion="8.1910.0" x-pid="811" x-info="https://www.rsyslog.com"] rsyslogd was HUPed
2	Nov 12 08:04:30 hypatia systemd[1]: logrotate.service: Succeeded.
3	Nov 12 08:04:30 hypatia systemd[1]: Started Rotate log files.
4	Nov 12 08:04:30 hypatia vdr: [928] video directory scanner thread started (pid=882, tid=928, prio=low)
5	Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'A - ATSC'
6	Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'C - DVB-C'
7	Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'S - DVB-S'
8	Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'T - DVB-T'
9	Nov 12 08:04:30 hypatia vdr[882]: vdr: no primary device found - using first device!
10	Nov 12 08:04:30 hypatia vdr: [929] epg data reader thread started (pid=882, tid=929, prio=high)</pre>
</div>
</div>
<div class="paragraph">
<p>And we can do the same by piping the output of the <code>tail</code> command to the <code>wc</code> command, which by default will count the number of words within a document, and using the <code>-l</code> switch to print out the number of lines of text that the command has read:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo tail /var/log/syslog | wc -l</strong>
10</pre>
</div>
</div>
<div class="paragraph">
<p>Should an administrator need to review more (or less) of the beginning or end of a file, the <code>-n</code> option can be used to limit the commands' output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo tail -n 5 /var/log/syslog</strong>
Nov 13 10:37:24 hypatia systemd[2004]: tracker-extract.service: Succeeded.
Nov 13 10:37:42 hypatia dbus-daemon[2023]: [session uid=1000 pid=2023] Activating via systemd: service name='org.freedesktop.Tracker1.Miner.Extract' unit='tracker-extract.service' requested by ':1.73' (uid=1000 pid=2425 comm="/usr/lib/tracker/tracker-miner-fs ")
Nov 13 10:37:42 hypatia systemd[2004]: Starting Tracker metadata extractor...
Nov 13 10:37:43 hypatia dbus-daemon[2023]: [session uid=1000 pid=2023] Successfully activated service 'org.freedesktop.Tracker1.Miner.Extract'
Nov 13 10:37:43 hypatia systemd[2004]: Started Tracker metadata extractor.
$ <strong>sudo head -n 12 /var/log/syslog</strong>
Nov 12 08:04:30 hypatia rsyslogd: [origin software="rsyslogd" swVersion="8.1910.0" x-pid="811" x-info="https://www.rsyslog.com"] rsyslogd was HUPed
Nov 12 08:04:30 hypatia systemd[1]: logrotate.service: Succeeded.
Nov 12 08:04:30 hypatia systemd[1]: Started Rotate log files.
Nov 12 08:04:30 hypatia vdr: [928] video directory scanner thread started (pid=882, tid=928, prio=low)
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'A - ATSC'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'C - DVB-C'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'S - DVB-S'
Nov 12 08:04:30 hypatia vdr: [882] registered source parameters for 'T - DVB-T'
Nov 12 08:04:30 hypatia vdr[882]: vdr: no primary device found - using first device!
Nov 12 08:04:30 hypatia vdr: [929] epg data reader thread started (pid=882, tid=929, prio=high)
Nov 12 08:04:30 hypatia vdr: [882] no DVB device found
Nov 12 08:04:30 hypatia vdr: [882] initializing plugin: vnsiserver (1.8.0): VDR-Network-Streaming-Interface (VNSI) Server</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_basics_of_sed_the_stream_editor">The Basics of sed, the Stream Editor</h4>
<div class="paragraph">
<p>Let us take a look at the other files, terms and utilities that do not have <code>cat</code> in their names.  We can do this by passing the <code>-v</code> option to <code>grep</code>, which instructs the command to output only the lines not containing <code>cat</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>zcat ftu.txt.gz | grep -v cat</strong>
cut
head
less
md5sum
nl
od
paste
sed
sha256sum
sha512sum
sort
split
tail
tr
uniq
wc</pre>
</div>
</div>
<div class="paragraph">
<p>Most of what we can do with <code>grep</code> we can also do with <code>sed</code>&#8201;&#8212;&#8201;the stream editor for filtering and transforming text (as stated in the <code>sed</code> manual page). First we will recover our <code>ftu.txt</code> file by decompressing our <code>gzip</code> archive of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>gunzip ftu.txt.gz</strong>
$ <strong>ls ftu</strong>*
ftu.txt</pre>
</div>
</div>
<div class="paragraph">
<p>Now, we can use <code>sed</code> to list only the lines containing the string <code>cat</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /cat/p &lt; ftu.txt</strong>
bzcat
cat
xzcat
zcat</pre>
</div>
</div>
<div class="paragraph">
<p>We have used the less-than sign <code>&lt;</code> to direct the contents of the file <code>ftu.txt into</code> into our <code>sed</code> command. The word enclosed between slashes (i.e. <code>/cat/</code>) is the term we are searching for. The <code>-n</code> option instructs <code>sed</code> to produce no output (unless the ones later instructed by the <code>p</code> command). Try running this same command without the <code>-n</code> option to see what happens. Then try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed /cat/d &lt; ftu.txt</strong>
cut
head
less
md5sum
nl
od
paste
sed
sha256sum
sha512sum
sort
split
tail
tr
uniq
wc</pre>
</div>
</div>
<div class="paragraph">
<p>If we do not use the <code>-n</code> option, <code>sed</code> will print everything from the file except for what the <code>d</code> instructs <code>sed</code> to delete from its output.</p>
</div>
<div class="paragraph">
<p>A common use of <code>sed</code> is to find and replace text within a file.  Suppose you want to change every occurrence of <code>cat</code> to <code>dog</code>. You can use <code>sed</code> to do this by supplying the <code>s</code> option to swap out each instance of the first term, <code>cat</code>, for the second term, <code>dog</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed s/cat/dog/ &lt; ftu.txt</strong>
bzdog
dog
cut
head
less
md5sum
nl
od
paste
sed
sha256sum
sha512sum
sort
split
tail
tr
uniq
wc
xzdog
zdog</pre>
</div>
</div>
<div class="paragraph">
<p>Rather than using a redirection operator (<code>&lt;</code>) to pass the <code>ftu.txt</code> file into our <code>sed</code> command, we can just have the <code>sed</code> command operate on the file directly.  We will try that next, while simultaneously creating a backup of the original file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -i.backup s/cat/dog/ ftu.txt</strong>
$ <strong>ls ftu</strong>*
ftu.txt  ftu.txt.backup</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-i</code> option will perform an in-place <code>sed</code> operation on your <em>original</em> file.  If you do not use the <code>.backup</code> after the <code>-i</code> parameter, you would just have rewritten your <em>original</em> file. Whatever you use as text after the <code>-i</code> parameter will be the name the original file will be saved to prior to the modifications you asked <code>sed</code> to perform.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ensuring_data_integrity">Ensuring Data Integrity</h4>
<div class="paragraph">
<p>We have demonstrated how easy it is to manipulate files in Linux.  There are times where you may wish to distribute a file to someone else, and you want to be sure that the recipient ends up with a true copy of the original file.  A very common use of this technique is practiced when Linux distribution servers host downloadable CD or DVD images of their software along with files that contain the calculated checksum values of those disc images.  Here is an example listing from a Debian download mirror:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[PARENTDIR] Parent Directory                                      -
[SUM]       MD5SUMS                              2019-09-08 17:46 274
[CRT]       MD5SUMS.sign                         2019-09-08 17:52 833
[SUM]       SHA1SUMS                             2019-09-08 17:46 306
[CRT]       SHA1SUMS.sign                        2019-09-08 17:52 833
[SUM]       SHA256SUMS                           2019-09-08 17:46 402
[CRT]       SHA256SUMS.sign                      2019-09-08 17:52 833
[SUM]       SHA512SUMS                           2019-09-08 17:46 658
[CRT]       SHA512SUMS.sign                      2019-09-08 17:52 833
[ISO]       debian-10.1.0-amd64-netinst.iso      2019-09-08 04:37 335M
[ISO]       debian-10.1.0-amd64-xfce-CD-1.iso    2019-09-08 04:38 641M
[ISO]       debian-edu-10.1.0-amd64-netinst.iso  2019-09-08 04:38 405M
[ISO]       debian-mac-10.1.0-amd64-netinst.iso  2019-09-08 04:38 334M
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</pre>
</div>
</div>
<div class="paragraph">
<p>In the listing above, the Debian installer image files are accompanied by text files that contain checksums of the files from the various algorithms (MD5, SHA1, SHA256 and SHA512).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A checksum is a value derived from a mathematical computation, based on a cryptographic hash function, against a file.  There are different types of cryptographic hash functions that vary in strength.  The exam will expect you to be familiar with using <code>md5sum</code>, <code>sha256sum</code> and <code>sha512sum</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you download a file (for example, the <code>debian-10.1.0-amd64-netinst.iso</code> image) you would then compare the checksum of the file that was downloaded against a checksum value that was provided for you.</p>
</div>
<div class="paragraph">
<p>Here is an example to illustrate the point.  We will calculate the SHA256 value of the <code>ftu.txt</code> file using the <code>sha256sum</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sha256sum ftu.txt</strong>
345452304fc26999a715652543c352e5fc7ee0c1b9deac6f57542ec91daf261c  ftu.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The long string of characters preceding the file name is the SHA256 checksum value of this text file.  Let us create a file that contains that value, so that we can use it to verify the integrity of our original text file.  We can do this with the same <code>sha256sum</code> command and redirect the output to a file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sha256sum ftu.txt > sha256.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now, to verify the <code>ftu.txt</code> file, we just use the same command and supply the filename that contains our checksum value along with the <code>-c</code> switch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sha256sum -c sha256.txt</strong>
ftu.txt: OK</pre>
</div>
</div>
<div class="paragraph">
<p>The value contained within the file matches the calculated SHA256 checksum for our <code>ftu.txt</code> file, just as we would expect.  However, if the original file were modified (such as a few bytes lost during a file download, or someone had deliberately tampered with it) the value check would fail.  In such cases we know that our file is bad or corrupted, and we can not trust the integrity of its contents.  To prove the point, we will add some text at the end of the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>echo "new entry" >> ftu.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now we will make an attempt to verify the file&#8217;s integrity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sha256sum -c sha256.txt</strong>
ftu.txt: FAILED
sha256sum: WARNING: 1 computed checksum did NOT match</pre>
</div>
</div>
<div class="paragraph">
<p>And we see that the checksum does not match what was expected for the file.  Therefore, we could not trust the integrity of this file.  We could attempt to download a new copy of a file, report the failure of the checksum to the sender of the file, or report it to a data center security team depending on the importance of the file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_looking_deeper_into_files">Looking Deeper into Files</h4>
<div class="paragraph">
<p>The octal dump (<code>od</code>) command is often used for debugging applications and various files.  By itself, the <code>od</code> command will just list out a file&#8217;s contents in octal format.  We can use our <code>ftu.txt</code> file from earlier to practice with this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>od ftu.txt</strong>
0000000 075142 060543 005164 060543 005164 072543 005164 062550
0000020 062141 066012 071545 005163 062155 071465 066565 067012
0000040 005154 062157 070012 071541 062564 071412 062145 071412
0000060 060550 032462 071466 066565 071412 060550 030465 071462
0000100 066565 071412 071157 005164 070163 064554 005164 060564
0000120 066151 072012 005162 067165 070551 073412 005143 075170
0000140 060543 005164 061572 072141 000012
0000151</pre>
</div>
</div>
<div class="paragraph">
<p>The first column of output is the <em>byte offset</em> for each line of output.  Since <code>od</code> prints out information in octal format by default, each line begins with the byte offset of eight bits, followed by eight columns, each containing the octal value of the data within that column.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Recall that a <em>byte</em> is 8 bits in length.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Should you need to view a file&#8217;s contents in hexadecimal format, use the <code>-x</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>od -x ftu.txt</strong>
0000000 7a62 6163 0a74 6163 0a74 7563 0a74 6568
0000020 6461 6c0a 7365 0a73 646d 7335 6d75 6e0a
0000040 0a6c 646f 700a 7361 6574 730a 6465 730a
0000060 6168 3532 7336 6d75 730a 6168 3135 7332
0000100 6d75 730a 726f 0a74 7073 696c 0a74 6174
0000120 6c69 740a 0a72 6e75 7169 770a 0a63 7a78
0000140 6163 0a74 637a 7461 000a
0000151</pre>
</div>
</div>
<div class="paragraph">
<p>Now each of the eight columns after the byte offset are represented by their hexadecimal equivalents.</p>
</div>
<div class="paragraph">
<p>One handy use of the <code>od</code> command is for debugging scripts.  For example, the <code>od</code> command can show us characters that are not normally seen that exist within a file, such as <em>newline</em> entries.  We can do this with the <code>-c</code> option, so that instead of displaying the numerical notation for each byte, these column entries will instead be shown as their character equivalents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>od -c ftu.txt</strong>
0000000   b   z   c   a   t  \n   c   a   t  \n   c   u   t  \n   h   e
0000020   a   d  \n   l   e   s   s  \n   m   d   5   s   u   m  \n   n
0000040   l  \n   o   d  \n   p   a   s   t   e  \n   s   e   d  \n   s
0000060   h   a   2   5   6   s   u   m  \n   s   h   a   5   1   2   s
0000100   u   m  \n   s   o   r   t  \n   s   p   l   i   t  \n   t   a
0000120   i   l  \n   t   r  \n   u   n   i   q  \n   w   c  \n   x   z
0000140   c   a   t  \n   z   c   a   t  \n
0000151</pre>
</div>
</div>
<div class="paragraph">
<p>All of the newline entries within the file are represented by the hidden <code>\n</code> characters.  If you just want to view all of the characters within a file, and do not need to see the byte offset information, the byte offset column can be removed from the output like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>od -An -c ftu.txt</strong>
   b   z   c   a   t  \n   c   a   t  \n   c   u   t  \n   h   e
   a   d  \n   l   e   s   s  \n   m   d   5   s   u   m  \n   n
   l  \n   o   d  \n   p   a   s   t   e  \n   s   e   d  \n   s
   h   a   2   5   6   s   u   m  \n   s   h   a   5   1   2   s
   u   m  \n   s   o   r   t  \n   s   p   l   i   t  \n   t   a
   i   l  \n   t   r  \n   u   n   i   q  \n   w   c  \n   x   z
   c   a   t  \n   z   c   a   t  \n</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Someone just donated a laptop to your school and now you wish to install Linux on it. There is no manual and you were forced to boot it from a USB thumb drive with no graphics whatsoever. You do get a shell terminal and you know, for every processor you have there will be a line for it in the <code>/proc/cpuinfo</code> file:</p>
<div class="listingblock">
<div class="content">
<pre><strong>processor	: 0</strong>
vendor_id	: GenuineIntel
cpu family	: 6
model		: 158

(lines skipped)

<strong>processor	: 1</strong>
vendor_id	: GenuineIntel
cpu family	: 6
model		: 158

(more lines skipped)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Using the commands <code>grep</code> and <code>wc</code> display how many processors you have.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Do the same thing with <code>sed</code> instead of <code>grep</code>.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Explore your local <code>/etc/passwd</code> file with the <code>grep</code>, <code>sed</code>, <code>head</code> and <code>tail</code> commands per the tasks below:</p>
<div class="ulist">
<ul>
<li>
<p>Which users have access to a Bash shell?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Your system has various users that exist to handle specific programs or for administrative purposes. They do not have access to a shell. How many of those exist in your system?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How many users and groups exist in your system (remember: use only the <code>/etc/passwd</code> file)?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>List only the first line, the last line and the tenth line of your <code>/etc/passwd</code> file.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Consider this <code>/etc/passwd</code> file example.  Copy the lines below to a local file named <code>mypasswd</code> for this exercise.</p>
<div class="listingblock">
<div class="content">
<pre>root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
nvidia-persistenced:x:121:128:NVIDIA Persistence Daemon,,,:/nonexistent:/sbin/nologin
libvirt-qemu:x:64055:130:Libvirt Qemu,,,:/var/lib/libvirt:/usr/sbin/nologin
libvirt-dnsmasq:x:122:133:Libvirt Dnsmasq,,,:/var/lib/libvirt/dnsmasq:/usr/sbin/nologin
carol:x:1000:2000:Carol Smith,Finance,,,Main Office:/home/carol:/bin/bash
dave:x:1001:1000:Dave Edwards,Finance,,,Main Office:/home/dave:/bin/ksh
emma:x:1002:1000:Emma Jones,Finance,,,Main Office:/home/emma:/bin/bash
frank:x:1003:1000:Frank Cassidy,Finance,,,Main Office:/home/frank:/bin/bash
grace:x:1004:1000:Grace Kearns,Engineering,,,Main Office:/home/grace:/bin/ksh
henry:x:1005:1000:Henry Adams,Sales,,,Main Office:/home/henry:/bin/bash
john:x:1006:1000:John Chapel,Sales,,,Main Office:/home/john:/bin/bash</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>List all users in group <code>1000</code> (use <code>sed</code> to select only the appropriate field) from your <code>mypasswd</code> file.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>List only the full names of all the users for this group (use <code>sed</code> and <code>cut</code>).</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once more using the <code>mypasswd</code> file from the previous exercises, devise a Bash command that will select one individual from the Main Office to win a raffle contest.  Use the <code>sed</code> command to only print out the lines for the Main Office, and then a <code>cut</code> command sequence to retrieve the first name of each user from these lines.  Next you will want to randomly sort these names and only print out the top name from the list.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>How many people work in Finance, Engineering and Sales? (Consider exploring the <code>uniq</code> command.)</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now you want to prepare a CSV (comma separated values) file so you can easily import, from the <code>mypasswd</code> file in the previous example, the file <code>names.csv</code> into LibreOffice. The file contents will have the following format:</p>
<div class="listingblock">
<div class="content">
<pre>First Name,Last Name,Position
Carol,Smith,Finance
...
John,Chapel,Sales</pre>
</div>
</div>
<div class="paragraph">
<p>Tip: Use the <code>sed</code>, <code>cut</code>, and <code>paste</code> commands to achieve the desired results.  Note that the comma (<code>,</code>) will be the delimiter for this file.</p>
</div>
</li>
<li>
<p>Suppose that the <code>names.csv</code> spreadsheet created in the previous exercise is an important file and we want to make sure nobody will tamper with it from the moment we send it to someone and the moment our recipient receives it. How can we insure the integrity of this file using <code>md5sum</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You promised yourself that you would read a classic book 100 lines per day and you decided to start with <em>Mariner and Mystic</em> by Herman Melville.  Devise a command using <code>split</code> that will separate this book into sections of 100 lines each.  In order to get the book in plain text format, search for it at <a href="https://www.gutenberg.org" class="bare">https://www.gutenberg.org</a>.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using <code>ls -l</code> on the <code>/etc</code> directory, what kind of listing do you get?  Using the <code>cut</code> command on the output of the given <code>ls</code> command how would you display only the file names? What about the filename and the owner of the files?  Along with the <code>ls -l</code> and <code>cut</code> commands, utilize the <code>tr</code> command to <em>squeeze</em> multiple occurrences of a space into a single space to aid in formatting the output with a <code>cut</code> command.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>This exercise assumes you are on a real machine (not a virtual machine).  You must also have a USB stick with you. Review the manual pages for the <code>tail</code> command and find out how to follow a file as text is appended to it. While monitoring the output of a <code>tail</code> command on the <code>/var/log/syslog</code> file, insert a USB stick.  Write out the full command that you would use to get the Product, Manufacturer and the total amount of memory of your USB stick.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dealing with text streams is of great importance when administering any Linux system.  Text streams can be processed using scripts to automate daily tasks or finding relevant debugging information in log files. Here is a short summary of the commands covered in this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>cat</code></dt>
<dd>
<p>Used to combine or read plain text files.</p>
</dd>
<dt class="hdlist1"><code>bzcat</code></dt>
<dd>
<p>Allows for the processing or reading of files compressed using the <code>bzip2</code> method.</p>
</dd>
<dt class="hdlist1"><code>xzcat</code></dt>
<dd>
<p>Allows for the processing or reading of files compressed using the <code>xz</code> method.</p>
</dd>
<dt class="hdlist1"><code>zcat</code></dt>
<dd>
<p>Allows for the processing or reading of files compressed using the <code>gzip</code> method.</p>
</dd>
<dt class="hdlist1"><code>less</code></dt>
<dd>
<p>This command paginates the contents of a file, and allows for navigation and search functionality .</p>
</dd>
<dt class="hdlist1"><code>head</code></dt>
<dd>
<p>This command will display the first 10 lines of a file by default.  With the use of the <code>-n</code> switch fewer or more lines can be displayed.</p>
</dd>
<dt class="hdlist1"><code>tail</code></dt>
<dd>
<p>This command will display the last 10 lines of a file by default.  With the use of the <code>-n</code> switch fewer or more lines can be displayed.  The <code>-f</code> option is used to follow the output of a text file has new data is being written to it.</p>
</dd>
<dt class="hdlist1"><code>wc</code></dt>
<dd>
<p>Short for &#8220;word count&#8221; but depending on the parameters you use it will count characters, words and lines.</p>
</dd>
<dt class="hdlist1"><code>sort</code></dt>
<dd>
<p>Used for the organizing the output of a listing alphabetically, reverse alphabetically, or in a random order.</p>
</dd>
<dt class="hdlist1"><code>uniq</code></dt>
<dd>
<p>Used to list (and count) matching strings.</p>
</dd>
<dt class="hdlist1"><code>od</code></dt>
<dd>
<p>The &#8220;octal dump&#8221; command is used to display a binary file in either octal, decimal, or hexadecimal notation.</p>
</dd>
<dt class="hdlist1"><code>nl</code></dt>
<dd>
<p>The &#8220;number line&#8221; command will display the number of lines in a file as well as recreate a file with each line prepended by its line number.</p>
</dd>
<dt class="hdlist1"><code>sed</code></dt>
<dd>
<p>The stream editor can be used to find matching occurrences of strings using Regular Expressions as well as editing files using pre-defined patterns.</p>
</dd>
<dt class="hdlist1"><code>tr</code></dt>
<dd>
<p>The translate command can replace characters and also removes and compresses repeating characters.</p>
</dd>
<dt class="hdlist1"><code>cut</code></dt>
<dd>
<p>This command can print columns of text files as fields based on a file&#8217;s character delimiter.</p>
</dd>
<dt class="hdlist1"><code>paste</code></dt>
<dd>
<p>Join files in columns based on the usage of field separators.</p>
</dd>
<dt class="hdlist1"><code>split</code></dt>
<dd>
<p>This command can split larger files into smaller ones depending on the criteria set by the command&#8217;s options.</p>
</dd>
<dt class="hdlist1"><code>md5sum</code></dt>
<dd>
<p>Used for calculating the MD5 hash value of a file.  Also used to verify a file against an existing hash value to ensure a file&#8217;s integrity.</p>
</dd>
<dt class="hdlist1"><code>sha256sum</code></dt>
<dd>
<p>Used for calculating the SHA256 hash value of a file.  Also used to verify a file against an existing hash value to ensure a file&#8217;s integrity.</p>
</dd>
<dt class="hdlist1"><code>sha512sum</code></dt>
<dd>
<p>Used for calculating the SHA512 hash value of a file.  Also used to verify a file against an existing hash value to ensure a file&#8217;s integrity.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Someone just donated a laptop to your school and now you wish to install Linux on it. There is no manual and you were forced to boot it from a USB thumb drive with no graphics whatsoever. You do get a shell terminal and you know, for every processor you have there will be a line for it in the <code>/proc/cpuinfo</code> file:</p>
<div class="listingblock">
<div class="content">
<pre><strong>processor	: 0</strong>
vendor_id	: GenuineIntel
cpu family	: 6
model		: 158

(lines skipped)

<strong>processor	: 1</strong>
vendor_id	: GenuineIntel
cpu family	: 6
model		: 158

(more lines skipped)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Using the commands <code>grep</code> and <code>wc</code> display how many processors you have.</p>
<div class="paragraph">
<p>Here are two options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat /proc/cpuinfo | grep processor | wc -l</strong>
$ <strong>grep processor /proc/cpuinfo | wc -l</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now that you know there are several ways you can do the same thing, when should you be using one or the other? It really depends on several factors, the two most important ones being performance and readability. Most of the time you will use shell commands inside shell scripts to automate your tasks and the larger and more complex your scripts become the more you need to worry about keeping them fast.</p>
</div>
</li>
<li>
<p>Do the same thing with <code>sed</code> instead of <code>grep</code></p>
<div class="paragraph">
<p>Now, instead of <code>grep</code> we will try this with <code>sed</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /processor/p /proc/cpuinfo | wc -l</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Here we used <code>sed</code> with the <code>-n</code> parameter so <code>sed</code> will not print anything except for what matches with the expression <code>processor</code>, as instructed by the <code>p</code> command. As we did in the <code>grep</code> solutions, <code>wc -l</code> will count the number of lines, thus the number of processors we have.</p>
</div>
<div class="paragraph">
<p>Study this next example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /processor/p /proc/cpuinfo | sed -n '$='</strong></pre>
</div>
</div>
<div class="paragraph">
<p>This command sequence provides identical results to the previous example where the output of <code>sed</code> was piped into a <code>wc</code> command.  The difference here is that instead of using <code>wc -l</code> to count the number of lines, <code>sed</code> is again invoked to provide equivalent functionality.  Once more, we are suppressing the output of <code>sed</code> with with the <code>-n</code> option, except for the expression that we are explicitly calling, which is <code>'$='</code>.  This expression tells <code>sed</code> to match the last line (<code>$</code>) and then to print that line number (<code>=</code>).</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Explore your local <code>/etc/passwd</code> file with the <code>grep</code>, <code>sed</code>, <code>head</code> and <code>tail</code> commands per the tasks below:</p>
<div class="ulist">
<ul>
<li>
<p>Which users have access to a Bash shell?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep ":/bin/bash$" /etc/passwd</strong></pre>
</div>
</div>
<div class="paragraph">
<p>We will improve this answer by only displaying the name of the user that utilizes the Bash shell.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep ":/bin/bash$" /etc/passwd | cut -d: -f1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The user name is the first field (<code>-f1</code> parameter of the <code>cut</code> command) and the <code>/etc/passwd</code> file uses <code>:</code> as separators (<code>-d:</code> parameter of the <code>cut</code> command) we just pipe the output of the <code>grep</code> command to the appropriate <code>cut</code> command.</p>
</div>
</li>
<li>
<p>Your system has various users that exists to handle specific programs or for administrative purposes. They do not have access to a shell. How many of those exist in your system?</p>
<div class="paragraph">
<p>The easiest way to find this is by printing out the lines for accounts that do not use the Bash shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>grep -v ":/bin/bash$" /etc/passwd | wc -l</strong></pre>
</div>
</div>
</li>
<li>
<p>How many users and groups exist in your system (remember: use only the <code>/etc/passwd</code> file)</p>
<div class="paragraph">
<p>The first field of any given line in your <code>/etc/passwd</code> file is the user name, the second is typically an <code>x</code> indicating the user password is not stored here (it is encrypted in the <code>/etc/shadow</code> file). The third is the user id (UID) and the fourth is the group id (GID). So this should give us the number of users:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cut -d: -f3 /etc/passwd | wc -l</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Well, most of the time it will. However, there are situations where you will set different super users or other special kinds of users sharing the same UID (user id). So, to be on the safe side we will pipe the result of our <code>cut</code> command to the <code>sort</code> command and then count the number of lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cut -d: -f3 /etc/passwd | sort -u | wc -l</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now, for the number of groups:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cut -d: -f4 /etc/passwd | sort -u | wc -l</strong></pre>
</div>
</div>
</li>
<li>
<p>List only the first line, the last line and the tenth line of your <code>/etc/passwd</code> file</p>
<div class="paragraph">
<p>This will do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n -e '1'p -e '10'p -e '$'p /etc/passwd</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Remember that the parameter <code>-n</code> tells <code>sed</code> not to print anything other than what is specified by the <code>p</code> command. The dollar sign (<code>$</code>) used here is a regular expression meaning the last line of the file.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Consider this <code>/etc/passwd</code> file example.  Copy the lines below to a local file named <code>mypasswd</code> for this exercise.</p>
<div class="listingblock">
<div class="content">
<pre>root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
nvidia-persistenced:x:121:128:NVIDIA Persistence Daemon,,,:/nonexistent:/sbin/nologin
libvirt-qemu:x:64055:130:Libvirt Qemu,,,:/var/lib/libvirt:/usr/sbin/nologin
libvirt-dnsmasq:x:122:133:Libvirt Dnsmasq,,,:/var/lib/libvirt/dnsmasq:/usr/sbin/nologin
carol:x:1000:2000:Carol Smith,Finance,,,Main Office:/home/carol:/bin/bash
dave:x:1001:1000:Dave Edwards,Finance,,,Main Office:/home/dave:/bin/ksh
emma:x:1002:1000:Emma Jones,Finance,,,Main Office:/home/emma:/bin/bash
frank:x:1003:1000:Frank Cassidy,Finance,,,Main Office:/home/frank:/bin/bash
grace:x:1004:1000:Grace Kearns,Engineering,,,Main Office:/home/grace:/bin/ksh
henry:x:1005:1000:Henry Adams,Sales,,,Main Office:/home/henry:/bin/bash
john:x:1006:1000:John Chapel,Sales,,,Main Office:/home/john:/bin/bash</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>List all users in group 1000 (use <code>sed</code> to select only the appropriate field) from your <code>mypasswd</code> file:</p>
<div class="paragraph">
<p>The GID is the fourth field in the <code>/etc/passwd</code> file. You might be tempted to try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /1000/p mypasswd</strong></pre>
</div>
</div>
<div class="paragraph">
<p>In this case you will also get this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>carol:x:1000:2000:Carol Smith,Finance,,,Main Office:/home/carol:/bin/bash</pre>
</div>
</div>
<div class="paragraph">
<p>You know this is not correct since Carol Smith is a member of GID 2000 and the the match occurred because of the UID. However, you may have noticed that after the GID the next field starts with an upper case character.  We can use a regular expression to solve this problem.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /:1000:[A-Z]/p mypasswd</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The expression <code>[A-Z]</code> will match any single upper case character. You will learn more about this in the respective lesson.</p>
</div>
</li>
<li>
<p>List only the full names of all the users for this group (use <code>sed</code> and <code>cut</code>):</p>
<div class="paragraph">
<p>Use the same technique you used to solve the first part of this exercise and pipe it to a <code>cut</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /:1000:[A-Z]/p mypasswd | cut -d: -f5</strong>
Dave Edwards,Finance,,,Main Office
Emma Jones,Finance,,,Main Office
Frank Cassidy,Finance,,,Main Office
Grace Kearns,Engineering,,,Main Office
Henry Adams,Sales,,,Main Office
John Chapel,Sales,,,Main Office</pre>
</div>
</div>
<div class="paragraph">
<p>Not quite there! Do note how the fields inside your results can be separated by <code>,</code>.  So we will pipe the output to another <code>cut</code> command, using the <code>,</code> as a delimiter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /:1000:[A-Z]/p mypasswd | cut -d: -f5 | cut -d, -f1</strong>
Dave Edwards
Emma Jones
Frank Cassidy
Grace Kearns
Henry Adams
John Chapel</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.2_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once more using the <code>mypasswd</code> file from the previous exercises, devise a Bash command that will select one individual from the Main Office to win a raffle contest.  Use the <code>sed</code> command to only print out the lines for the Main Office, and then a <code>cut</code> command sequence to retrieve the first name of each user from these lines.  Next you will want to randomly sort these names and only print out the top name from the list.</p>
<div class="paragraph">
<p>First explore how the parameter <code>-R</code> manipulates the output of the <code>sort</code> command. Repeat this command a couple times on your machine (note you will need to enclose 'Main Office' within single quotes, so <code>sed</code> will handle it as a single string):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f1 | sort -R</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a solution to the problem:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f1 | sort -R | head -1</strong></pre>
</div>
</div>
</li>
<li>
<p>How many people work in Finance, Engineering and Sales? (Consider exploring the <code>uniq</code> command.)</p>
<div class="paragraph">
<p>Keep building on top of what you learned from the previous exercises.  Try the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd</strong>
$ <strong>sed -n /'Main Office'/p mypasswd | cut -d, -f2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Notice now we do not care about the <code>:</code> as a delimiter. We just want the second field when we split the lines by the <code>,</code> characters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d, -f2 | uniq -c</strong>
      4 Finance
      1 Engineering
      2 Sales</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>uniq</code> command will only output the unique lines (not the repeating lines) and the parameter <code>-c</code> tells <code>uniq</code> to count the occurences of the equal lines. There is a caveat here: <code>uniq</code> will only consider adjacent lines. When this is not the case you will have to use the <code>sort</code> command.</p>
</div>
</li>
<li>
<p>Now you want to prepare a CSV (comma separated values) file so you can easily import, from the <code>mypasswd</code> file in the previous example, the file <code>names.csv</code> into LibreOffice. The file contents will have the following format:</p>
<div class="listingblock">
<div class="content">
<pre>First Name,Last Name,Position
Carol,Smith,Finance
...
John,Chapel,Sales</pre>
</div>
</div>
<div class="paragraph">
<p>Tip: Use the <code>sed</code>, <code>cut</code>, and <code>paste</code> commands to achieve the desired results.  Note that the comma (,) will be the delimiter for this file.</p>
</div>
<div class="paragraph">
<p>Start with the <code>sed</code> and <code>cut</code> commands, building on top of what we learned from the previous exercises:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d" " -f1 > firstname</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have the file <code>firstname</code> with the first names of our employees.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d" " -f2 | cut -d, -f1 > lastname</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have the file <code>lastname</code> containing the surnames of each employee.</p>
</div>
<div class="paragraph">
<p>Next we determine which department each employee works in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f2 > department</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Before we work on the final solution, try the following commands to see what type of output they generate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cat firstname lastname department</strong>
$ <strong>paste firstname lastname department</strong></pre>
</div>
</div>
<div class="paragraph">
<p>And now for the final solution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>paste firstname lastname department | tr '\t' ,</strong>
$ <strong>paste firstname lastname department | tr '\t' , > names.csv</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Here we use the command <code>tr</code> to <em>translate</em> <code>\t</code>, the tab separator, by a <code>,</code>. <code>tr</code> is quite useful when we need to exchange one character for another.  Be sure to review the man pages for both <code>tr</code> and <code>paste</code>.  For example, we can use the <code>-d</code> option for the delimiter to make the previous command less complex:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>paste -d, firstname lastname department</strong></pre>
</div>
</div>
<div class="paragraph">
<p>We used the <code>paste</code> command here once we needed to get you familiar with it. However we could have easily performed all of the tasks in a single command chain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -n /'Main Office'/p mypasswd | cut -d: -f5 | cut -d, -f1,2 | tr ' ' , > names.csv</strong></pre>
</div>
</div>
</li>
<li>
<p>Suppose that the <code>names.csv</code> spreadsheet created in the previous exercise is an important file and we want to make sure nobody will tamper with it from the moment we send it to someone and the moment our recipient receives it. How can we insure the integrity of this file using <code>md5sum</code>?</p>
<div class="paragraph">
<p>If you look into the man pages for <code>md5sum</code>, <code>sha256sum</code> and <code>sha512sum</code> you will see they all start with the following text:</p>
</div>
<div class="paragraph">
<p>&#8220;compute and check XXX message digest&#8221;</p>
</div>
<div class="paragraph">
<p>Where &#8220;XXX&#8221; is the algoritm that will be used to create this <em>message digest</em>.</p>
</div>
<div class="paragraph">
<p>We will use <code>md5sum</code> as an example and later you can try with the other commands.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>md5sum names.csv</strong>
61f0251fcab61d9575b1d0cbf0195e25  names.csv</pre>
</div>
</div>
<div class="paragraph">
<p>Now, for instance, you can make the file available through a secure ftp service and send the generated <em>message digest</em> using another secure means of communication. If the file has been slightly modified the <em>message digest</em> will be completely different. Just to prove it, edit <code>names.csv</code> and change James to Jones as demonstrated here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sed -i.backup s/James/Jones/ names.csv</strong>
$ <strong>md5sum names.csv</strong>
f44a0d68cb480466099021bf6d6d2e65  names.csv</pre>
</div>
</div>
<div class="paragraph">
<p>Whenever you make files available for download, it is always a good practice to also distribute a <em>message digest</em> correspondent so people who download your file can produce a new <em>message digest</em> and check against the original. If you browse through <a href="https://kernel.org" class="bare">https://kernel.org</a> you will find the page <a href="https://mirrors.edge.kernel.org/pub/linux/kernel/v5.x/sha256sums.asc" class="bare">https://mirrors.edge.kernel.org/pub/linux/kernel/v5.x/sha256sums.asc</a> where you can obtain the sha256sum for all files available for download.</p>
</div>
</li>
<li>
<p>You promised yourself that you would read a classic book 100 lines per day and you decided to start with <em>Mariner and Mystic</em> by Herman Melville.  Devise a command using <code>split</code> that will separate this book into sections of 100 lines each.  In order to get the book in plain text format, search for it at <a href="https://www.gutenberg.org" class="bare">https://www.gutenberg.org</a>.</p>
<div class="paragraph">
<p>First we will get the whole book from the Project Gutenberg site, where you can get this and other books that are available in the public domain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>wget https://www.gutenberg.org/files/50461/50461-0.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>You might need to install <code>wget</code> if it is not already installed in your system. Alternatively, you can also use <code>curl</code>. Use <code>less</code> to verify the book:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>less 50461-0.txt</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now we will split the book into chunks of 100 lines each:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>split -l 100 -d 50461-0.txt melville</strong></pre>
</div>
</div>
<div class="paragraph">
<p><code>50461-0.txt</code> is the file we will be splitting. <code>melville</code> will be the prefix for the split files. The <code>-l 100</code> specifies the number of lines and the <code>-d</code> option tells <code>split</code> to number the files (using the provided suffix).  You can use <code>nl</code> on any of the splitted files (probably not on the last one) and confirm each one of them have 100 lines.</p>
</div>
</li>
<li>
<p>Using <code>ls -l</code> on the <code>/etc</code> directory, what kind of listing do you get?  Using the <code>cut</code> command on the output of the given <code>ls</code> command how would you display only the file names? What about the filename and the owner of the files?  Along with the <code>ls -l</code> and <code>cut</code> commands, utilize the <code>tr</code> command to <em>squeeze</em> multiple occurrences of a space into a single space to aid in formatting the output with a <code>cut</code> command.</p>
<div class="paragraph">
<p>The <code>ls</code> command by itself will give you just the names of the files. We can, however, prepare the output of the <code>ls -l</code> (the long listing) to extract more specific information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /etc | tr -s ' ' ,</strong>
drwxr-xr-x,3,root,root,4096,out,24,16:58,acpi
-rw-r--r--,1,root,root,3028,dez,17,2018,adduser.conf
-rw-r--r--,1,root,root,10,out,2,17:38,adjtime
drwxr-xr-x,2,root,root,12288,out,31,09:40,alternatives
-rw-r--r--,1,root,root,401,mai,29,2017,anacrontab
-rw-r--r--,1,root,root,433,out,1,2017,apg.conf
drwxr-xr-x,6,root,root,4096,dez,17,2018,apm
drwxr-xr-x,3,root,root,4096,out,24,16:58,apparmor
drwxr-xr-x,9,root,root,4096,nov,6,20:20,apparmor.d</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-s</code> parameter instructs <code>tr</code> to shrink the repeated spaces into a single instance of a space. The <code>tr</code> command works for any kind of repeating character you specify. Then we replace the spaces with a comma <code>,</code>.  We actually do not need to replace the spaces in our example so we will just omit the <code>,</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /etc | tr -s ' '</strong>
drwxr-xr-x 3 root root 4096 out 24 16:58 acpi
-rw-r--r-- 1 root root 3028 dez 17 2018 adduser.conf
-rw-r--r-- 1 root root 10 out 2 17:38 adjtime
drwxr-xr-x 2 root root 12288 out 31 09:40 alternatives
-rw-r--r-- 1 root root 401 mai 29 2017 anacrontab
-rw-r--r-- 1 root root 433 out 1 2017 apg.conf
drwxr-xr-x 6 root root 4096 dez 17 2018 apm
drwxr-xr-x 3 root root 4096 out 24 16:58 apparmor</pre>
</div>
</div>
<div class="paragraph">
<p>If I want just the filenames then all that we need displayed is the ninth field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /etc | tr -s ' ' | cut -d" " -f9</strong></pre>
</div>
</div>
<div class="paragraph">
<p>For the filename and the owner of a file we will need the ninth and the third fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /etc | tr -s ' ' | cut -d" " -f9,3</strong></pre>
</div>
</div>
<div class="paragraph">
<p>What if we just need the folder names and its owner?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ls -l /etc | grep ^d | tr -s ' ' | cut -d" " -f9,3</strong></pre>
</div>
</div>
</li>
<li>
<p>This exercise assumes you are on a real machine (not a virtual machine).  You must also have a USB stick with you. Review the manual pages for the <code>tail</code> command and find out how to follow a file as text is appended to it. While monitoring the output of a <code>tail</code> command on the <code>/var/log/syslog</code> file, insert a USB stick.  Write out the full command that you would use to get the Product, Manufacturer and the total amount of memory of your USB stick.</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>tail -f /var/log/syslog | grep -i 'product\:\|blocks\|manufacturer'</strong>
Nov  8 06:01:35 brod-avell kernel: [124954.369361] usb 1-4.3: Product: Cruzer Blade
Nov  8 06:01:35 brod-avell kernel: [124954.369364] usb 1-4.3: Manufacturer: SanDisk
Nov  8 06:01:37 brod-avell kernel: [124955.419267] sd 2:0:0:0: [sdc] 61056064 512-byte logical blocks: (31.3 GB/29.1 GiB)</pre>
</div>
</div>
<div class="paragraph">
<p>Of course this is an example and the results may vary depending on your USB memory stick manufacturer. Notice now we use the <code>-i</code> parameter with the <code>grep</code> command as we are not sure if the strings we are searching for were in upper or lower case. We also used the <code>|</code> as a logical OR so we search for lines containing <code>product</code> OR <code>blocks</code> OR <code>manufacturer</code>.</p>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">103.3 Perform basic file management (103.3 Lesson 1)</p>

        <div class="button-group">
            <a href="../../103.3/103.3_01/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
