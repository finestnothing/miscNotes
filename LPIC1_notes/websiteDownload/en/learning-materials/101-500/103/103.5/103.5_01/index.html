

<!DOCTYPE html>
<html lang="en-us">
<head>


  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WMC4KTP');</script>
  



  <meta charset="utf-8"/>
  <title>103.5 Lesson 1</title>

  <link rel="stylesheet" href="../../../../../../scss/styles.min.css">

  
  <link rel="apple-touch-icon" sizes="152x152" href="https://learning.lpi.org/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://learning.lpi.org/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://learning.lpi.org/favicon-16x16.png">
  <link rel="manifest" href="https://learning.lpi.org/site.webmanifest">
  <link rel="mask-icon" href="https://learning.lpi.org/safari-pinned-tab.svg" color="#fbc000">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="page">



  
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WMC4KTP"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  



  

<header class="header">
  <span class="header__nav -clone"></span>

  <a href="https://learning.lpi.org/" class="header__logo-link">
    <img class="header__logo" src="../../../../../../lpi-learning-logo.svg" alt="Linux Professional Institute Learning Logo.">
  </a>

  <nav class="header__nav nav">
    <a href="index.html#content" class="nav__skip">Skip to main content</a>

    <button class="nav__button" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav__menus">
      <ul class="nav__menu">
        
          <li class="nav__item
              
              
              ">


            
              <a href="https://learning.lpi.org/en/" class="nav__link">Home</a>
            


            
          </li>
        
          <li class="nav__item
              -has-submenu
              -is-active
              ">


            
              <button class="nav__link" type="button">Learning Materials</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/all-materials/" class="nav__link
                      ">All Resources</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/learning-materials/" class="nav__link
                      ">LPI Learning Materials</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/learning-materials/become-contributor/" class="nav__link
                      ">Become a Contributor</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">Publishing Partners</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/lpp-partners/" class="nav__link
                      ">Publishing Partners</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/lpi-publishing-partner/become-lpp/" class="nav__link
                      ">Become a Publishing Partner</a>
                  </li>
                
              </ul>
            
          </li>
        
          <li class="nav__item
              -has-submenu
              
              ">


            
              <button class="nav__link" type="button">About</button>
            


            
              <ul class="nav__menu -submenu">
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/about/" class="nav__link
                      ">About</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/faq/" class="nav__link
                      ">FAQ</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/lm-contributors/" class="nav__link
                      ">Contributors</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/roadmap/" class="nav__link
                      ">Roadmap</a>
                  </li>
                
                  <li class="nav__item
                      ">
                    <a href="https://learning.lpi.org/en/about/contact/" class="nav__link
                      ">Contact</a>
                  </li>
                
              </ul>
            
          </li>
        
      </ul>

      <ul class="nav__menu -secondary">
        <li class="nav__item -lang-select">
        
<select name="language-picker" id="lang-select" class="lang-select" title='Language' aria-label='Language'>
  
    <option value="es"
      >Español</option>
  
    <option value="de"
      >Deutsch</option>
  
    <option value="en"
      selected>English</option>
  
    <option value="it"
      >Italiano</option>
  
    <option value="pt"
      >Português</option>
  
</select>


        </li>
        <li class="nav__item -external">
        <a href="https://lpi.org/" class="nav__link" target="_blank" rel="noreferrer noopener">LPI.org</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <table class="print-header">
    <tr class="print-header__body">
      <td class="print-header__cell">103.5 Lesson 1</td>
      <td class="print-header__cell -pagenumber"></td>
    </tr>
  </table>

  <table class="print">
    <thead><tr><td class="print__cell">
      <div class="print__space -header"></div>
    </td></tr></thead>
    <tbody><tr><td class="print__cell">
      <main id="content">




<div class="lesson page-content">
  <div class="lesson__hierarchy page-content__hierarchy">
    <nav class="hierarchy">
  

  <div class="hierarchy__container">
     
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 101: System Architecture
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../101/101.1/index.html" class="hierarchy__link">101.1 Determine and configure hardware settings</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.1/101.1_01/index.html" class="hierarchy__link">101.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.2/index.html" class="hierarchy__link">101.2 Boot the system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.2/101.2_01/index.html" class="hierarchy__link">101.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../101/101.3/index.html" class="hierarchy__link">101.3 Change runlevels / boot targets and shutdown or reboot system</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../101/101.3/101.3_01/index.html" class="hierarchy__link">101.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 102: Linux Installation and Package Management
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../102/102.1/index.html" class="hierarchy__link">102.1 Design hard disk layout</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.1/102.1_01/index.html" class="hierarchy__link">102.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.2/index.html" class="hierarchy__link">102.2 Install a boot manager</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.2/102.2_01/index.html" class="hierarchy__link">102.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.3/index.html" class="hierarchy__link">102.3 Manage shared libraries</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.3/102.3_01/index.html" class="hierarchy__link">102.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.4/index.html" class="hierarchy__link">102.4 Use Debian package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.4/102.4_01/index.html" class="hierarchy__link">102.4 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.5/index.html" class="hierarchy__link">102.5 Use RPM and YUM package management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.5/102.5_01/index.html" class="hierarchy__link">102.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../102/102.6/index.html" class="hierarchy__link">102.6 Linux as a virtualization guest</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../102/102.6/102.6_01/index.html" class="hierarchy__link">102.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section -is-active">
        <dt class="hierarchy__heading">Topic 103: GNU and Unix Commands
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../103.1/index.html" class="hierarchy__link">103.1 Work on the command line</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_01/index.html" class="hierarchy__link">103.1 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.1/103.1_02/index.html" class="hierarchy__link">103.1 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.2/index.html" class="hierarchy__link">103.2 Process text streams using filters</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.2/103.2_01/index.html" class="hierarchy__link">103.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.3/index.html" class="hierarchy__link">103.3 Perform basic file management</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_01/index.html" class="hierarchy__link">103.3 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.3/103.3_02/index.html" class="hierarchy__link">103.3 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.4/index.html" class="hierarchy__link">103.4 Use streams, pipes and redirects</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.4/103.4_01/index.html" class="hierarchy__link">103.4 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.4/103.4_02/index.html" class="hierarchy__link">103.4 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../index.html" class="hierarchy__link">103.5 Create, monitor and kill processes</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="index.html" class="hierarchy__link">103.5 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../103.5_02/index.html" class="hierarchy__link">103.5 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.6/index.html" class="hierarchy__link">103.6 Modify process execution priorities</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.6/103.6_01/index.html" class="hierarchy__link">103.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.7/index.html" class="hierarchy__link">103.7 Search text files using regular expressions</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_01/index.html" class="hierarchy__link">103.7 Lesson 1</a>
            </li>
            
            <li class="hierarchy__item">
              <a href="../../103.7/103.7_02/index.html" class="hierarchy__link">103.7 Lesson 2</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../103.8/index.html" class="hierarchy__link">103.8 Basic file editing</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../103.8/103.8_01/index.html" class="hierarchy__link">103.8 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
      <dl class="hierarchy__section">
        <dt class="hierarchy__heading">Topic 104: Devices, Linux Filesystems, Filesystem Hierarchy Standard
          <button class="hierarchy__toggle-button" aria-hidden="true">
            <span class="hierarchy__toggle-button__icon"></span>
          </button>
        </dt>

        
        <dd class="hierarchy__item">
          <a href="../../../104/104.1/index.html" class="hierarchy__link">104.1 Create partitions and filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.1/104.1_01/index.html" class="hierarchy__link">104.1 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.2/index.html" class="hierarchy__link">104.2 Maintain the integrity of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.2/104.2_01/index.html" class="hierarchy__link">104.2 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.3/index.html" class="hierarchy__link">104.3 Control mounting and unmounting of filesystems</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.3/104.3_01/index.html" class="hierarchy__link">104.3 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.5/index.html" class="hierarchy__link">104.5 Manage file permissions and ownership</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.5/104.5_01/index.html" class="hierarchy__link">104.5 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.6/index.html" class="hierarchy__link">104.6 Create and change hard and symbolic links</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.6/104.6_01/index.html" class="hierarchy__link">104.6 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
        <dd class="hierarchy__item">
          <a href="../../../104/104.7/index.html" class="hierarchy__link">104.7 Find system files and place files in the correct location</a>

          <ul class="hierarchy__section -sub">
            
            <li class="hierarchy__item">
              <a href="../../../104/104.7/104.7_01/index.html" class="hierarchy__link">104.7 Lesson 1</a>
            </li>
            
          </ul>
        </dd>
        
      </dl>
      
  </div>
</nav>

  </div>



  <div class="lesson__container page-content__container">
    <div class="container">
      <nav class="lesson__breadcrumb breadcrumb">
        <ol class="breadcrumb__list">
          
          <li class="breadcrumb__item">
            <a href="../../index.html" class="breadcrumb__link">Topic 103: GNU and Unix Commands</a>
          </li>
          
          
          <li class="breadcrumb__item">
            <a href="../index.html" class="breadcrumb__link">103.5 Create, monitor and kill processes</a>
          </li>
          
          <li class="breadcrumb__item">
            <a href="index.html" class="breadcrumb__link">103.5 Lesson 1</a>
          </li>
        </ol>
      </nav>

      
      <section class="lesson__content">
        
          <h1>103.5 Lesson 1</h1>
          <div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch fronttable">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Certificate:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPIC-1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Version:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Topic:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103 GNU and Unix Commands</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Objective:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">103.5 Create, monitor and kill processes</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Lesson:</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1 of 2</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-IN">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every time we invoke a command, one or more processes are started. A well-trained system administrator not only needs to create processes, but also be able to keep track of them and send them different types of signals if and when required. In this lesson we will look at job control and how to monitor processes.</p>
</div>
<div class="sect2">
<h3 id="_job_control">Job Control</h3>
<div class="paragraph">
<p><em>Jobs</em> are processes that have been started interactively through a terminal, sent to the background and have not yet finished execution. You can find out about the active jobs (and their status) in your Linux system by running <code>jobs</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>jobs</code> command above did not produce any output, which means there are no active jobs at the moment. Let us create our first job by running a command that takes some time to finish executing (the <code>sleep</code> command with a parameter of <code>60</code>) and&#8201;&#8212;&#8201;while running&#8201;&#8212;&#8201;press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Z</kbd></span>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sleep 60</strong>
^Z
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
<div class="paragraph">
<p>The execution of the command has been stopped (or&#8201;&#8212;&#8201;rather&#8201;&#8212;&#8201;suspended) and the command prompt is available again. You can look for jobs a second time and will find the <em>suspended</em> one now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
<div class="paragraph">
<p>Let us explain the output:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>[1]</code></dt>
<dd>
<p>This number is the job ID and can be used&#8201;&#8212;&#8201;preceded by a percentage symbol (<code>%</code>)&#8201;&#8212;&#8201;to change the job status by the <code>fg</code>, <code>bg</code> and <code>kill</code> utilities (as you will be shown later).</p>
</dd>
<dt class="hdlist1"><code>+</code></dt>
<dd>
<p>The plus sign indicates the current, default job (that is, the last one being suspended or sent to the background). The previous job is flagged with a minus sign (<code>-</code>). Any other prior jobs are not flagged.</p>
</dd>
<dt class="hdlist1"><code>Stopped</code></dt>
<dd>
<p>Description of the job status.</p>
</dd>
<dt class="hdlist1"><code>sleep 60</code></dt>
<dd>
<p>The command or job itself.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>With the <code>-l</code> option, jobs will additionally display the process ID (PID) right before the status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs -l</strong>
[1]+  1114 Stopped                 sleep 60</pre>
</div>
</div>
<div class="paragraph">
<p>The remaining possible options of jobs are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-n</code></dt>
<dd>
<p>Lists only processes that have changed status since the last notification. Possible status include, <code>Running</code>, <code>Stopped</code>, <code>Terminated</code> or <code>Done</code>.</p>
</dd>
<dt class="hdlist1"><code>-p</code></dt>
<dd>
<p>Lists process IDs.</p>
</dd>
<dt class="hdlist1"><code>-r</code></dt>
<dd>
<p>Lists only running jobs.</p>
</dd>
<dt class="hdlist1"><code>-s</code></dt>
<dd>
<p>Lists only stopped (or suspended) jobs.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Remember, a job has both a <em>job ID</em> and a <em>process ID</em> (PID).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_job_specification">Job Specification</h4>
<div class="paragraph">
<p>The <code>jobs</code> command as well as other utilities such as <code>fg</code>, <code>bg</code> and <code>kill</code> (that you will see in the next section) need a job specification (or <code>jobspec</code>) to act upon a particular job. As we have just seen, this can be&#8201;&#8212;&#8201;and normally is&#8201;&#8212;&#8201;the job ID preceded by <code>%</code>. However, other job specifications are also possible. Let us have a look at them:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>%n</code></dt>
<dd>
<p>Job whose id number is <code>n</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs %1</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>%str</code></dt>
<dd>
<p>Job whose command line starts with <code>str</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs %sl</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>%?str</code></dt>
<dd>
<p>Job whose command line contains <code>str</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs %?le</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>%+</code> or <code>%%</code></dt>
<dd>
<p>Current job (the one that was last started in the background or suspended from the foreground):</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs %+</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>%-</code></dt>
<dd>
<p>Previous job (the one that was <code>%+</code> before the default, current one):</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs %-</strong>
[1]+  Stopped                 sleep 60</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In our case, since there is only one job, it is both current and previous.</p>
</div>
</div>
<div class="sect3">
<h4 id="sec.1.1.2-JobStatus">Job Status: Suspension, Foreground and Background</h4>
<div class="paragraph">
<p>Once a job is in the background or has been suspended, we can do any of three things to it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Take it to the foreground with <code>fg</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>fg %1</strong>
sleep 60</pre>
</div>
</div>
<div class="paragraph">
<p><code>fg</code> moves the specified job to the foreground and makes it the current job. Now we can wait until it finishes, stop it again with <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Z</kbd></span> or terminate it with <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>.</p>
</div>
</li>
<li>
<p>Take it to the background with <code>bg</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>bg %1</strong>
[1]+ sleep 60 &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>Once in the background, the job can be brought back into the foreground with <code>fg</code> or killed (see below). Note the ampersand (<code>&amp;</code>) meaning the job has been sent to the background. As a matter of fact, you can also use the ampersand to start a process directly in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sleep 100 &amp;</strong>
[2] 970</pre>
</div>
</div>
<div class="paragraph">
<p>Together with the job ID of the new job (<code>[2]</code>), we now get its process ID (<code>970</code>) too. Now both jobs are running in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong>
[1]-  Running                 sleep 60 &amp;
[2]+  Running                 sleep 100 &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>A bit later the first job finishes execution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong>
[1]-  Done                    sleep 60
[2]+  Running                 sleep 100 &amp;</pre>
</div>
</div>
</li>
<li>
<p>Terminate it through a <code>SIGTERM</code> signal with <code>kill</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill %2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>To make sure the job has been terminated, run <code>jobs</code> again:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong>
[2]+  Terminated                 sleep 100</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If no job is specified, <code>fg</code> and <code>bg</code> will act upon the current, default one. <code>kill</code>, however, always needs a job specification.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_detached_jobs_nohup">Detached Jobs: <code>nohup</code></h4>
<div class="paragraph">
<p>The jobs we have seen in the previous sections were all attached to the session of the user who invoked them. That means that if the session is terminated, the jobs are gone. However, it is possible to detach jobs from sessions and have them run even after the session is closed. This is achieved with the <code>nohup</code> (&#8220;no hangup&#8221;) command. The syntax is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>nohup COMMAND &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>Remember, the <code>&amp;</code> sends the process into the background and frees up the terminal you are working at.</p>
</div>
<div class="paragraph">
<p>Let us detach the background job <code>ping localhost</code> from the current session:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>nohup ping localhost &amp;</strong>
[1] 1251
$ nohup: ignoring input and appending output to 'nohup.out'
^C</pre>
</div>
</div>
<div class="paragraph">
<p>The output shows us the job ID (<code>[1]</code>) and the PID (<code>1251</code>), followed by a message telling us about the file <code>nohup.out</code>. This is the default file where <code>stdout</code> and <code>stderr</code> will be saved. Now we can press <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span> to free up the command prompt, close the session, start another one as <code>root</code> and use <code>tail -f</code> to check if the command is running and output is being written to the default file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>exit</strong>
logout
$ <strong>tail -f /home/carol/nohup.out</strong>
64 bytes from localhost (::1): icmp_seq=3 ttl=64 time=0.070 ms
64 bytes from localhost (::1): icmp_seq=4 ttl=64 time=0.068 ms
64 bytes from localhost (::1): icmp_seq=5 ttl=64 time=0.070 ms
^C</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Instead of using the default <code>nohup.out</code> you could have specified the output file of your choice with <code>nohup ping localhost &gt; /path/to/your/file &amp;</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we want to kill the process, we should specify its PID:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># <strong>kill 1251</strong></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_process_monitoring">Process Monitoring</h3>
<div class="paragraph">
<p>A process or task is an instance of a running program. Thus, you create new processes every time you type in commands into the terminal.</p>
</div>
<div class="paragraph">
<p>The <code>watch</code> command executes a program periodically (2 seconds by default) and allows us to <em>watch</em> the program&#8217;s output change over time. For instance, we can monitor how the load average changes as more processes are run by typing <code>watch uptime</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Every  2.0s: uptime          debian: Tue Aug 20 23:31:27 2019

 23:31:27 up 21 min,  1 user,  load average: 0.00, 0.00, 0.00</pre>
</div>
</div>
<div class="paragraph">
<p>The command runs until interrupted so we would have to stop it with <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>. We get two lines as output: the first one corresponds to <code>watch</code> and tells us how often the command will be run (<code>Every  2.0s: uptime</code>), what command/program to watch (<code>uptime</code>) as well as the hostname and date (<code>debian: Tue Aug 20 23:31:27 2019</code>). The second line of output is uptime&#8217;s and includes the time (<code>23:31:27</code>), how much time the system has been up (<code>up 21 min</code>), the number of active users (<code>1 user</code>) and the average system load or number of processes in execution or in waiting state for the last 1, 5 and 15 minutes (<code>load average: 0.00, 0.00, 0.00</code>).</p>
</div>
<div class="paragraph">
<p>Similarly, you can check on memory use as new processes are created with <code>watch free</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Every  2.0s: free            debian: Tue Aug 20 23:43:37 2019

 23:43:37 up 24 min,  1 user,  load average: 0.00, 0.00, 0.00
              total        used        free      shared  buff/cache   available
Mem:       16274868      493984    14729396       35064     1051488    15462040
Swap:      16777212           0    16777212</pre>
</div>
</div>
<div class="paragraph">
<p>To change the update interval for <code>watch</code> use the <code>-n</code> or <code>--interval</code> options plus the number of seconds as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>watch -n 5 free</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now the <code>free</code> command will run every 5 seconds.</p>
</div>
<div class="paragraph">
<p>For more information about the options for <code>uptime</code>, <code>free</code> and <code>watch</code>, please refer to their manual pages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The information provided by <code>uptime</code> and <code>free</code> is also integrated in the more comprehensive tools <code>top</code> and <code>ps</code> (see below).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_sending_signals_to_processes_kill">Sending Signals to Processes: <code>kill</code></h4>
<div class="paragraph">
<p>Every single process has a unique process identifier or PID. One way of finding out the PID of a process is by using the <code>pgrep</code> command followed by the process' name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pgrep sleep</strong>
1201</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A process' identifier can also be discovered through the <code>pidof</code> command (e.g. <code>pidof sleep</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similar to <code>pgrep</code>, <code>pkill</code> command kills a process based on its name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pkill sleep</strong>
[1]+  Terminated              sleep 60</pre>
</div>
</div>
<div class="paragraph">
<p>To kill multiple instances of the same process, the <code>killall</code> command can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sleep 60 &amp;</strong>
[1] 1246
$ <strong>sleep 70 &amp;</strong>
[2] 1247
$ <strong>killall sleep</strong>
[1]-  Terminated              sleep 60
[2]+  Terminated              sleep 70</pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>pkill</code> and <code>killall</code> work much in the same way as <code>kill</code> in that they send a terminating signal to the specified process(es). If no signal is provided, the default of <code>SIGTERM</code> is sent. However, <code>kill</code> only takes either a job or a process ID as an argument.</p>
</div>
<div class="paragraph">
<p>Signals can be specified either by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill -SIGHUP 1247</strong></pre>
</div>
</div>
</li>
<li>
<p>Number:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill -1 1247</strong></pre>
</div>
</div>
</li>
<li>
<p>Option:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill -s SIGHUP 1247</strong></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To have <code>kill</code> work in a similar way to <code>pkill</code> or <code>killall</code> (and save ourselves the commands to find out PIDs first) we can use command substitution:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill -1 $(pgrep sleep)</strong></pre>
</div>
</div>
<div class="paragraph">
<p>As you should already know, an alternative syntax is <code>kill -1 `pgrep sleep`</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>For an exhaustive list of all <code>kill</code> signals and their codes, type <code>kill -l</code> into the terminal. Use <code>-KILL</code> (<code>-9</code> or <code>-s KILL</code>) to kill rebel processes when any other signal fails.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_top_and_ps"><code>top</code> and <code>ps</code></h4>
<div class="paragraph">
<p>When it comes to process monitoring, two invaluable tools are <code>top</code> and <code>ps</code>. Whilst the former produces output dynamically, the latter does it statically. In any case, both are excellent utilities to have a comprehensive view of all processes in the system.</p>
</div>
<div class="sect4">
<h5 id="_interacting_with_top">Interacting with <code>top</code></h5>
<div class="paragraph">
<p>To invoke <code>top</code>, simply type <code>top</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>top</strong>

top - 11:10:29 up  2:21,  1 user,  load average: 0,11, 0,20, 0,14
Tasks:  73 total,   1 running,  72 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0,0 us,  0,3 sy,  0,0 ni, 99,7 id,  0,0 wa,  0,0 hi,  0,0 si,  0,0 st
KiB Mem :  1020332 total,   909492 free,    38796 used,    72044 buff/cache
KiB Swap:  1046524 total,  1046524 free,        0 used.   873264 avail Mem

   PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
   436 carol     20   0   42696   3624   3060 R  0,7  0,4   0:00.30 top
     4 root      20   0       0      0      0 S  0,3  0,0   0:00.12 kworker/0:0
   399 root      20   0   95204   6748   5780 S  0,3  0,7   0:00.22 sshd
     1 root      20   0   56872   6596   5208 S  0,0  0,6   0:01.29 systemd
     2 root      20   0       0      0      0 S  0,0  0,0   0:00.00 kthreadd
     3 root      20   0       0      0      0 S  0,0  0,0   0:00.02 ksoftirqd/0
     5 root       0 -20       0      0      0 S  0,0  0,0   0:00.00 kworker/0:0H
     6 root      20   0       0      0      0 S  0,0  0,0   0:00.00 kworker/u2:0
     7 root      20   0       0      0      0 S  0,0  0,0   0:00.08 rcu_sched
     8 root      20   0       0      0      0 S  0,0  0,0   0:00.00 rcu_bh
     9 root      rt   0       0      0      0 S  0,0  0,0   0:00.00 migration/0
    10 root       0 -20       0      0      0 S  0,0  0,0   0:00.00 lru-add-drain
    (...)</pre>
</div>
</div>
<div class="paragraph">
<p><code>top</code> allows the user some interaction. By default, the output is sorted by the percentage of CPU time used by each process in descending order. This behavior can be modified by pressing the following keys from within <code>top</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>M</code></dt>
<dd>
<p>Sort by <em>memory</em> usage.</p>
</dd>
<dt class="hdlist1"><code>N</code></dt>
<dd>
<p>Sort by process ID <em>number</em>.</p>
</dd>
<dt class="hdlist1"><code>T</code></dt>
<dd>
<p>Sort by running <em>time</em>.</p>
</dd>
<dt class="hdlist1"><code>P</code></dt>
<dd>
<p>Sort by <em>percentage</em> of CPU usage.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>To switch between descending/ascending order just press <code>R</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Other interesting keys to interact with <code>top</code> are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>?</code> or <code>h</code></dt>
<dd>
<p>Help.</p>
</dd>
<dt class="hdlist1"><code>k</code></dt>
<dd>
<p>Kill a process. <code>top</code> will ask for the <code>PID</code> of the process to be killed as well as for the signal to be sent (by default <code>SIGTERM</code> or <code>15</code>).</p>
</dd>
<dt class="hdlist1"><code>r</code></dt>
<dd>
<p>Change the priority of a process (<code>renice</code>). <code>top</code> will ask you for the <code>nice</code> value. Possible values range from -20 through 19, but only the superuser (<code>root</code>) can set it to a value which is negative or lower than the current one.</p>
</dd>
<dt class="hdlist1"><code>u</code></dt>
<dd>
<p>List processes from a particular user (by default processes from all users are shown).</p>
</dd>
<dt class="hdlist1"><code>c</code></dt>
<dd>
<p>Show programs' absolute paths and differentiate between userspace processes and kernelspace processes (in square brackets).</p>
</dd>
<dt class="hdlist1"><code>V</code></dt>
<dd>
<p>Forest/hierarchy view of processes.</p>
</dd>
<dt class="hdlist1"><code>t</code> and <code>m</code></dt>
<dd>
<p>Change the look of CPU and memory readings respectively in a four-stage cycle: the first two presses show progress bars, the third hides the bar and the fourth brings it back.</p>
</dd>
<dt class="hdlist1"><code>W</code></dt>
<dd>
<p>Save configuration settings to <code>~/.toprc</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>A fancier and more user-friendly version of <code>top</code> is <code>htop</code>. Another&#8201;&#8212;&#8201;perhaps more exhaustive&#8201;&#8212;&#8201;alternative is <code>atop</code>. If not already installed in your system, use your package manager to install them and give them a try.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_an_explanation_of_the_output_of_top">An Explanation of the output of <code>top</code></h5>
<div class="paragraph">
<p><code>top</code> output is divided into two areas: the <em>summary area</em> and the <em>task area</em>.</p>
</div>
<div class="sect5">
<h6 id="_the_summary_area_in_top">The Summary Area in <code>top</code></h6>
<div class="paragraph">
<p>The <em>summary area</em> is made up of the the five top rows and gives us the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>top - 11:10:29 up  2:21,  1 user,  load average: 0,11, 0,20, 0,14</code></p>
<div class="ulist">
<ul>
<li>
<p>current time (in 24-hour format): <code>11:20:29</code></p>
</li>
<li>
<p>uptime (how much time the system has been up and running): <code>up 2:21</code></p>
</li>
<li>
<p>number of users logged in and load average of the CPU for the last 1, 5 and 15 minutes, respectively: <code>load average: 0,11, 0,20, 0,14</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Tasks:  73 total,   1 running,  72 sleeping,   0 stopped,   0 zombie</code> (information about the processes)</p>
<div class="ulist">
<ul>
<li>
<p>total number of processes in active mode: <code>73 total</code></p>
</li>
<li>
<p>running (those being executed): <code>1 running</code></p>
</li>
<li>
<p>sleeping (those waiting to resume execution): <code>72 sleeping</code></p>
</li>
<li>
<p>stopped (by a job control signal): <code>0 stopped</code></p>
</li>
<li>
<p>zombie (those which have completed execution but are still  waiting for their parent process to remove them from the process table): <code>0 zombie</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>%Cpu(s):  0,0 us,  0,3 sy,  0,0 ni, 99,7 id,  0,0 wa,  0,0 hi,  0,0 si,  0,0 st</code> (percentage of CPU time spent on)</p>
<div class="ulist">
<ul>
<li>
<p>user processes: <code>0,0 us</code></p>
</li>
<li>
<p>system/kernel processes: <code>0,4 sy</code></p>
</li>
<li>
<p>processes set to a <em>nice</em> value&#8201;&#8212;&#8201;the nicer the value, the lower the priority: <code>0,0 ni</code></p>
</li>
<li>
<p>nothing&#8201;&#8212;&#8201;idle CPU time: <code>99,7 id</code></p>
</li>
<li>
<p>processes waiting for I/O operations: <code>0,0 wa</code></p>
</li>
<li>
<p>processes serving hardware interrupts&#8201;&#8212;&#8201;peripherals sending the processor signals that require attention: <code>0,0 hi</code></p>
</li>
<li>
<p>processes serving software interrupts: <code>0,0 si</code></p>
</li>
<li>
<p>processes serving other virtual machine&#8217;s tasks in a virtual environment, hence steal time: <code>0,0 st</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>KiB Mem :  1020332 total,   909492 free,    38796 used,    72044 buff/cache</code> (memory information in kilobytes)</p>
<div class="ulist">
<ul>
<li>
<p>the total amount of memory: <code>1020332 total</code></p>
</li>
<li>
<p>unused memory: <code>909492 free</code></p>
</li>
<li>
<p>memory in use: <code>38796 used</code></p>
</li>
<li>
<p>the memory which is buffered and cached to avoid excessive disk access: <code>72044 buff/cache</code></p>
<div class="paragraph">
<p>Notice how the <code>total</code> is the sum of the other three values&#8201;&#8212;&#8201;<code>free</code>, <code>used</code> and <code>buff/cache</code>&#8201;&#8212;&#8201;(roughly 1 GB in our case).</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>KiB Swap:  1046524 total,  1046524 free,   0 used.   873264 avail Mem</code> (swap information in kilobytes)</p>
<div class="ulist">
<ul>
<li>
<p>the total amount of swap space: <code>1046524 total</code></p>
</li>
<li>
<p>unused swap space: <code>1046524 free</code></p>
</li>
<li>
<p>swap space in use: <code>0 used</code></p>
</li>
<li>
<p>the amount of swap memory that can be allocated to processes without causing more swapping: <code>873264 avail Mem</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_the_task_area_in_top_fields_and_columns">The Task Area in <code>top</code>: Fields and Columns</h6>
<div class="paragraph">
<p>Below the <em>summary area</em> there comes the <em>task area</em>, which includes a series of <em>fields</em> and <em>columns</em> reporting information about the running processes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>PID</code></dt>
<dd>
<p>Process identifier.</p>
</dd>
<dt class="hdlist1"><code>USER</code></dt>
<dd>
<p>User who issued the command that generated the process.</p>
</dd>
<dt class="hdlist1"><code>PR</code></dt>
<dd>
<p>Priority of process to the kernel.</p>
</dd>
<dt class="hdlist1"><code>NI</code></dt>
<dd>
<p>Nice value of process. Lower values have a higher priority than higher ones.</p>
</dd>
<dt class="hdlist1"><code>VIRT</code></dt>
<dd>
<p>Total amount of memory used by process (including Swap).</p>
</dd>
<dt class="hdlist1"><code>RES</code></dt>
<dd>
<p>RAM memory used by process.</p>
</dd>
<dt class="hdlist1"><code>SHR</code></dt>
<dd>
<p>Shared memory of the process with other processes.</p>
</dd>
<dt class="hdlist1"><code>S</code></dt>
<dd>
<p>Status of process. Values include: <code>S</code> (interruptible sleep&#8201;&#8212;&#8201;waiting for an event to finish), <code>R</code> (runnable&#8201;&#8212;&#8201;either executing or in the queue to be executed) or <code>Z</code> (zombie&#8201;&#8212;&#8201;terminated child processes whose data structures have not yet been removed from the process table).</p>
</dd>
<dt class="hdlist1"><code>%CPU</code></dt>
<dd>
<p>Percentage of CPU used by process.</p>
</dd>
<dt class="hdlist1"><code>%MEM</code></dt>
<dd>
<p>Percentage of RAM used by process, that is, the <code>RES</code> value expressed as a percentage.</p>
</dd>
<dt class="hdlist1"><code>TIME+</code></dt>
<dd>
<p>Total time of activity of process.</p>
</dd>
<dt class="hdlist1"><code>COMMAND</code></dt>
<dd>
<p>Name of command/program which generated the process.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_viewing_processes_statically_ps">Viewing processes statically: <code>ps</code></h5>
<div class="paragraph">
<p>As said above, <code>ps</code> shows a snapshot of processes. To see all processes with a terminal (tty), type <code>ps a</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps a</strong>
  PID TTY      STAT   TIME COMMAND
  386 tty1     Ss+    0:00 /sbin/agetty --noclear tty1 linux
  424 tty7     Ssl+   0:00 /usr/lib/xorg/Xorg :0 -seat seat0 (...)
  655 pts/0    Ss     0:00 -bash
 1186 pts/0    R+     0:00 ps a
 (...)</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_an_explanation_of_ps_option_syntax_and_output">An Explanation of <code>ps</code> Option Syntax and Output</h5>
<div class="paragraph">
<p>Concerning options, <code>ps</code> can accept three different styles: BSD, UNIX and GNU. Let us see how each of these styles would work when reporting information about a particular process ID:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">BSD</dt>
<dd>
<p>Options do not follow any leading dash:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps p 811</strong>
  PID TTY      STAT   TIME COMMAND
  811 pts/0    S      0:00 -su</pre>
</div>
</div>
</dd>
<dt class="hdlist1">UNIX</dt>
<dd>
<p>Options do follow a leading dash:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps -p 811</strong>
  PID TTY          TIME CMD
  811 pts/0    00:00:00 bash</pre>
</div>
</div>
</dd>
<dt class="hdlist1">GNU</dt>
<dd>
<p>Options are followed by double leading dashes:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps --pid 811</strong>
  PID TTY          TIME CMD
  811 pts/0    00:00:00 bash</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In all three cases, <code>ps</code> reports information about the process whose <code>PID</code> is <code>811</code>&#8201;&#8212;&#8201;in this case, <code>bash</code>.</p>
</div>
<div class="paragraph">
<p>Similarly, you can use <code>ps</code> to search for the processes started by a particular user:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ps U carol</code> (BSD)</p>
</li>
<li>
<p><code>ps -u carol</code> (UNIX)</p>
</li>
<li>
<p><code>ps --user carol</code> (GNU)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let us check on the processes started by <code>carol</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps U carol</strong>
  PID TTY      STAT   TIME COMMAND
  811 pts/0    S      0:00 -su
  898 pts/0    R+     0:00 ps U carol</pre>
</div>
</div>
<div class="paragraph">
<p>She started two processes: <code>bash</code> (<code>-su</code>) and <code>ps</code> (<code>ps U carol</code>). The <code>STAT</code> column tells us the state of the process (see below).</p>
</div>
<div class="paragraph">
<p>We can get the best out of <code>ps</code> by combining some of its options. A very useful command (producing an output similar to that of <code>top</code>) is <code>ps aux</code> (BSD style). In this case, processes from all shells (not only the current one) are shown. The meaning of the switches are the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>a</code></dt>
<dd>
<p>Show processes that are attached to a <code>tty</code> or terminal.</p>
</dd>
<dt class="hdlist1"><code>u</code></dt>
<dd>
<p>Display user-oriented format.</p>
</dd>
<dt class="hdlist1"><code>x</code></dt>
<dd>
<p>Show processes that are not attached to a <code>tty</code> or terminal.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps aux</strong>
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.1 204504  6780 ?        Ss   14:04   0:00 /sbin/init
root         2  0.0  0.0      0     0 ?        S    14:04   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    14:04   0:00 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S&lt;   14:04   0:00 [kworker/0:0H]
root         7  0.0  0.0      0     0 ?        S    14:04   0:00 [rcu_sched]
root         8  0.0  0.0      0     0 ?        S    14:04   0:00 [rcu_bh]
root         9  0.0  0.0      0     0 ?        S    14:04   0:00 [migration/0]
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>Let us explain the columns:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>USER</code></dt>
<dd>
<p>Owner of process.</p>
</dd>
<dt class="hdlist1"><code>PID</code></dt>
<dd>
<p>Process identifier.</p>
</dd>
<dt class="hdlist1"><code>%CPU</code></dt>
<dd>
<p>Percentage of CPU used.</p>
</dd>
<dt class="hdlist1"><code>%MEM</code></dt>
<dd>
<p>Percentage of physical memory used.</p>
</dd>
<dt class="hdlist1"><code>VSZ</code></dt>
<dd>
<p>Virtual memory of process in KiB.</p>
</dd>
<dt class="hdlist1"><code>RSS</code></dt>
<dd>
<p>Non-swapped physical memory used by process in KiB.</p>
</dd>
<dt class="hdlist1"><code>TT</code></dt>
<dd>
<p>Terminal (<code>tty</code>) controlling the process.</p>
</dd>
<dt class="hdlist1"><code>STAT</code></dt>
<dd>
<p>Code representing the state of process. Apart from <code>S</code>, <code>R</code> and <code>Z</code> (that we saw when describing the output of <code>top</code>), other possible values include: <code>D</code> (uninterruptible sleep&#8201;&#8212;&#8201;usually waiting for I/O), <code>T</code> (stopped&#8201;&#8212;&#8201;normally by a control signal). Some extra modifier include: <code>&lt;</code> (high-priority&#8201;&#8212;&#8201;not nice to other processes), <code>N</code> (low-priority&#8201;&#8212;&#8201;nice to other processes), or <code>+</code> (in the foreground process group).</p>
</dd>
<dt class="hdlist1"><code>STARTED</code></dt>
<dd>
<p>Time at which the process started.</p>
</dd>
<dt class="hdlist1"><code>TIME</code></dt>
<dd>
<p>Accumulated CPU time.</p>
</dd>
<dt class="hdlist1"><code>COMMAND</code></dt>
<dd>
<p>Command that started the process.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-GE">Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>oneko</code> is a nice funny program that displays a cat chasing your mouse cursor. If not already installed in your desktop system, install it using your distribution&#8217;s package manager. We will use it to study job control.</p>
<div class="ulist">
<ul>
<li>
<p>Start the program. How do you do that?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Move the mouse cursor to see how the cat chases it. Now suspend the process. How do you do that? What is the output?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Check how many jobs you currently have. What do you type? What is the output?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now send it to the background specifying its job ID. What is the output? How can you tell the job is running in the background?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Finally, terminate the job specifying its job ID. What do you type?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Discover the PIDs of all the processes spawned by the <em>Apache HTTPD web server</em> (<code>apache2</code>) with two different commands:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Terminate all <code>apache2</code> processes without using their PIDs and with two different commands:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Suppose you have to terminate all instances of <code>apache2</code> and you do not have time to find out what their PIDs are. How would you accomplish that using <code>kill</code> with the default <code>SIGTERM</code> signal in a one-liner:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Start <code>top</code> and interact with it by performing the following:</p>
<div class="ulist">
<ul>
<li>
<p>Show a forest view of processes:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Show full paths of processes differentiating between userspace and kernelspace:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Type the <code>ps</code> command to display all processes started by the <em>Apache HTTPD web server</em> user (<code>www-data</code>):</p>
<div class="ulist">
<ul>
<li>
<p>Using BSD syntax:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using UNIX syntax:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Using GNU syntax:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-EE">Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>SIGHUP</code> signal can be used as a way to restart certain daemons. With the <em>Apache HTTPD web server</em>&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;sending <code>SIGHUP</code> to the parent process (the one started by <code>init</code>) kills off its children. The parent, however, re-reads its configuration files, re-opens log files and spawns a new set of children. Do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Start the web server:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Make sure you know the PID of the parent process:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Make the Apache HTTPD web server restart by sending it the <code>SIGHUP</code> signal to the parent process:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Check that the parent was not killed and that new children have been spawned:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>Although initially static, the output of <code>ps</code> can be <em>turned</em> dynamic by combining <code>ps</code> and <code>watch</code>. We will monitor the <em>Apache HTTPD web server</em> for new connections. Before doing the tasks described below it is recommended that you read the description of the <code>MaxConnectionsPerChild</code> directive in <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html">Apache MPM Common Directives</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Add the <code>MaxConnectionsPerChild</code> directive with a value of <code>1</code> in the configuration file of <code>apache2</code>&#8201;&#8212;&#8201;in <em>Debian</em> and derivatives that is found in <code>/etc/apache2/apache2.conf</code>; in the <em>CentOS</em> family, in <code>/etc/httpd/conf/httpd.conf</code>. Do not forget to restart <code>apache2</code> for the changes to take effect.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Type in a command that uses <code>watch</code>, <code>ps</code> and <code>grep</code> for <code>apache2</code> connections.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now open a web browser or use a command line browser such as <code>lynx</code> to establish a connection to the web server through its IP address. What do you observe in the output of <code>watch</code>?</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p>As you have learned, by default <code>top</code> sorts the tasks by percentage of CPU usage in descending order (the higher values on top). This behaviour can be modified with the interactive keys <code>M</code> (memory usage), <code>N</code> (process unique identifier), <code>T</code> (running time) and <code>P</code> (percentage of CPU time). However, you can also sort the task list to your liking by launching <code>top</code> with the <code>-o</code> switch (for more information, check top&#8217;s <code>man</code> page). Now, perform the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Launch <code>top</code> so that the tasks are sorted by memory usage:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Verify that you typed the right command by highlighting the memory column:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
<li>
<p><code>ps</code> also has an <code>o</code> switch to specify the columns you want shown. Investigate this option and do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Launch <code>ps</code> so that only information about <em>user</em>, <em>percentage of memory used</em>, <em>percentage of CPU time used</em> and <em>full command</em> is shown:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now, launch <code>ps</code> so that the only information displayed is that of the user and the name of the programs they are using:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-SU">Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lesson you have learned about <em>jobs</em> and <em>job control</em>. Important facts and concepts to bear in mind are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jobs are processes that are sent to the background.</p>
</li>
<li>
<p>Apart from a <em>process ID</em>, jobs are also assigned a <em>job ID</em> when created.</p>
</li>
<li>
<p>To control jobs, a job specification (<code>jobspec</code>) is required.</p>
</li>
<li>
<p>Jobs can be brought to the foreground, sent to the background, suspended and terminated (or <em>killed</em>).</p>
</li>
<li>
<p>A job can be detached from the terminal and session in which it was created.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Likewise, we have also discussed the concept of <em>processes</em> and <em>process monitoring</em>. The most relevant ideas are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Processes are running programs.</p>
</li>
<li>
<p>Processes can be monitored.</p>
</li>
<li>
<p>Different utilities allow us to find out the <em>process ID</em> of processes as well as to send them signals to terminate them.</p>
</li>
<li>
<p>Signals can be specified by name (e.g. <code>-SIGTERM</code>), number (e.g. <code>-15</code>) or option (e.g. <code>-s SIGTERM</code>).</p>
</li>
<li>
<p><code>top</code> and <code>ps</code> are very powerful when it comes to monitoring processes. The output of the former is dynamic and keeps updating constantly; on the other hand, <code>ps</code> reveals output statically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Commands used in this lesson:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>jobs</code></dt>
<dd>
<p>Display active jobs and their status.</p>
</dd>
<dt class="hdlist1"><code>sleep</code></dt>
<dd>
<p>Delay for a specific amount of time.</p>
</dd>
<dt class="hdlist1"><code>fg</code></dt>
<dd>
<p>Bring job to the foreground.</p>
</dd>
<dt class="hdlist1"><code>bg</code></dt>
<dd>
<p>Move job to the background.</p>
</dd>
<dt class="hdlist1"><code>kill</code></dt>
<dd>
<p>Terminate job.</p>
</dd>
<dt class="hdlist1"><code>nohup</code></dt>
<dd>
<p>Detach job from session/terminal.</p>
</dd>
<dt class="hdlist1"><code>exit</code></dt>
<dd>
<p>Exit current shell.</p>
</dd>
<dt class="hdlist1"><code>tail</code></dt>
<dd>
<p>Display most recent lines in a file.</p>
</dd>
<dt class="hdlist1"><code>watch</code></dt>
<dd>
<p>Run a command repeatedly (2 seconds cycle by default).</p>
</dd>
<dt class="hdlist1"><code>uptime</code></dt>
<dd>
<p>Display how long the system has been running, the number of current users and system load average.</p>
</dd>
<dt class="hdlist1"><code>free</code></dt>
<dd>
<p>Display memory usage.</p>
</dd>
<dt class="hdlist1"><code>pgrep</code></dt>
<dd>
<p>Look up process ID based on name.</p>
</dd>
<dt class="hdlist1"><code>pidof</code></dt>
<dd>
<p>Look up process ID based on name.</p>
</dd>
<dt class="hdlist1"><code>pkill</code></dt>
<dd>
<p>Send signal to process by name.</p>
</dd>
<dt class="hdlist1"><code>killall</code></dt>
<dd>
<p>Kill process(es) by name.</p>
</dd>
<dt class="hdlist1"><code>top</code></dt>
<dd>
<p>Display Linux processes.</p>
</dd>
<dt class="hdlist1"><code>ps</code></dt>
<dd>
<p>Report a snapshot of the current processes.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-AGE">Answers to Guided Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>oneko</code> is a nice funny program that displays a cat chasing your mouse cursor. If not already installed in your desktop system, install it using your distribution&#8217;s package manager. We will use it to study job control.</p>
<div class="ulist">
<ul>
<li>
<p>Start the program. How do you do that?</p>
<div class="paragraph">
<p>By typing <code>oneko</code> into the terminal.</p>
</div>
</li>
<li>
<p>Move the mouse cursor to see how the cat chases it. Now suspend the process. How do you do that? What is the output?</p>
<div class="paragraph">
<p>By pressing the key combo <code><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>z</kbd></span></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[1]+  Stopped                 oneko</pre>
</div>
</div>
</li>
<li>
<p>Check how many jobs you currently have. What do you type? What is the output?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>jobs</strong>
[1]+  Stopped                 oneko</pre>
</div>
</div>
</li>
<li>
<p>Now send it to the background specifying its job ID. What is the output? How can you tell the job is running in the background?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>bg %1</strong>
[1]+ oneko &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>The cat is moving again.</p>
</div>
</li>
<li>
<p>Finally, terminate the job specifying its job ID. What do you type?</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill %1</strong></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Discover the PIDs of all the processes spawned by the <em>Apache HTTPD web server</em> (<code>apache2</code>) with two different commands:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pgrep apache2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pidof apache2</strong></pre>
</div>
</div>
</li>
<li>
<p>Terminate all <code>apache2</code> processes without using their PIDs and with two different commands:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>pkill apache2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>killall apache2</strong></pre>
</div>
</div>
</li>
<li>
<p>Suppose you have to terminate all instances of <code>apache2</code> and you do not have time to find out what their PIDs are. How would you accomplish that using <code>kill</code> with the default <code>SIGTERM</code> signal in a one-liner:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill $(pgrep apache2)</strong>
$ <strong>kill `pgrep apache2`</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill $(pidof apache2)</strong>
$ <strong>kill `pidof apache2`</strong></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Since <code>SIGTERM</code> (<code>15</code>) is the default signal, it is not necessary to pass any options to <code>kill</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Start <code>top</code> and interact with it by performing the following:</p>
<div class="ulist">
<ul>
<li>
<p>Show a forest view of processes:</p>
<div class="paragraph">
<p>Press <code>V</code>.</p>
</div>
</li>
<li>
<p>Show full paths of processes differentiating between userspace and kernelspace:</p>
<div class="paragraph">
<p>Press <code>c</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Type the <code>ps</code> command to display all processes started by the <em>Apache HTTPD web server</em> user (<code>www-data</code>):</p>
<div class="ulist">
<ul>
<li>
<p>Using BSD syntax:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps U www-data</strong></pre>
</div>
</div>
</li>
<li>
<p>Using UNIX syntax:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps -u www-data</strong></pre>
</div>
</div>
</li>
<li>
<p>Using GNU syntax:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps --user www-data</strong></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sec.103.5_01-AEE">Answers to Explorational Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>SIGHUP</code> signal can be used as a way to restart certain daemons. With the <em>Apache HTTPD web server</em>&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;sending <code>SIGHUP</code> to the parent process (the one started by <code>init</code>) kills off its children. The parent, however, re-reads its configuration files, re-opens log files and spawns a new set of children. Do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Start the web server:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>sudo systemctl start apache2</strong></pre>
</div>
</div>
</li>
<li>
<p>Make sure you know the PID of the parent process:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps aux | grep apache2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The parent process is that started by the <code>root</code> user. In our case the one with PID <code>1653</code>.</p>
</div>
</li>
<li>
<p>Make the Apache HTTPD web server restart by sending it the <code>SIGHUP</code> signal to the parent process:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kill -SIGHUP 1653</strong></pre>
</div>
</div>
</li>
<li>
<p>Check that the parent was not killed and that new children have been spawned:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps aux | grep apache2</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Now you should see the parent <code>apache2</code> process together with two new children.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Although initially static, the output of <code>ps</code> can be <em>turned</em> dynamic by combining <code>ps</code> and <code>watch</code>. We will monitor the <em>Apache HTTPD web server</em> for new connections. Before doing the tasks described below it is recommended that you read the description of the <code>MaxConnectionsPerChild</code> directive in <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html">Apache MPM Common Directives</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Add the <code>MaxConnectionsPerChild</code> directive with a value of <code>1</code> in the config file of <code>apache2</code>&#8201;&#8212;&#8201;in <em>Debian</em> and derivatives that is found in <code>/etc/apache2/apache2.conf</code>; in the <em>CentOS</em> family, in <code>/etc/httpd/conf/httpd.conf</code>. Do not forget to restart <code>apache2</code> for the changes to take effect.</p>
<div class="paragraph">
<p>The line to include in the config file is <code>MaxConnectionsPerChild 1</code>. One way to restart the web server is through <code>sudo systemctl restart apache2</code>.</p>
</div>
</li>
<li>
<p>Type in a command that uses <code>watch</code>, <code>ps</code> and <code>grep</code> for <code>apache2</code> connections.</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>watch 'ps aux | grep apache2'</strong></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>watch "ps aux | grep apache2"</strong></pre>
</div>
</div>
</li>
<li>
<p>Now open a web browser or use a command line browser such as <code>lynx</code> to establish a connection to the web server through its IP address. What do you observe in the output of <code>watch</code>?</p>
<div class="paragraph">
<p>One of the child processes owned by <code>www-data</code> disappears.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>As you have learned, by default <code>top</code> sorts the tasks by percentage of CPU usage in descending order (the higher values on top). This behaviour can be modify with the interactive keys <code>M</code> (memory usage), <code>N</code> (process unique identifier), <code>T</code> (running time) and <code>P</code> (percentage of CPU time). However, you can also sort the task list to your liking by launching <code>top</code> with the <code>-o</code> switch (for more information, check top&#8217;s <code>man</code> page). Now, do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Launch <code>top</code> so that the tasks are sorted by memory usage:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>top -o %MEM</strong></pre>
</div>
</div>
</li>
<li>
<p>Verify that you typed the right command by highlighting the memory column:</p>
<div class="paragraph">
<p>Press <code>x</code>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>ps</code> has also an <code>o</code> switch to specify the columns you want shown. Investigate about this and do the following tasks:</p>
<div class="ulist">
<ul>
<li>
<p>Launch <code>ps</code> so that only information about <em>user</em>, <em>percentage of memory used</em>, <em>percentage of CPU time used</em> and <em>full command</em> is shown:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps o user,%mem,%cpu,cmd</strong></pre>
</div>
</div>
</li>
<li>
<p>Now, launch <code>ps</code> so that the only information displayed is that of the user and the name of the programs they are using:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>ps o user,comm</strong></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>

        
      </section>
    </div>

    <aside class="lesson__license smallprint">
  <div class="container">
    
    <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
       This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
  </div>
</aside>


    
    
    <aside class="lesson__teaser teaser">
      <div class="container teaser__container">
        <h2 class="label">Next Lesson</h2>
        <p class="headline teaser__headline">103.5 Create, monitor and kill processes (103.5 Lesson 2)</p>

        <div class="button-group">
            <a href="../103.5_02/index.html" class="button -primary">Read next lesson</a>
        </div>
      </div>
    </aside>
    
  </div>
</div>

<div class="lesson-progress">
  <div class="lesson-progress__current"></div>
</div>

      </main>
    </td></tr></tbody>
    <tfoot><tr><td class="print__cell">
      <div class="print__space -footer"></div>
    </td></tr></tfoot>
  </table>

  <table class="print-footer">
  <tr class="print-footer__body">
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__image">
    </td>
    <td class="print-footer__cell -center">
      <p>© 2020 Linux Professional Insitute Inc. All rights reserved. Visit the Learning Materials website: https://learning.lpi.org<br />
         This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License.</p>
    </td>
    <td class="print-footer__cell -image">
      <img src="index.html" alt="" class="print-footer__license">
    </td>
  </tr>
</table>

<footer class="footer">
  <div class="container footer__container columns">
    <div class="column">
      <h2>LPI is a non-profit organization.</h2>
      <p>Linux Professional Institute (LPI) is the global certification standard and career support organization for open source professionals. With more than 200,000 certification holders, it&#39;s the world’s first and largest vendor-neutral Linux and open source certification body. LPI has certified professionals in over 180 countries, delivers exams in multiple languages, and has hundreds of training partners.</p>
      <p>Our purpose is to enable economic and creative opportunities for everybody by making open source knowledge and skills certification universally accessible.</p>
    </div>

    <div class="column">
      <ul class="footer__social social">
        <li class="social__item -linkedin">
          <a class="social__link" href="https://www.linkedin.com/company/35136" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 42.3 36" enable-background="new 0 0 42.3 36" xml:space="preserve">
<g>
	<g>
		<g>
			<path fill="#010202" d="M33.3,0H2.7C1.2,0,0,1.2,0,2.6v30.8C0,34.8,1.2,36,2.7,36h30.7c1.5,0,2.7-1.2,2.7-2.6V2.6
				C36,1.2,34.8,0,33.3,0z M10.7,30.7H5.3V13.5h5.3V30.7z M8,11.1c-1.7,0-3.1-1.4-3.1-3.1C4.9,6.3,6.3,5,8,5c1.7,0,3.1,1.4,3.1,3.1
				C11.1,9.8,9.7,11.1,8,11.1z M30.7,30.7h-5.3v-8.4c0-2,0-4.6-2.8-4.6c-2.8,0-3.2,2.2-3.2,4.4v8.5H14V13.5h5.1v2.3h0.1
				c0.7-1.4,2.5-2.8,5.1-2.8c5.4,0,6.4,3.6,6.4,8.2V30.7z"/>
		</g>
	</g>
	<g>
		<polygon fill="#010202" points="37.5,28.5 38.2,28.5 38.2,30.7 38.6,30.7 38.6,28.5 39.3,28.5 39.3,28.1 37.5,28.1 		"/>
		<polygon fill="#010202" points="41.7,28.1 41,30 40.3,28.1 39.7,28.1 39.7,30.7 40.1,30.7 40.1,28.8 40.9,30.7 41.1,30.7
			41.9,28.8 41.9,30.7 42.3,30.7 42.3,28.1 		"/>
	</g>
</g>
</svg>

            <span class="social__link__text">LinkedIn</span>
          </a>
        </li>
        <li class="social__item -facebook">
          <a class="social__link" href="https://www.facebook.com/LPIConnect" target="_blank" rel="noreferrer">
            <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<title>flogo-RGB-HEX-Blk-58</title>
<path d="M34,0H2C0.9,0,0,0.9,0,2v32c0,1.1,0.9,2,2,2h17.3V22.1h-4.7v-5.4h4.7v-4c0-4.6,2.8-7.2,7-7.2c0,0,0,0,0,0c0,0,0,0,0,0
	c0.4,0,0.9,0,1.3,0c0.3,0,0.5,0,0.8,0c0.7,0,1.4,0.1,2.1,0.2v4.9v0h-2.9c-0.3,0-0.5,0-0.8,0c-1.6,0.2-1.9,1.2-1.9,2.6v3.5h5.4
	l-0.7,5.4h0l0,0h-4.7V36H34c1.1,0,2-0.9,2-2V2C36,0.9,35.1,0,34,0z"/>
</svg>

            <span class="social__link__text">Facebook</span>
          </a>
        </li>
        <li class="social__item -twitter">
          <a class="social__link" href="https://twitter.com/lpiconnect" target="_blank" rel="noreferrer">
            <svg version="1.1" id="Logo_FIXED" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path d="M11.3,32.6c13.6,0,21-11.3,21-21c0-0.3,0-0.6,0-1c1.4-1,2.7-2.3,3.7-3.8c-1.3,0.6-2.8,1-4.2,1.2c1.5-0.9,2.7-2.4,3.2-4.1
	c-1.4,0.9-3,1.5-4.7,1.8c-2.8-3-7.5-3.1-10.5-0.3c-1.9,1.8-2.7,4.5-2.1,7.1C11.8,12.1,6.3,9.3,2.5,4.7c-2,3.4-1,7.7,2.3,9.9
	c-1.2,0-2.3-0.4-3.4-0.9c0,0,0,0.1,0,0.1c0,3.5,2.5,6.5,5.9,7.2c-1.1,0.3-2.2,0.3-3.3,0.1c1,3,3.7,5.1,6.9,5.1
	c-2.6,2.1-5.8,3.2-9.2,3.2c-0.6,0-1.2,0-1.8-0.1C3.4,31.5,7.3,32.6,11.3,32.6"/>
</svg>

            <span class="social__link__text">Twitter</span>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <div class="container footer__secondary">
    <ul class="footer__links">
      <li><a href="https://www.lpi.org/about-lpi/contact-us" class="footer__link" target="_blank" rel="noreferrer">Contact Us</a></li>
      <li><a href="https://www.lpi.org/privacy-and-cookie-policy" class="footer__link" target="_blank" rel="noreferrer">Privacy and Cookie Policy</a></li>
    </ul>

    <p><strong>Spot a mistake or want to help improve this page? Please <a href="https://www.lpi.org/about-lpi/contact-us" target="_blank" rel="noreferrer">let us know</a>.</strong></p>
    <p>© Copyright 1999-2020 The Linux Professional Institute Inc. All rights reserved.</p>
  </div>
</footer>


  
  
  

  <script src="https://unpkg.com/swiper/swiper-bundle.min.js" type="application/javascript"></script>
  <script src="../../../../../../js/bundle.js"></script>
</body>
</html>
